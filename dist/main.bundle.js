(()=>{var fu=()=>{};var gu=function(n){let t=[],e=0;for(let r=0;r<n.length;r++){let s=n.charCodeAt(r);s<128?t[e++]=s:s<2048?(t[e++]=s>>6|192,t[e++]=s&63|128):(s&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++r)&1023),t[e++]=s>>18|240,t[e++]=s>>12&63|128,t[e++]=s>>6&63|128,t[e++]=s&63|128):(t[e++]=s>>12|224,t[e++]=s>>6&63|128,t[e++]=s&63|128)}return t},vf=function(n){let t=[],e=0,r=0;for(;e<n.length;){let s=n[e++];if(s<128)t[r++]=String.fromCharCode(s);else if(s>191&&s<224){let o=n[e++];t[r++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){let o=n[e++],a=n[e++],l=n[e++],h=((s&7)<<18|(o&63)<<12|(a&63)<<6|l&63)-65536;t[r++]=String.fromCharCode(55296+(h>>10)),t[r++]=String.fromCharCode(56320+(h&1023))}else{let o=n[e++],a=n[e++];t[r++]=String.fromCharCode((s&15)<<12|(o&63)<<6|a&63)}}return t.join("")},_u={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,t){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let e=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<n.length;s+=3){let o=n[s],a=s+1<n.length,l=a?n[s+1]:0,h=s+2<n.length,f=h?n[s+2]:0,p=o>>2,I=(o&3)<<4|l>>4,b=(l&15)<<2|f>>6,C=f&63;h||(C=64,a||(b=64)),r.push(e[p],e[I],e[b],e[C])}return r.join("")},encodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(n):this.encodeByteArray(gu(n),t)},decodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(n):vf(this.decodeStringToByteArray(n,t))},decodeStringToByteArray(n,t){this.init_();let e=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<n.length;){let o=e[n.charAt(s++)],l=s<n.length?e[n.charAt(s)]:0;++s;let f=s<n.length?e[n.charAt(s)]:64;++s;let I=s<n.length?e[n.charAt(s)]:64;if(++s,o==null||l==null||f==null||I==null)throw new ui;let b=o<<2|l>>4;if(r.push(b),f!==64){let C=l<<4&240|f>>2;if(r.push(C),I!==64){let N=f<<6&192|I;r.push(N)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},ui=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},bf=function(n){let t=gu(n);return _u.encodeByteArray(t,!0)},On=function(n){return bf(n).replace(/\./g,"")},yu=function(n){try{return _u.decodeString(n,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function wu(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var Af=()=>wu().__FIREBASE_DEFAULTS__,Sf=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},Rf=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let t=n&&yu(n[1]);return t&&JSON.parse(t)},li=()=>{try{return fu()||Af()||Sf()||Rf()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Cf=n=>li()?.emulatorHosts?.[n],Pr=n=>{let t=Cf(n);if(!t)return;let e=t.lastIndexOf(":");if(e<=0||e+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);let r=parseInt(t.substring(e+1),10);return t[0]==="["?[t.substring(1,e-1),r]:[t.substring(0,e),r]},hi=()=>li()?.config;var Cr=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}wrapCallback(t){return(e,r)=>{e?this.reject(e):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(e):t(e,r))}}};function Te(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Dr(n){return(await fetch(n,{credentials:"include"})).ok}function xr(n,t){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let e={alg:"none",type:"JWT"},r=t||"demo-project",s=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let a={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...n};return[On(JSON.stringify(e)),On(JSON.stringify(a)),""].join(".")}var Vn={};function Pf(){let n={prod:[],emulator:[]};for(let t of Object.keys(Vn))Vn[t]?n.emulator.push(t):n.prod.push(t);return n}function Df(n){let t=document.getElementById(n),e=!1;return t||(t=document.createElement("div"),t.setAttribute("id",n),e=!0),{created:e,element:t}}var pu=!1;function kr(n,t){if(typeof window>"u"||typeof document>"u"||!Te(window.location.host)||Vn[n]===t||Vn[n]||pu)return;Vn[n]=t;function e(b){return`__firebase__banner__${b}`}let r="__firebase__banner",o=Pf().prod.length>0;function a(){let b=document.getElementById(r);b&&b.remove()}function l(b){b.style.display="flex",b.style.background="#7faaf0",b.style.position="fixed",b.style.bottom="5px",b.style.left="5px",b.style.padding=".5em",b.style.borderRadius="5px",b.style.alignItems="center"}function h(b,C){b.setAttribute("width","24"),b.setAttribute("id",C),b.setAttribute("height","24"),b.setAttribute("viewBox","0 0 24 24"),b.setAttribute("fill","none"),b.style.marginLeft="-6px"}function f(){let b=document.createElement("span");return b.style.cursor="pointer",b.style.marginLeft="16px",b.style.fontSize="24px",b.innerHTML=" &times;",b.onclick=()=>{pu=!0,a()},b}function p(b,C){b.setAttribute("id",C),b.innerText="Learn more",b.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",b.setAttribute("target","__blank"),b.style.paddingLeft="5px",b.style.textDecoration="underline"}function I(){let b=Df(r),C=e("text"),N=document.getElementById(C)||document.createElement("span"),V=e("learnmore"),D=document.getElementById(V)||document.createElement("a"),G=e("preprendIcon"),K=document.getElementById(G)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(b.created){let z=b.element;l(z),p(D,V);let H=f();h(K,G),z.append(K,N,D,H),document.body.appendChild(z)}o?(N.innerText="Preview backend disconnected.",K.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(K.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,N.innerText="Preview backend running in this workspace."),N.setAttribute("id",C)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",I):I()}function Iu(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function xf(){let n=li()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Tu(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function Eu(){return!xf()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Mn(){try{return typeof indexedDB=="object"}catch{return!1}}function Nr(){return new Promise((n,t)=>{try{let e=!0,r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),e||self.indexedDB.deleteDatabase(r),n(!0)},s.onupgradeneeded=()=>{e=!1},s.onerror=()=>{t(s.error?.message||"")}}catch(e){t(e)}})}function vu(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}var kf="FirebaseError",Et=class n extends Error{constructor(t,e,r){super(e),this.code=t,this.customData=r,this.name=kf,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,jt.prototype.create)}},jt=class{constructor(t,e,r){this.service=t,this.serviceName=e,this.errors=r}create(t,...e){let r=e[0]||{},s=`${this.service}/${t}`,o=this.errors[t],a=o?Nf(o,r):"Error",l=`${this.serviceName}: ${a} (${s}).`;return new Et(s,l,r)}};function Nf(n,t){return n.replace(Vf,(e,r)=>{let s=t[r];return s!=null?String(s):`<${r}?>`})}var Vf=/\{\$([^}]+)}/g;function ie(n,t){if(n===t)return!0;let e=Object.keys(n),r=Object.keys(t);for(let s of e){if(!r.includes(s))return!1;let o=n[s],a=t[s];if(mu(o)&&mu(a)){if(!ie(o,a))return!1}else if(o!==a)return!1}for(let s of r)if(!e.includes(s))return!1;return!0}function mu(n){return n!==null&&typeof n=="object"}var Of=1e3,Mf=2,Ff=14400*1e3,Lf=.5;function di(n,t=Of,e=Mf){let r=t*Math.pow(e,n),s=Math.round(Lf*r*(Math.random()-.5)*2);return Math.min(Ff,r+s)}function St(n){return n&&n._delegate?n._delegate:n}var pt=class{constructor(t,e,r){this.name=t,this.instanceFactory=e,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}};var Ee="[DEFAULT]";var fi=class{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){let e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){let r=new Cr;if(this.instancesDeferred.set(e,r),this.isInitialized(e)||this.shouldAutoInitialize())try{let s=this.getOrInitializeService({instanceIdentifier:e});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(e).promise}getImmediate(t){let e=this.normalizeInstanceIdentifier(t?.identifier),r=t?.optional??!1;if(this.isInitialized(e)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:e})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(Bf(t))try{this.getOrInitializeService({instanceIdentifier:Ee})}catch{}for(let[e,r]of this.instancesDeferred.entries()){let s=this.normalizeInstanceIdentifier(e);try{let o=this.getOrInitializeService({instanceIdentifier:s});r.resolve(o)}catch{}}}}clearInstance(t=Ee){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){let t=Array.from(this.instances.values());await Promise.all([...t.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...t.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Ee){return this.instances.has(t)}getOptions(t=Ee){return this.instancesOptions.get(t)||{}}initialize(t={}){let{options:e={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let s=this.getOrInitializeService({instanceIdentifier:r,options:e});for(let[o,a]of this.instancesDeferred.entries()){let l=this.normalizeInstanceIdentifier(o);r===l&&a.resolve(s)}return s}onInit(t,e){let r=this.normalizeInstanceIdentifier(e),s=this.onInitCallbacks.get(r)??new Set;s.add(t),this.onInitCallbacks.set(r,s);let o=this.instances.get(r);return o&&t(o,r),()=>{s.delete(t)}}invokeOnInitCallbacks(t,e){let r=this.onInitCallbacks.get(e);if(r)for(let s of r)try{s(t,e)}catch{}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Uf(t),options:e}),this.instances.set(t,r),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=Ee){return this.component?this.component.multipleInstances?t:Ee:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function Uf(n){return n===Ee?void 0:n}function Bf(n){return n.instantiationMode==="EAGER"}var Vr=class{constructor(t){this.name=t,this.providers=new Map}addComponent(t){let e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);let e=new fi(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}};var qf=[],U;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(U||(U={}));var jf={debug:U.DEBUG,verbose:U.VERBOSE,info:U.INFO,warn:U.WARN,error:U.ERROR,silent:U.SILENT},zf=U.INFO,$f={[U.DEBUG]:"log",[U.VERBOSE]:"log",[U.INFO]:"info",[U.WARN]:"warn",[U.ERROR]:"error"},Gf=(n,t,...e)=>{if(t<n.logLevel)return;let r=new Date().toISOString(),s=$f[t];if(s)console[s](`[${r}]  ${n.name}:`,...e);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)},oe=class{constructor(t){this.name=t,this._logLevel=zf,this._logHandler=Gf,this._userLogHandler=null,qf.push(this)}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in U))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?jf[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,U.DEBUG,...t),this._logHandler(this,U.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,U.VERBOSE,...t),this._logHandler(this,U.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,U.INFO,...t),this._logHandler(this,U.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,U.WARN,...t),this._logHandler(this,U.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,U.ERROR,...t),this._logHandler(this,U.ERROR,...t)}};var Kf=(n,t)=>t.some(e=>n instanceof e),bu,Au;function Hf(){return bu||(bu=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Wf(){return Au||(Au=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var Su=new WeakMap,mi=new WeakMap,Ru=new WeakMap,pi=new WeakMap,_i=new WeakMap;function Qf(n){let t=new Promise((e,r)=>{let s=()=>{n.removeEventListener("success",o),n.removeEventListener("error",a)},o=()=>{e(Ft(n.result)),s()},a=()=>{r(n.error),s()};n.addEventListener("success",o),n.addEventListener("error",a)});return t.then(e=>{e instanceof IDBCursor&&Su.set(e,n)}).catch(()=>{}),_i.set(t,n),t}function Jf(n){if(mi.has(n))return;let t=new Promise((e,r)=>{let s=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",a),n.removeEventListener("abort",a)},o=()=>{e(),s()},a=()=>{r(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",o),n.addEventListener("error",a),n.addEventListener("abort",a)});mi.set(n,t)}var gi={get(n,t,e){if(n instanceof IDBTransaction){if(t==="done")return mi.get(n);if(t==="objectStoreNames")return n.objectStoreNames||Ru.get(n);if(t==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return Ft(n[t])},set(n,t,e){return n[t]=e,!0},has(n,t){return n instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in n}};function Cu(n){gi=n(gi)}function Xf(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...e){let r=n.call(Or(this),t,...e);return Ru.set(r,t.sort?t.sort():[t]),Ft(r)}:Wf().includes(n)?function(...t){return n.apply(Or(this),t),Ft(Su.get(this))}:function(...t){return Ft(n.apply(Or(this),t))}}function Yf(n){return typeof n=="function"?Xf(n):(n instanceof IDBTransaction&&Jf(n),Kf(n,Hf())?new Proxy(n,gi):n)}function Ft(n){if(n instanceof IDBRequest)return Qf(n);if(pi.has(n))return pi.get(n);let t=Yf(n);return t!==n&&(pi.set(n,t),_i.set(t,n)),t}var Or=n=>_i.get(n);function Mr(n,t,{blocked:e,upgrade:r,blocking:s,terminated:o}={}){let a=indexedDB.open(n,t),l=Ft(a);return r&&a.addEventListener("upgradeneeded",h=>{r(Ft(a.result),h.oldVersion,h.newVersion,Ft(a.transaction),h)}),e&&a.addEventListener("blocked",h=>e(h.oldVersion,h.newVersion,h)),l.then(h=>{o&&h.addEventListener("close",()=>o()),s&&h.addEventListener("versionchange",f=>s(f.oldVersion,f.newVersion,f))}).catch(()=>{}),l}var Zf=["get","getKey","getAll","getAllKeys","count"],tp=["put","add","delete","clear"],yi=new Map;function Pu(n,t){if(!(n instanceof IDBDatabase&&!(t in n)&&typeof t=="string"))return;if(yi.get(t))return yi.get(t);let e=t.replace(/FromIndex$/,""),r=t!==e,s=tp.includes(e);if(!(e in(r?IDBIndex:IDBObjectStore).prototype)||!(s||Zf.includes(e)))return;let o=async function(a,...l){let h=this.transaction(a,s?"readwrite":"readonly"),f=h.store;return r&&(f=f.index(l.shift())),(await Promise.all([f[e](...l),s&&h.done]))[0]};return yi.set(t,o),o}Cu(n=>({...n,get:(t,e,r)=>Pu(t,e)||n.get(t,e,r),has:(t,e)=>!!Pu(t,e)||n.has(t,e)}));var Ii=class{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(ep(e)){let r=e.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(e=>e).join(" ")}};function ep(n){return n.getComponent()?.type==="VERSION"}var Ti="@firebase/app",Du="0.14.6";var zt=new oe("@firebase/app"),np="@firebase/app-compat",rp="@firebase/analytics-compat",sp="@firebase/analytics",ip="@firebase/app-check-compat",op="@firebase/app-check",ap="@firebase/auth",cp="@firebase/auth-compat",up="@firebase/database",lp="@firebase/data-connect",hp="@firebase/database-compat",dp="@firebase/functions",fp="@firebase/functions-compat",pp="@firebase/installations",mp="@firebase/installations-compat",gp="@firebase/messaging",_p="@firebase/messaging-compat",yp="@firebase/performance",wp="@firebase/performance-compat",Ip="@firebase/remote-config",Tp="@firebase/remote-config-compat",Ep="@firebase/storage",vp="@firebase/storage-compat",bp="@firebase/firestore",Ap="@firebase/ai",Sp="@firebase/firestore-compat",Rp="firebase",Cp="12.6.0";var Ei="[DEFAULT]",Pp={[Ti]:"fire-core",[np]:"fire-core-compat",[sp]:"fire-analytics",[rp]:"fire-analytics-compat",[op]:"fire-app-check",[ip]:"fire-app-check-compat",[ap]:"fire-auth",[cp]:"fire-auth-compat",[up]:"fire-rtdb",[lp]:"fire-data-connect",[hp]:"fire-rtdb-compat",[dp]:"fire-fn",[fp]:"fire-fn-compat",[pp]:"fire-iid",[mp]:"fire-iid-compat",[gp]:"fire-fcm",[_p]:"fire-fcm-compat",[yp]:"fire-perf",[wp]:"fire-perf-compat",[Ip]:"fire-rc",[Tp]:"fire-rc-compat",[Ep]:"fire-gcs",[vp]:"fire-gcs-compat",[bp]:"fire-fst",[Sp]:"fire-fst-compat",[Ap]:"fire-vertex","fire-js":"fire-js",[Rp]:"fire-js-all"};var Fr=new Map,Dp=new Map,vi=new Map;function xu(n,t){try{n.container.addComponent(t)}catch(e){zt.debug(`Component ${t.name} failed to register with FirebaseApp ${n.name}`,e)}}function Rt(n){let t=n.name;if(vi.has(t))return zt.debug(`There were multiple attempts to register component ${t}.`),!1;vi.set(t,n);for(let e of Fr.values())xu(e,n);for(let e of Dp.values())xu(e,n);return!0}function Lt(n,t){let e=n.container.getProvider("heartbeat").getImmediate({optional:!0});return e&&e.triggerHeartbeat(),n.container.getProvider(t)}function Lr(n){return n==null?!1:n.settings!==void 0}var xp={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ae=new jt("app","Firebase",xp);var bi=class{constructor(t,e,r){this._isDeleted=!1,this._options={...t},this._config={...e},this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new pt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw ae.create("app-deleted",{appName:this._name})}};var Ur=Cp;function Ri(n,t={}){let e=n;typeof t!="object"&&(t={name:t});let r={name:Ei,automaticDataCollectionEnabled:!0,...t},s=r.name;if(typeof s!="string"||!s)throw ae.create("bad-app-name",{appName:String(s)});if(e||(e=hi()),!e)throw ae.create("no-options");let o=Fr.get(s);if(o){if(ie(e,o.options)&&ie(r,o.config))return o;throw ae.create("duplicate-app",{appName:s})}let a=new Vr(s);for(let h of vi.values())a.addComponent(h);let l=new bi(e,r,a);return Fr.set(s,l),l}function ve(n=Ei){let t=Fr.get(n);if(!t&&n===Ei&&hi())return Ri();if(!t)throw ae.create("no-app",{appName:n});return t}function mt(n,t,e){let r=Pp[n]??n;e&&(r+=`-${e}`);let s=r.match(/\s|\//),o=t.match(/\s|\//);if(s||o){let a=[`Unable to register library "${r}" with version "${t}":`];s&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),zt.warn(a.join(" "));return}Rt(new pt(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}var kp="firebase-heartbeat-database",Np=1,Fn="firebase-heartbeat-store",wi=null;function Ou(){return wi||(wi=Mr(kp,Np,{upgrade:(n,t)=>{switch(t){case 0:try{n.createObjectStore(Fn)}catch(e){console.warn(e)}}}}).catch(n=>{throw ae.create("idb-open",{originalErrorMessage:n.message})})),wi}async function Vp(n){try{let e=(await Ou()).transaction(Fn),r=await e.objectStore(Fn).get(Mu(n));return await e.done,r}catch(t){if(t instanceof Et)zt.warn(t.message);else{let e=ae.create("idb-get",{originalErrorMessage:t?.message});zt.warn(e.message)}}}async function ku(n,t){try{let r=(await Ou()).transaction(Fn,"readwrite");await r.objectStore(Fn).put(t,Mu(n)),await r.done}catch(e){if(e instanceof Et)zt.warn(e.message);else{let r=ae.create("idb-set",{originalErrorMessage:e?.message});zt.warn(r.message)}}}function Mu(n){return`${n.name}!${n.options.appId}`}var Op=1024,Mp=30,Ai=class{constructor(t){this.container=t,this._heartbeatsCache=null;let e=this.container.getProvider("app").getImmediate();this._storage=new Si(e),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{let e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Nu();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(s=>s.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:e}),this._heartbeatsCache.heartbeats.length>Mp){let s=Lp(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(t){zt.warn(t)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=Nu(),{heartbeatsToSend:e,unsentEntries:r}=Fp(this._heartbeatsCache.heartbeats),s=On(JSON.stringify({version:2,heartbeats:e}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return zt.warn(t),""}}};function Nu(){return new Date().toISOString().substring(0,10)}function Fp(n,t=Op){let e=[],r=n.slice();for(let s of n){let o=e.find(a=>a.agent===s.agent);if(o){if(o.dates.push(s.date),Vu(e)>t){o.dates.pop();break}}else if(e.push({agent:s.agent,dates:[s.date]}),Vu(e)>t){e.pop();break}r=r.slice(1)}return{heartbeatsToSend:e,unsentEntries:r}}var Si=class{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Mn()?Nr().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){let e=await Vp(this.app);return e?.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){let r=await this.read();return ku(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){let r=await this.read();return ku(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...t.heartbeats]})}else return}};function Vu(n){return On(JSON.stringify({version:2,heartbeats:n})).length}function Lp(n){if(n.length===0)return-1;let t=0,e=n[0].date;for(let r=1;r<n.length;r++)n[r].date<e&&(e=n[r].date,t=r);return t}function Up(n){Rt(new pt("platform-logger",t=>new Ii(t),"PRIVATE")),Rt(new pt("heartbeat",t=>new Ai(t),"PRIVATE")),mt(Ti,Du,n),mt(Ti,Du,"esm2020"),mt("fire-js","")}Up("");var Bp="firebase",qp="12.6.0";mt(Bp,qp,"app");var Uu="@firebase/installations",xi="0.6.19";var Bu=1e4,qu=`w:${xi}`,ju="FIS_v2",jp="https://firebaseinstallations.googleapis.com/v1",zp=3600*1e3,$p="installations",Gp="Installations";var Kp={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Ae=new jt($p,Gp,Kp);function zu(n){return n instanceof Et&&n.code.includes("request-failed")}function $u({projectId:n}){return`${jp}/projects/${n}/installations`}function Gu(n){return{token:n.token,requestStatus:2,expiresIn:Wp(n.expiresIn),creationTime:Date.now()}}async function Ku(n,t){let r=(await t.json()).error;return Ae.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function Hu({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function Hp(n,{refreshToken:t}){let e=Hu(n);return e.append("Authorization",Qp(t)),e}async function Wu(n){let t=await n();return t.status>=500&&t.status<600?n():t}function Wp(n){return Number(n.replace("s","000"))}function Qp(n){return`${ju} ${n}`}async function Jp({appConfig:n,heartbeatServiceProvider:t},{fid:e}){let r=$u(n),s=Hu(n),o=t.getImmediate({optional:!0});if(o){let f=await o.getHeartbeatsHeader();f&&s.append("x-firebase-client",f)}let a={fid:e,authVersion:ju,appId:n.appId,sdkVersion:qu},l={method:"POST",headers:s,body:JSON.stringify(a)},h=await Wu(()=>fetch(r,l));if(h.ok){let f=await h.json();return{fid:f.fid||e,registrationStatus:2,refreshToken:f.refreshToken,authToken:Gu(f.authToken)}}else throw await Ku("Create Installation",h)}function Qu(n){return new Promise(t=>{setTimeout(t,n)})}function Xp(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}var Yp=/^[cdef][\w-]{21}$/,Di="";function Zp(){try{let n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;let e=tm(n);return Yp.test(e)?e:Di}catch{return Di}}function tm(n){return Xp(n).substr(0,22)}function qr(n){return`${n.appName}!${n.appId}`}var Ju=new Map;function Xu(n,t){let e=qr(n);Yu(e,t),em(e,t)}function Yu(n,t){let e=Ju.get(n);if(e)for(let r of e)r(t)}function em(n,t){let e=nm();e&&e.postMessage({key:n,fid:t}),rm()}var be=null;function nm(){return!be&&"BroadcastChannel"in self&&(be=new BroadcastChannel("[Firebase] FID Change"),be.onmessage=n=>{Yu(n.data.key,n.data.fid)}),be}function rm(){Ju.size===0&&be&&(be.close(),be=null)}var sm="firebase-installations-database",im=1,Se="firebase-installations-store",Ci=null;function ki(){return Ci||(Ci=Mr(sm,im,{upgrade:(n,t)=>{switch(t){case 0:n.createObjectStore(Se)}}})),Ci}async function Br(n,t){let e=qr(n),s=(await ki()).transaction(Se,"readwrite"),o=s.objectStore(Se),a=await o.get(e);return await o.put(t,e),await s.done,(!a||a.fid!==t.fid)&&Xu(n,t.fid),t}async function Zu(n){let t=qr(n),r=(await ki()).transaction(Se,"readwrite");await r.objectStore(Se).delete(t),await r.done}async function jr(n,t){let e=qr(n),s=(await ki()).transaction(Se,"readwrite"),o=s.objectStore(Se),a=await o.get(e),l=t(a);return l===void 0?await o.delete(e):await o.put(l,e),await s.done,l&&(!a||a.fid!==l.fid)&&Xu(n,l.fid),l}async function Ni(n){let t,e=await jr(n.appConfig,r=>{let s=om(r),o=am(n,s);return t=o.registrationPromise,o.installationEntry});return e.fid===Di?{installationEntry:await t}:{installationEntry:e,registrationPromise:t}}function om(n){let t=n||{fid:Zp(),registrationStatus:0};return tl(t)}function am(n,t){if(t.registrationStatus===0){if(!navigator.onLine){let s=Promise.reject(Ae.create("app-offline"));return{installationEntry:t,registrationPromise:s}}let e={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},r=cm(n,e);return{installationEntry:e,registrationPromise:r}}else return t.registrationStatus===1?{installationEntry:t,registrationPromise:um(n)}:{installationEntry:t}}async function cm(n,t){try{let e=await Jp(n,t);return Br(n.appConfig,e)}catch(e){throw zu(e)&&e.customData.serverCode===409?await Zu(n.appConfig):await Br(n.appConfig,{fid:t.fid,registrationStatus:0}),e}}async function um(n){let t=await Fu(n.appConfig);for(;t.registrationStatus===1;)await Qu(100),t=await Fu(n.appConfig);if(t.registrationStatus===0){let{installationEntry:e,registrationPromise:r}=await Ni(n);return r||e}return t}function Fu(n){return jr(n,t=>{if(!t)throw Ae.create("installation-not-found");return tl(t)})}function tl(n){return lm(n)?{fid:n.fid,registrationStatus:0}:n}function lm(n){return n.registrationStatus===1&&n.registrationTime+Bu<Date.now()}async function hm({appConfig:n,heartbeatServiceProvider:t},e){let r=dm(n,e),s=Hp(n,e),o=t.getImmediate({optional:!0});if(o){let f=await o.getHeartbeatsHeader();f&&s.append("x-firebase-client",f)}let a={installation:{sdkVersion:qu,appId:n.appId}},l={method:"POST",headers:s,body:JSON.stringify(a)},h=await Wu(()=>fetch(r,l));if(h.ok){let f=await h.json();return Gu(f)}else throw await Ku("Generate Auth Token",h)}function dm(n,{fid:t}){return`${$u(n)}/${t}/authTokens:generate`}async function Vi(n,t=!1){let e,r=await jr(n.appConfig,o=>{if(!el(o))throw Ae.create("not-registered");let a=o.authToken;if(!t&&mm(a))return o;if(a.requestStatus===1)return e=fm(n,t),o;{if(!navigator.onLine)throw Ae.create("app-offline");let l=_m(o);return e=pm(n,l),l}});return e?await e:r.authToken}async function fm(n,t){let e=await Lu(n.appConfig);for(;e.authToken.requestStatus===1;)await Qu(100),e=await Lu(n.appConfig);let r=e.authToken;return r.requestStatus===0?Vi(n,t):r}function Lu(n){return jr(n,t=>{if(!el(t))throw Ae.create("not-registered");let e=t.authToken;return ym(e)?{...t,authToken:{requestStatus:0}}:t})}async function pm(n,t){try{let e=await hm(n,t),r={...t,authToken:e};return await Br(n.appConfig,r),e}catch(e){if(zu(e)&&(e.customData.serverCode===401||e.customData.serverCode===404))await Zu(n.appConfig);else{let r={...t,authToken:{requestStatus:0}};await Br(n.appConfig,r)}throw e}}function el(n){return n!==void 0&&n.registrationStatus===2}function mm(n){return n.requestStatus===2&&!gm(n)}function gm(n){let t=Date.now();return t<n.creationTime||n.creationTime+n.expiresIn<t+zp}function _m(n){let t={requestStatus:1,requestTime:Date.now()};return{...n,authToken:t}}function ym(n){return n.requestStatus===1&&n.requestTime+Bu<Date.now()}async function wm(n){let t=n,{installationEntry:e,registrationPromise:r}=await Ni(t);return r?r.catch(console.error):Vi(t).catch(console.error),e.fid}async function Im(n,t=!1){let e=n;return await Tm(e),(await Vi(e,t)).token}async function Tm(n){let{registrationPromise:t}=await Ni(n);t&&await t}function Em(n){if(!n||!n.options)throw Pi("App Configuration");if(!n.name)throw Pi("App Name");let t=["projectId","apiKey","appId"];for(let e of t)if(!n.options[e])throw Pi(e);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function Pi(n){return Ae.create("missing-app-config-values",{valueName:n})}var nl="installations",vm="installations-internal",bm=n=>{let t=n.getProvider("app").getImmediate(),e=Em(t),r=Lt(t,"heartbeat");return{app:t,appConfig:e,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},Am=n=>{let t=n.getProvider("app").getImmediate(),e=Lt(t,nl).getImmediate();return{getId:()=>wm(e),getToken:s=>Im(e,s)}};function Sm(){Rt(new pt(nl,bm,"PUBLIC")),Rt(new pt(vm,Am,"PRIVATE"))}Sm();mt(Uu,xi);mt(Uu,xi,"esm2020");var zr="analytics",Rm="firebase_id",Cm="origin",Pm=60*1e3,Dm="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",qi="https://www.googletagmanager.com/gtag/js";var vt=new oe("@firebase/analytics");var xm={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Ct=new jt("analytics","Analytics",xm);function km(n){if(!n.startsWith(qi)){let t=Ct.create("invalid-gtag-resource",{gtagURL:n});return vt.warn(t.message),""}return n}function ul(n){return Promise.all(n.map(t=>t.catch(e=>e)))}function Nm(n,t){let e;return window.trustedTypes&&(e=window.trustedTypes.createPolicy(n,t)),e}function Vm(n,t){let e=Nm("firebase-js-sdk-policy",{createScriptURL:km}),r=document.createElement("script"),s=`${qi}?l=${n}&id=${t}`;r.src=e?e?.createScriptURL(s):s,r.async=!0,document.head.appendChild(r)}function Om(n){let t=[];return Array.isArray(window[n])?t=window[n]:window[n]=t,t}async function Mm(n,t,e,r,s,o){let a=r[s];try{if(a)await t[a];else{let h=(await ul(e)).find(f=>f.measurementId===s);h&&await t[h.appId]}}catch(l){vt.error(l)}n("config",s,o)}async function Fm(n,t,e,r,s){try{let o=[];if(s&&s.send_to){let a=s.send_to;Array.isArray(a)||(a=[a]);let l=await ul(e);for(let h of a){let f=l.find(I=>I.measurementId===h),p=f&&t[f.appId];if(p)o.push(p);else{o=[];break}}}o.length===0&&(o=Object.values(t)),await Promise.all(o),n("event",r,s||{})}catch(o){vt.error(o)}}function Lm(n,t,e,r){async function s(o,...a){try{if(o==="event"){let[l,h]=a;await Fm(n,t,e,l,h)}else if(o==="config"){let[l,h]=a;await Mm(n,t,e,r,l,h)}else if(o==="consent"){let[l,h]=a;n("consent",l,h)}else if(o==="get"){let[l,h,f]=a;n("get",l,h,f)}else if(o==="set"){let[l]=a;n("set",l)}else n(o,...a)}catch(l){vt.error(l)}}return s}function Um(n,t,e,r,s){let o=function(...a){window[r].push(arguments)};return window[s]&&typeof window[s]=="function"&&(o=window[s]),window[s]=Lm(o,n,t,e),{gtagCore:o,wrappedGtag:window[s]}}function Bm(n){let t=window.document.getElementsByTagName("script");for(let e of Object.values(t))if(e.src&&e.src.includes(qi)&&e.src.includes(n))return e;return null}var qm=30,jm=1e3,Mi=class{constructor(t={},e=jm){this.throttleMetadata=t,this.intervalMillis=e}getThrottleMetadata(t){return this.throttleMetadata[t]}setThrottleMetadata(t,e){this.throttleMetadata[t]=e}deleteThrottleMetadata(t){delete this.throttleMetadata[t]}},ll=new Mi;function zm(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}async function $m(n){let{appId:t,apiKey:e}=n,r={method:"GET",headers:zm(e)},s=Dm.replace("{app-id}",t),o=await fetch(s,r);if(o.status!==200&&o.status!==304){let a="";try{let l=await o.json();l.error?.message&&(a=l.error.message)}catch{}throw Ct.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()}async function Gm(n,t=ll,e){let{appId:r,apiKey:s,measurementId:o}=n.options;if(!r)throw Ct.create("no-app-id");if(!s){if(o)return{measurementId:o,appId:r};throw Ct.create("no-api-key")}let a=t.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},l=new Fi;return setTimeout(async()=>{l.abort()},e!==void 0?e:Pm),hl({appId:r,apiKey:s,measurementId:o},a,l,t)}async function hl(n,{throttleEndTimeMillis:t,backoffCount:e},r,s=ll){let{appId:o,measurementId:a}=n;try{await Km(r,t)}catch(l){if(a)return vt.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${l?.message}]`),{appId:o,measurementId:a};throw l}try{let l=await $m(n);return s.deleteThrottleMetadata(o),l}catch(l){let h=l;if(!Hm(h)){if(s.deleteThrottleMetadata(o),a)return vt.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${h?.message}]`),{appId:o,measurementId:a};throw l}let f=Number(h?.customData?.httpStatus)===503?di(e,s.intervalMillis,qm):di(e,s.intervalMillis),p={throttleEndTimeMillis:Date.now()+f,backoffCount:e+1};return s.setThrottleMetadata(o,p),vt.debug(`Calling attemptFetch again in ${f} millis`),hl(n,p,r,s)}}function Km(n,t){return new Promise((e,r)=>{let s=Math.max(t-Date.now(),0),o=setTimeout(e,s);n.addEventListener(()=>{clearTimeout(o),r(Ct.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}function Hm(n){if(!(n instanceof Et)||!n.customData)return!1;let t=Number(n.customData.httpStatus);return t===429||t===500||t===503||t===504}var Fi=class{constructor(){this.listeners=[]}addEventListener(t){this.listeners.push(t)}abort(){this.listeners.forEach(t=>t())}};var Li;async function Wm(n,t,e,r,s){if(s&&s.global){n("event",e,r);return}else{let o=await t,a={...r,send_to:o};n("event",e,a)}}async function Qm(n,t,e,r){if(r&&r.global){let s={};for(let o of Object.keys(e))s[`user_properties.${o}`]=e[o];return n("set",s),Promise.resolve()}else{let s=await t;n("config",s,{update:!0,user_properties:e})}}var Ui;function Jm(n){Ui=n}function Xm(n){Li=n}async function Ym(){if(Mn())try{await Nr()}catch(n){return vt.warn(Ct.create("indexeddb-unavailable",{errorInfo:n?.toString()}).message),!1}else return vt.warn(Ct.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function Zm(n,t,e,r,s,o,a){let l=Gm(n);l.then(b=>{e[b.measurementId]=b.appId,n.options.measurementId&&b.measurementId!==n.options.measurementId&&vt.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${b.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(b=>vt.error(b)),t.push(l);let h=Ym().then(b=>{if(b)return r.getId()}),[f,p]=await Promise.all([l,h]);Bm(o)||Vm(o,f.measurementId),Ui&&(s("consent","default",Ui),Jm(void 0)),s("js",new Date);let I=a?.config??{};return I[Cm]="firebase",I.update=!0,p!=null&&(I[Rm]=p),s("config",f.measurementId,I),Li&&(s("set",Li),Xm(void 0)),f.measurementId}var Bi=class{constructor(t){this.app=t}_delete(){return delete Fe[this.app.options.appId],Promise.resolve()}},Fe={},rl=[],sl={},Oi="dataLayer",tg="gtag",il,ji,ol=!1;function eg(){let n=[];if(Tu()&&n.push("This is a browser extension environment."),vu()||n.push("Cookies are not available."),n.length>0){let t=n.map((r,s)=>`(${s+1}) ${r}`).join(" "),e=Ct.create("invalid-analytics-context",{errorInfo:t});vt.warn(e.message)}}function ng(n,t,e){eg();let r=n.options.appId;if(!r)throw Ct.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)vt.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Ct.create("no-api-key");if(Fe[r]!=null)throw Ct.create("already-exists",{id:r});if(!ol){Om(Oi);let{wrappedGtag:o,gtagCore:a}=Um(Fe,rl,sl,Oi,tg);ji=o,il=a,ol=!0}return Fe[r]=Zm(n,rl,sl,t,il,Oi,e),new Bi(n)}function dl(n=ve()){n=St(n);let t=Lt(n,zr);return t.isInitialized()?t.getImmediate():rg(n)}function rg(n,t={}){let e=Lt(n,zr);if(e.isInitialized()){let s=e.getImmediate();if(ie(t,e.getOptions()))return s;throw Ct.create("already-initialized")}return e.initialize({options:t})}function sg(n,t,e){n=St(n),Qm(ji,Fe[n.app.options.appId],t,e).catch(r=>vt.error(r))}function ig(n,t,e,r){n=St(n),Wm(ji,Fe[n.app.options.appId],t,e,r).catch(s=>vt.error(s))}var al="@firebase/analytics",cl="0.10.19";function og(){Rt(new pt(zr,(t,{options:e})=>{let r=t.getProvider("app").getImmediate(),s=t.getProvider("installations-internal").getImmediate();return ng(r,s,e)},"PUBLIC")),Rt(new pt("analytics-internal",n,"PRIVATE")),mt(al,cl),mt(al,cl,"esm2020");function n(t){try{let e=t.getProvider(zr).getImmediate();return{logEvent:(r,s,o)=>ig(e,r,s,o),setUserProperties:(r,s)=>sg(e,r,s)}}catch(e){throw Ct.create("interop-component-reg-failed",{reason:e})}}}og();var fl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},pl={};var $t,zi;(function(){var n;function t(w,m){function _(){}_.prototype=m.prototype,w.F=m.prototype,w.prototype=new _,w.prototype.constructor=w,w.D=function(T,y,v){for(var g=Array(arguments.length-2),bt=2;bt<arguments.length;bt++)g[bt-2]=arguments[bt];return m.prototype[y].apply(T,g)}}function e(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}t(r,e),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(w,m,_){_||(_=0);let T=Array(16);if(typeof m=="string")for(var y=0;y<16;++y)T[y]=m.charCodeAt(_++)|m.charCodeAt(_++)<<8|m.charCodeAt(_++)<<16|m.charCodeAt(_++)<<24;else for(y=0;y<16;++y)T[y]=m[_++]|m[_++]<<8|m[_++]<<16|m[_++]<<24;m=w.g[0],_=w.g[1],y=w.g[2];let v=w.g[3],g;g=m+(v^_&(y^v))+T[0]+3614090360&4294967295,m=_+(g<<7&4294967295|g>>>25),g=v+(y^m&(_^y))+T[1]+3905402710&4294967295,v=m+(g<<12&4294967295|g>>>20),g=y+(_^v&(m^_))+T[2]+606105819&4294967295,y=v+(g<<17&4294967295|g>>>15),g=_+(m^y&(v^m))+T[3]+3250441966&4294967295,_=y+(g<<22&4294967295|g>>>10),g=m+(v^_&(y^v))+T[4]+4118548399&4294967295,m=_+(g<<7&4294967295|g>>>25),g=v+(y^m&(_^y))+T[5]+1200080426&4294967295,v=m+(g<<12&4294967295|g>>>20),g=y+(_^v&(m^_))+T[6]+2821735955&4294967295,y=v+(g<<17&4294967295|g>>>15),g=_+(m^y&(v^m))+T[7]+4249261313&4294967295,_=y+(g<<22&4294967295|g>>>10),g=m+(v^_&(y^v))+T[8]+1770035416&4294967295,m=_+(g<<7&4294967295|g>>>25),g=v+(y^m&(_^y))+T[9]+2336552879&4294967295,v=m+(g<<12&4294967295|g>>>20),g=y+(_^v&(m^_))+T[10]+4294925233&4294967295,y=v+(g<<17&4294967295|g>>>15),g=_+(m^y&(v^m))+T[11]+2304563134&4294967295,_=y+(g<<22&4294967295|g>>>10),g=m+(v^_&(y^v))+T[12]+1804603682&4294967295,m=_+(g<<7&4294967295|g>>>25),g=v+(y^m&(_^y))+T[13]+4254626195&4294967295,v=m+(g<<12&4294967295|g>>>20),g=y+(_^v&(m^_))+T[14]+2792965006&4294967295,y=v+(g<<17&4294967295|g>>>15),g=_+(m^y&(v^m))+T[15]+1236535329&4294967295,_=y+(g<<22&4294967295|g>>>10),g=m+(y^v&(_^y))+T[1]+4129170786&4294967295,m=_+(g<<5&4294967295|g>>>27),g=v+(_^y&(m^_))+T[6]+3225465664&4294967295,v=m+(g<<9&4294967295|g>>>23),g=y+(m^_&(v^m))+T[11]+643717713&4294967295,y=v+(g<<14&4294967295|g>>>18),g=_+(v^m&(y^v))+T[0]+3921069994&4294967295,_=y+(g<<20&4294967295|g>>>12),g=m+(y^v&(_^y))+T[5]+3593408605&4294967295,m=_+(g<<5&4294967295|g>>>27),g=v+(_^y&(m^_))+T[10]+38016083&4294967295,v=m+(g<<9&4294967295|g>>>23),g=y+(m^_&(v^m))+T[15]+3634488961&4294967295,y=v+(g<<14&4294967295|g>>>18),g=_+(v^m&(y^v))+T[4]+3889429448&4294967295,_=y+(g<<20&4294967295|g>>>12),g=m+(y^v&(_^y))+T[9]+568446438&4294967295,m=_+(g<<5&4294967295|g>>>27),g=v+(_^y&(m^_))+T[14]+3275163606&4294967295,v=m+(g<<9&4294967295|g>>>23),g=y+(m^_&(v^m))+T[3]+4107603335&4294967295,y=v+(g<<14&4294967295|g>>>18),g=_+(v^m&(y^v))+T[8]+1163531501&4294967295,_=y+(g<<20&4294967295|g>>>12),g=m+(y^v&(_^y))+T[13]+2850285829&4294967295,m=_+(g<<5&4294967295|g>>>27),g=v+(_^y&(m^_))+T[2]+4243563512&4294967295,v=m+(g<<9&4294967295|g>>>23),g=y+(m^_&(v^m))+T[7]+1735328473&4294967295,y=v+(g<<14&4294967295|g>>>18),g=_+(v^m&(y^v))+T[12]+2368359562&4294967295,_=y+(g<<20&4294967295|g>>>12),g=m+(_^y^v)+T[5]+4294588738&4294967295,m=_+(g<<4&4294967295|g>>>28),g=v+(m^_^y)+T[8]+2272392833&4294967295,v=m+(g<<11&4294967295|g>>>21),g=y+(v^m^_)+T[11]+1839030562&4294967295,y=v+(g<<16&4294967295|g>>>16),g=_+(y^v^m)+T[14]+4259657740&4294967295,_=y+(g<<23&4294967295|g>>>9),g=m+(_^y^v)+T[1]+2763975236&4294967295,m=_+(g<<4&4294967295|g>>>28),g=v+(m^_^y)+T[4]+1272893353&4294967295,v=m+(g<<11&4294967295|g>>>21),g=y+(v^m^_)+T[7]+4139469664&4294967295,y=v+(g<<16&4294967295|g>>>16),g=_+(y^v^m)+T[10]+3200236656&4294967295,_=y+(g<<23&4294967295|g>>>9),g=m+(_^y^v)+T[13]+681279174&4294967295,m=_+(g<<4&4294967295|g>>>28),g=v+(m^_^y)+T[0]+3936430074&4294967295,v=m+(g<<11&4294967295|g>>>21),g=y+(v^m^_)+T[3]+3572445317&4294967295,y=v+(g<<16&4294967295|g>>>16),g=_+(y^v^m)+T[6]+76029189&4294967295,_=y+(g<<23&4294967295|g>>>9),g=m+(_^y^v)+T[9]+3654602809&4294967295,m=_+(g<<4&4294967295|g>>>28),g=v+(m^_^y)+T[12]+3873151461&4294967295,v=m+(g<<11&4294967295|g>>>21),g=y+(v^m^_)+T[15]+530742520&4294967295,y=v+(g<<16&4294967295|g>>>16),g=_+(y^v^m)+T[2]+3299628645&4294967295,_=y+(g<<23&4294967295|g>>>9),g=m+(y^(_|~v))+T[0]+4096336452&4294967295,m=_+(g<<6&4294967295|g>>>26),g=v+(_^(m|~y))+T[7]+1126891415&4294967295,v=m+(g<<10&4294967295|g>>>22),g=y+(m^(v|~_))+T[14]+2878612391&4294967295,y=v+(g<<15&4294967295|g>>>17),g=_+(v^(y|~m))+T[5]+4237533241&4294967295,_=y+(g<<21&4294967295|g>>>11),g=m+(y^(_|~v))+T[12]+1700485571&4294967295,m=_+(g<<6&4294967295|g>>>26),g=v+(_^(m|~y))+T[3]+2399980690&4294967295,v=m+(g<<10&4294967295|g>>>22),g=y+(m^(v|~_))+T[10]+4293915773&4294967295,y=v+(g<<15&4294967295|g>>>17),g=_+(v^(y|~m))+T[1]+2240044497&4294967295,_=y+(g<<21&4294967295|g>>>11),g=m+(y^(_|~v))+T[8]+1873313359&4294967295,m=_+(g<<6&4294967295|g>>>26),g=v+(_^(m|~y))+T[15]+4264355552&4294967295,v=m+(g<<10&4294967295|g>>>22),g=y+(m^(v|~_))+T[6]+2734768916&4294967295,y=v+(g<<15&4294967295|g>>>17),g=_+(v^(y|~m))+T[13]+1309151649&4294967295,_=y+(g<<21&4294967295|g>>>11),g=m+(y^(_|~v))+T[4]+4149444226&4294967295,m=_+(g<<6&4294967295|g>>>26),g=v+(_^(m|~y))+T[11]+3174756917&4294967295,v=m+(g<<10&4294967295|g>>>22),g=y+(m^(v|~_))+T[2]+718787259&4294967295,y=v+(g<<15&4294967295|g>>>17),g=_+(v^(y|~m))+T[9]+3951481745&4294967295,w.g[0]=w.g[0]+m&4294967295,w.g[1]=w.g[1]+(y+(g<<21&4294967295|g>>>11))&4294967295,w.g[2]=w.g[2]+y&4294967295,w.g[3]=w.g[3]+v&4294967295}r.prototype.v=function(w,m){m===void 0&&(m=w.length);let _=m-this.blockSize,T=this.C,y=this.h,v=0;for(;v<m;){if(y==0)for(;v<=_;)s(this,w,v),v+=this.blockSize;if(typeof w=="string"){for(;v<m;)if(T[y++]=w.charCodeAt(v++),y==this.blockSize){s(this,T),y=0;break}}else for(;v<m;)if(T[y++]=w[v++],y==this.blockSize){s(this,T),y=0;break}}this.h=y,this.o+=m},r.prototype.A=function(){var w=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);w[0]=128;for(var m=1;m<w.length-8;++m)w[m]=0;m=this.o*8;for(var _=w.length-8;_<w.length;++_)w[_]=m&255,m/=256;for(this.v(w),w=Array(16),m=0,_=0;_<4;++_)for(let T=0;T<32;T+=8)w[m++]=this.g[_]>>>T&255;return w};function o(w,m){var _=l;return Object.prototype.hasOwnProperty.call(_,w)?_[w]:_[w]=m(w)}function a(w,m){this.h=m;let _=[],T=!0;for(let y=w.length-1;y>=0;y--){let v=w[y]|0;T&&v==m||(_[y]=v,T=!1)}this.g=_}var l={};function h(w){return-128<=w&&w<128?o(w,function(m){return new a([m|0],m<0?-1:0)}):new a([w|0],w<0?-1:0)}function f(w){if(isNaN(w)||!isFinite(w))return I;if(w<0)return D(f(-w));let m=[],_=1;for(let T=0;w>=_;T++)m[T]=w/_|0,_*=4294967296;return new a(m,0)}function p(w,m){if(w.length==0)throw Error("number format error: empty string");if(m=m||10,m<2||36<m)throw Error("radix out of range: "+m);if(w.charAt(0)=="-")return D(p(w.substring(1),m));if(w.indexOf("-")>=0)throw Error('number format error: interior "-" character');let _=f(Math.pow(m,8)),T=I;for(let v=0;v<w.length;v+=8){var y=Math.min(8,w.length-v);let g=parseInt(w.substring(v,v+y),m);y<8?(y=f(Math.pow(m,y)),T=T.j(y).add(f(g))):(T=T.j(_),T=T.add(f(g)))}return T}var I=h(0),b=h(1),C=h(16777216);n=a.prototype,n.m=function(){if(V(this))return-D(this).m();let w=0,m=1;for(let _=0;_<this.g.length;_++){let T=this.i(_);w+=(T>=0?T:4294967296+T)*m,m*=4294967296}return w},n.toString=function(w){if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(N(this))return"0";if(V(this))return"-"+D(this).toString(w);let m=f(Math.pow(w,6));var _=this;let T="";for(;;){let y=H(_,m).g;_=G(_,y.j(m));let v=((_.g.length>0?_.g[0]:_.h)>>>0).toString(w);if(_=y,N(_))return v+T;for(;v.length<6;)v="0"+v;T=v+T}},n.i=function(w){return w<0?0:w<this.g.length?this.g[w]:this.h};function N(w){if(w.h!=0)return!1;for(let m=0;m<w.g.length;m++)if(w.g[m]!=0)return!1;return!0}function V(w){return w.h==-1}n.l=function(w){return w=G(this,w),V(w)?-1:N(w)?0:1};function D(w){let m=w.g.length,_=[];for(let T=0;T<m;T++)_[T]=~w.g[T];return new a(_,~w.h).add(b)}n.abs=function(){return V(this)?D(this):this},n.add=function(w){let m=Math.max(this.g.length,w.g.length),_=[],T=0;for(let y=0;y<=m;y++){let v=T+(this.i(y)&65535)+(w.i(y)&65535),g=(v>>>16)+(this.i(y)>>>16)+(w.i(y)>>>16);T=g>>>16,v&=65535,g&=65535,_[y]=g<<16|v}return new a(_,_[_.length-1]&-2147483648?-1:0)};function G(w,m){return w.add(D(m))}n.j=function(w){if(N(this)||N(w))return I;if(V(this))return V(w)?D(this).j(D(w)):D(D(this).j(w));if(V(w))return D(this.j(D(w)));if(this.l(C)<0&&w.l(C)<0)return f(this.m()*w.m());let m=this.g.length+w.g.length,_=[];for(var T=0;T<2*m;T++)_[T]=0;for(T=0;T<this.g.length;T++)for(let y=0;y<w.g.length;y++){let v=this.i(T)>>>16,g=this.i(T)&65535,bt=w.i(y)>>>16,Yt=w.i(y)&65535;_[2*T+2*y]+=g*Yt,K(_,2*T+2*y),_[2*T+2*y+1]+=v*Yt,K(_,2*T+2*y+1),_[2*T+2*y+1]+=g*bt,K(_,2*T+2*y+1),_[2*T+2*y+2]+=v*bt,K(_,2*T+2*y+2)}for(w=0;w<m;w++)_[w]=_[2*w+1]<<16|_[2*w];for(w=m;w<2*m;w++)_[w]=0;return new a(_,0)};function K(w,m){for(;(w[m]&65535)!=w[m];)w[m+1]+=w[m]>>>16,w[m]&=65535,m++}function z(w,m){this.g=w,this.h=m}function H(w,m){if(N(m))throw Error("division by zero");if(N(w))return new z(I,I);if(V(w))return m=H(D(w),m),new z(D(m.g),D(m.h));if(V(m))return m=H(w,D(m)),new z(D(m.g),m.h);if(w.g.length>30){if(V(w)||V(m))throw Error("slowDivide_ only works with positive integers.");for(var _=b,T=m;T.l(w)<=0;)_=ot(_),T=ot(T);var y=Y(_,1),v=Y(T,1);for(T=Y(T,2),_=Y(_,2);!N(T);){var g=v.add(T);g.l(w)<=0&&(y=y.add(_),v=g),T=Y(T,1),_=Y(_,1)}return m=G(w,y.j(m)),new z(y,m)}for(y=I;w.l(m)>=0;){for(_=Math.max(1,Math.floor(w.m()/m.m())),T=Math.ceil(Math.log(_)/Math.LN2),T=T<=48?1:Math.pow(2,T-48),v=f(_),g=v.j(m);V(g)||g.l(w)>0;)_-=T,v=f(_),g=v.j(m);N(v)&&(v=b),y=y.add(v),w=G(w,g)}return new z(y,w)}n.B=function(w){return H(this,w).h},n.and=function(w){let m=Math.max(this.g.length,w.g.length),_=[];for(let T=0;T<m;T++)_[T]=this.i(T)&w.i(T);return new a(_,this.h&w.h)},n.or=function(w){let m=Math.max(this.g.length,w.g.length),_=[];for(let T=0;T<m;T++)_[T]=this.i(T)|w.i(T);return new a(_,this.h|w.h)},n.xor=function(w){let m=Math.max(this.g.length,w.g.length),_=[];for(let T=0;T<m;T++)_[T]=this.i(T)^w.i(T);return new a(_,this.h^w.h)};function ot(w){let m=w.g.length+1,_=[];for(let T=0;T<m;T++)_[T]=w.i(T)<<1|w.i(T-1)>>>31;return new a(_,w.h)}function Y(w,m){let _=m>>5;m%=32;let T=w.g.length-_,y=[];for(let v=0;v<T;v++)y[v]=m>0?w.i(v+_)>>>m|w.i(v+_+1)<<32-m:w.i(v+_);return new a(y,w.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,zi=pl.Md5=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=f,a.fromString=p,$t=pl.Integer=a}).apply(typeof fl<"u"?fl:typeof self<"u"?self:typeof window<"u"?window:{});var $r=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Gt={};var $i,ag,Le,Gi,Ln,Gr,Ki,Hi,Wi;(function(){var n,t=Object.defineProperty;function e(i){i=[typeof globalThis=="object"&&globalThis,i,typeof window=="object"&&window,typeof self=="object"&&self,typeof $r=="object"&&$r];for(var c=0;c<i.length;++c){var u=i[c];if(u&&u.Math==Math)return u}throw Error("Cannot find global object")}var r=e(this);function s(i,c){if(c)t:{var u=r;i=i.split(".");for(var d=0;d<i.length-1;d++){var E=i[d];if(!(E in u))break t;u=u[E]}i=i[i.length-1],d=u[i],c=c(d),c!=d&&c!=null&&t(u,i,{configurable:!0,writable:!0,value:c})}}s("Symbol.dispose",function(i){return i||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(i){return i||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(i){return i||function(c){var u=[],d;for(d in c)Object.prototype.hasOwnProperty.call(c,d)&&u.push([d,c[d]]);return u}});var o=o||{},a=this||self;function l(i){var c=typeof i;return c=="object"&&i!=null||c=="function"}function h(i,c,u){return i.call.apply(i.bind,arguments)}function f(i,c,u){return f=h,f.apply(null,arguments)}function p(i,c){var u=Array.prototype.slice.call(arguments,1);return function(){var d=u.slice();return d.push.apply(d,arguments),i.apply(this,d)}}function I(i,c){function u(){}u.prototype=c.prototype,i.Z=c.prototype,i.prototype=new u,i.prototype.constructor=i,i.Ob=function(d,E,A){for(var P=Array(arguments.length-2),L=2;L<arguments.length;L++)P[L-2]=arguments[L];return c.prototype[E].apply(d,P)}}var b=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?i=>i&&AsyncContext.Snapshot.wrap(i):i=>i;function C(i){let c=i.length;if(c>0){let u=Array(c);for(let d=0;d<c;d++)u[d]=i[d];return u}return[]}function N(i,c){for(let d=1;d<arguments.length;d++){let E=arguments[d];var u=typeof E;if(u=u!="object"?u:E?Array.isArray(E)?"array":u:"null",u=="array"||u=="object"&&typeof E.length=="number"){u=i.length||0;let A=E.length||0;i.length=u+A;for(let P=0;P<A;P++)i[u+P]=E[P]}else i.push(E)}}class V{constructor(c,u){this.i=c,this.j=u,this.h=0,this.g=null}get(){let c;return this.h>0?(this.h--,c=this.g,this.g=c.next,c.next=null):c=this.i(),c}}function D(i){a.setTimeout(()=>{throw i},0)}function G(){var i=w;let c=null;return i.g&&(c=i.g,i.g=i.g.next,i.g||(i.h=null),c.next=null),c}class K{constructor(){this.h=this.g=null}add(c,u){let d=z.get();d.set(c,u),this.h?this.h.next=d:this.g=d,this.h=d}}var z=new V(()=>new H,i=>i.reset());class H{constructor(){this.next=this.g=this.h=null}set(c,u){this.h=c,this.g=u,this.next=null}reset(){this.next=this.g=this.h=null}}let ot,Y=!1,w=new K,m=()=>{let i=Promise.resolve(void 0);ot=()=>{i.then(_)}};function _(){for(var i;i=G();){try{i.h.call(i.g)}catch(u){D(u)}var c=z;c.j(i),c.h<100&&(c.h++,i.next=c.g,c.g=i)}Y=!1}function T(){this.u=this.u,this.C=this.C}T.prototype.u=!1,T.prototype.dispose=function(){this.u||(this.u=!0,this.N())},T.prototype[Symbol.dispose]=function(){this.dispose()},T.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function y(i,c){this.type=i,this.g=this.target=c,this.defaultPrevented=!1}y.prototype.h=function(){this.defaultPrevented=!0};var v=(function(){if(!a.addEventListener||!Object.defineProperty)return!1;var i=!1,c=Object.defineProperty({},"passive",{get:function(){i=!0}});try{let u=()=>{};a.addEventListener("test",u,c),a.removeEventListener("test",u,c)}catch{}return i})();function g(i){return/^[\s\xa0]*$/.test(i)}function bt(i,c){y.call(this,i?i.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,i&&this.init(i,c)}I(bt,y),bt.prototype.init=function(i,c){let u=this.type=i.type,d=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:null;this.target=i.target||i.srcElement,this.g=c,c=i.relatedTarget,c||(u=="mouseover"?c=i.fromElement:u=="mouseout"&&(c=i.toElement)),this.relatedTarget=c,d?(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0):(this.clientX=i.clientX!==void 0?i.clientX:i.pageX,this.clientY=i.clientY!==void 0?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0),this.button=i.button,this.key=i.key||"",this.ctrlKey=i.ctrlKey,this.altKey=i.altKey,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.pointerId=i.pointerId||0,this.pointerType=i.pointerType,this.state=i.state,this.i=i,i.defaultPrevented&&bt.Z.h.call(this)},bt.prototype.h=function(){bt.Z.h.call(this);let i=this.i;i.preventDefault?i.preventDefault():i.returnValue=!1};var Yt="closure_listenable_"+(Math.random()*1e6|0),Gd=0;function Kd(i,c,u,d,E){this.listener=i,this.proxy=null,this.src=c,this.type=u,this.capture=!!d,this.ha=E,this.key=++Gd,this.da=this.fa=!1}function dr(i){i.da=!0,i.listener=null,i.proxy=null,i.src=null,i.ha=null}function fr(i,c,u){for(let d in i)c.call(u,i[d],d,i)}function Hd(i,c){for(let u in i)c.call(void 0,i[u],u,i)}function hc(i){let c={};for(let u in i)c[u]=i[u];return c}let dc="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function fc(i,c){let u,d;for(let E=1;E<arguments.length;E++){d=arguments[E];for(u in d)i[u]=d[u];for(let A=0;A<dc.length;A++)u=dc[A],Object.prototype.hasOwnProperty.call(d,u)&&(i[u]=d[u])}}function pr(i){this.src=i,this.g={},this.h=0}pr.prototype.add=function(i,c,u,d,E){let A=i.toString();i=this.g[A],i||(i=this.g[A]=[],this.h++);let P=Bs(i,c,d,E);return P>-1?(c=i[P],u||(c.fa=!1)):(c=new Kd(c,this.src,A,!!d,E),c.fa=u,i.push(c)),c};function Us(i,c){let u=c.type;if(u in i.g){var d=i.g[u],E=Array.prototype.indexOf.call(d,c,void 0),A;(A=E>=0)&&Array.prototype.splice.call(d,E,1),A&&(dr(c),i.g[u].length==0&&(delete i.g[u],i.h--))}}function Bs(i,c,u,d){for(let E=0;E<i.length;++E){let A=i[E];if(!A.da&&A.listener==c&&A.capture==!!u&&A.ha==d)return E}return-1}var qs="closure_lm_"+(Math.random()*1e6|0),js={};function pc(i,c,u,d,E){if(d&&d.once)return gc(i,c,u,d,E);if(Array.isArray(c)){for(let A=0;A<c.length;A++)pc(i,c[A],u,d,E);return null}return u=Ks(u),i&&i[Yt]?i.J(c,u,l(d)?!!d.capture:!!d,E):mc(i,c,u,!1,d,E)}function mc(i,c,u,d,E,A){if(!c)throw Error("Invalid event type");let P=l(E)?!!E.capture:!!E,L=$s(i);if(L||(i[qs]=L=new pr(i)),u=L.add(c,u,d,P,A),u.proxy)return u;if(d=Wd(),u.proxy=d,d.src=i,d.listener=u,i.addEventListener)v||(E=P),E===void 0&&(E=!1),i.addEventListener(c.toString(),d,E);else if(i.attachEvent)i.attachEvent(yc(c.toString()),d);else if(i.addListener&&i.removeListener)i.addListener(d);else throw Error("addEventListener and attachEvent are unavailable.");return u}function Wd(){function i(u){return c.call(i.src,i.listener,u)}let c=Qd;return i}function gc(i,c,u,d,E){if(Array.isArray(c)){for(let A=0;A<c.length;A++)gc(i,c[A],u,d,E);return null}return u=Ks(u),i&&i[Yt]?i.K(c,u,l(d)?!!d.capture:!!d,E):mc(i,c,u,!0,d,E)}function _c(i,c,u,d,E){if(Array.isArray(c))for(var A=0;A<c.length;A++)_c(i,c[A],u,d,E);else d=l(d)?!!d.capture:!!d,u=Ks(u),i&&i[Yt]?(i=i.i,A=String(c).toString(),A in i.g&&(c=i.g[A],u=Bs(c,u,d,E),u>-1&&(dr(c[u]),Array.prototype.splice.call(c,u,1),c.length==0&&(delete i.g[A],i.h--)))):i&&(i=$s(i))&&(c=i.g[c.toString()],i=-1,c&&(i=Bs(c,u,d,E)),(u=i>-1?c[i]:null)&&zs(u))}function zs(i){if(typeof i!="number"&&i&&!i.da){var c=i.src;if(c&&c[Yt])Us(c.i,i);else{var u=i.type,d=i.proxy;c.removeEventListener?c.removeEventListener(u,d,i.capture):c.detachEvent?c.detachEvent(yc(u),d):c.addListener&&c.removeListener&&c.removeListener(d),(u=$s(c))?(Us(u,i),u.h==0&&(u.src=null,c[qs]=null)):dr(i)}}}function yc(i){return i in js?js[i]:js[i]="on"+i}function Qd(i,c){if(i.da)i=!0;else{c=new bt(c,this);let u=i.listener,d=i.ha||i.src;i.fa&&zs(i),i=u.call(d,c)}return i}function $s(i){return i=i[qs],i instanceof pr?i:null}var Gs="__closure_events_fn_"+(Math.random()*1e9>>>0);function Ks(i){return typeof i=="function"?i:(i[Gs]||(i[Gs]=function(c){return i.handleEvent(c)}),i[Gs])}function _t(){T.call(this),this.i=new pr(this),this.M=this,this.G=null}I(_t,T),_t.prototype[Yt]=!0,_t.prototype.removeEventListener=function(i,c,u,d){_c(this,i,c,u,d)};function It(i,c){var u,d=i.G;if(d)for(u=[];d;d=d.G)u.push(d);if(i=i.M,d=c.type||c,typeof c=="string")c=new y(c,i);else if(c instanceof y)c.target=c.target||i;else{var E=c;c=new y(d,i),fc(c,E)}E=!0;let A,P;if(u)for(P=u.length-1;P>=0;P--)A=c.g=u[P],E=mr(A,d,!0,c)&&E;if(A=c.g=i,E=mr(A,d,!0,c)&&E,E=mr(A,d,!1,c)&&E,u)for(P=0;P<u.length;P++)A=c.g=u[P],E=mr(A,d,!1,c)&&E}_t.prototype.N=function(){if(_t.Z.N.call(this),this.i){var i=this.i;for(let c in i.g){let u=i.g[c];for(let d=0;d<u.length;d++)dr(u[d]);delete i.g[c],i.h--}}this.G=null},_t.prototype.J=function(i,c,u,d){return this.i.add(String(i),c,!1,u,d)},_t.prototype.K=function(i,c,u,d){return this.i.add(String(i),c,!0,u,d)};function mr(i,c,u,d){if(c=i.i.g[String(c)],!c)return!0;c=c.concat();let E=!0;for(let A=0;A<c.length;++A){let P=c[A];if(P&&!P.da&&P.capture==u){let L=P.listener,at=P.ha||P.src;P.fa&&Us(i.i,P),E=L.call(at,d)!==!1&&E}}return E&&!d.defaultPrevented}function Jd(i,c){if(typeof i!="function")if(i&&typeof i.handleEvent=="function")i=f(i.handleEvent,i);else throw Error("Invalid listener argument");return Number(c)>2147483647?-1:a.setTimeout(i,c||0)}function wc(i){i.g=Jd(()=>{i.g=null,i.i&&(i.i=!1,wc(i))},i.l);let c=i.h;i.h=null,i.m.apply(null,c)}class Xd extends T{constructor(c,u){super(),this.m=c,this.l=u,this.h=null,this.i=!1,this.g=null}j(c){this.h=arguments,this.g?this.i=!0:wc(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function yn(i){T.call(this),this.h=i,this.g={}}I(yn,T);var Ic=[];function Tc(i){fr(i.g,function(c,u){this.g.hasOwnProperty(u)&&zs(c)},i),i.g={}}yn.prototype.N=function(){yn.Z.N.call(this),Tc(this)},yn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Hs=a.JSON.stringify,Yd=a.JSON.parse,Zd=class{stringify(i){return a.JSON.stringify(i,void 0)}parse(i){return a.JSON.parse(i,void 0)}};function Ec(){}function vc(){}var wn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ws(){y.call(this,"d")}I(Ws,y);function Qs(){y.call(this,"c")}I(Qs,y);var ge={},bc=null;function gr(){return bc=bc||new _t}ge.Ia="serverreachability";function Ac(i){y.call(this,ge.Ia,i)}I(Ac,y);function In(i){let c=gr();It(c,new Ac(c))}ge.STAT_EVENT="statevent";function Sc(i,c){y.call(this,ge.STAT_EVENT,i),this.stat=c}I(Sc,y);function Tt(i){let c=gr();It(c,new Sc(c,i))}ge.Ja="timingevent";function Rc(i,c){y.call(this,ge.Ja,i),this.size=c}I(Rc,y);function Tn(i,c){if(typeof i!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){i()},c)}function En(){this.g=!0}En.prototype.ua=function(){this.g=!1};function tf(i,c,u,d,E,A){i.info(function(){if(i.g)if(A){var P="",L=A.split("&");for(let W=0;W<L.length;W++){var at=L[W].split("=");if(at.length>1){let ut=at[0];at=at[1];let Mt=ut.split("_");P=Mt.length>=2&&Mt[1]=="type"?P+(ut+"="+at+"&"):P+(ut+"=redacted&")}}}else P=null;else P=A;return"XMLHTTP REQ ("+d+") [attempt "+E+"]: "+c+`
`+u+`
`+P})}function ef(i,c,u,d,E,A,P){i.info(function(){return"XMLHTTP RESP ("+d+") [ attempt "+E+"]: "+c+`
`+u+`
`+A+" "+P})}function Ve(i,c,u,d){i.info(function(){return"XMLHTTP TEXT ("+c+"): "+rf(i,u)+(d?" "+d:"")})}function nf(i,c){i.info(function(){return"TIMEOUT: "+c})}En.prototype.info=function(){};function rf(i,c){if(!i.g)return c;if(!c)return null;try{let A=JSON.parse(c);if(A){for(i=0;i<A.length;i++)if(Array.isArray(A[i])){var u=A[i];if(!(u.length<2)){var d=u[1];if(Array.isArray(d)&&!(d.length<1)){var E=d[0];if(E!="noop"&&E!="stop"&&E!="close")for(let P=1;P<d.length;P++)d[P]=""}}}}return Hs(A)}catch{return c}}var _r={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Cc={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Pc;function Js(){}I(Js,Ec),Js.prototype.g=function(){return new XMLHttpRequest},Pc=new Js;function vn(i){return encodeURIComponent(String(i))}function sf(i){var c=1;i=i.split(":");let u=[];for(;c>0&&i.length;)u.push(i.shift()),c--;return i.length&&u.push(i.join(":")),u}function Zt(i,c,u,d){this.j=i,this.i=c,this.l=u,this.S=d||1,this.V=new yn(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Dc}function Dc(){this.i=null,this.g="",this.h=!1}var xc={},Xs={};function Ys(i,c,u){i.M=1,i.A=wr(Ot(c)),i.u=u,i.R=!0,kc(i,null)}function kc(i,c){i.F=Date.now(),yr(i),i.B=Ot(i.A);var u=i.B,d=i.S;Array.isArray(d)||(d=[String(d)]),Gc(u.i,"t",d),i.C=0,u=i.j.L,i.h=new Dc,i.g=uu(i.j,u?c:null,!i.u),i.P>0&&(i.O=new Xd(f(i.Y,i,i.g),i.P)),c=i.V,u=i.g,d=i.ba;var E="readystatechange";Array.isArray(E)||(E&&(Ic[0]=E.toString()),E=Ic);for(let A=0;A<E.length;A++){let P=pc(u,E[A],d||c.handleEvent,!1,c.h||c);if(!P)break;c.g[P.key]=P}c=i.J?hc(i.J):{},i.u?(i.v||(i.v="POST"),c["Content-Type"]="application/x-www-form-urlencoded",i.g.ea(i.B,i.v,i.u,c)):(i.v="GET",i.g.ea(i.B,i.v,null,c)),In(),tf(i.i,i.v,i.B,i.l,i.S,i.u)}Zt.prototype.ba=function(i){i=i.target;let c=this.O;c&&ne(i)==3?c.j():this.Y(i)},Zt.prototype.Y=function(i){try{if(i==this.g)t:{let L=ne(this.g),at=this.g.ya(),W=this.g.ca();if(!(L<3)&&(L!=3||this.g&&(this.h.h||this.g.la()||Yc(this.g)))){this.K||L!=4||at==7||(at==8||W<=0?In(3):In(2)),Zs(this);var c=this.g.ca();this.X=c;var u=of(this);if(this.o=c==200,ef(this.i,this.v,this.B,this.l,this.S,L,c),this.o){if(this.U&&!this.L){e:{if(this.g){var d,E=this.g;if((d=E.g?E.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!g(d)){var A=d;break e}}A=null}if(i=A)Ve(this.i,this.l,i,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,ti(this,i);else{this.o=!1,this.m=3,Tt(12),_e(this),bn(this);break t}}if(this.R){i=!0;let ut;for(;!this.K&&this.C<u.length;)if(ut=af(this,u),ut==Xs){L==4&&(this.m=4,Tt(14),i=!1),Ve(this.i,this.l,null,"[Incomplete Response]");break}else if(ut==xc){this.m=4,Tt(15),Ve(this.i,this.l,u,"[Invalid Chunk]"),i=!1;break}else Ve(this.i,this.l,ut,null),ti(this,ut);if(Nc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),L!=4||u.length!=0||this.h.h||(this.m=1,Tt(16),i=!1),this.o=this.o&&i,!i)Ve(this.i,this.l,u,"[Invalid Chunked Response]"),_e(this),bn(this);else if(u.length>0&&!this.W){this.W=!0;var P=this.j;P.g==this&&P.aa&&!P.P&&(P.j.info("Great, no buffering proxy detected. Bytes received: "+u.length),ai(P),P.P=!0,Tt(11))}}else Ve(this.i,this.l,u,null),ti(this,u);L==4&&_e(this),this.o&&!this.K&&(L==4?iu(this.j,this):(this.o=!1,yr(this)))}else Tf(this.g),c==400&&u.indexOf("Unknown SID")>0?(this.m=3,Tt(12)):(this.m=0,Tt(13)),_e(this),bn(this)}}}catch{}finally{}};function of(i){if(!Nc(i))return i.g.la();let c=Yc(i.g);if(c==="")return"";let u="",d=c.length,E=ne(i.g)==4;if(!i.h.i){if(typeof TextDecoder>"u")return _e(i),bn(i),"";i.h.i=new a.TextDecoder}for(let A=0;A<d;A++)i.h.h=!0,u+=i.h.i.decode(c[A],{stream:!(E&&A==d-1)});return c.length=0,i.h.g+=u,i.C=0,i.h.g}function Nc(i){return i.g?i.v=="GET"&&i.M!=2&&i.j.Aa:!1}function af(i,c){var u=i.C,d=c.indexOf(`
`,u);return d==-1?Xs:(u=Number(c.substring(u,d)),isNaN(u)?xc:(d+=1,d+u>c.length?Xs:(c=c.slice(d,d+u),i.C=d+u,c)))}Zt.prototype.cancel=function(){this.K=!0,_e(this)};function yr(i){i.T=Date.now()+i.H,Vc(i,i.H)}function Vc(i,c){if(i.D!=null)throw Error("WatchDog timer not null");i.D=Tn(f(i.aa,i),c)}function Zs(i){i.D&&(a.clearTimeout(i.D),i.D=null)}Zt.prototype.aa=function(){this.D=null;let i=Date.now();i-this.T>=0?(nf(this.i,this.B),this.M!=2&&(In(),Tt(17)),_e(this),this.m=2,bn(this)):Vc(this,this.T-i)};function bn(i){i.j.I==0||i.K||iu(i.j,i)}function _e(i){Zs(i);var c=i.O;c&&typeof c.dispose=="function"&&c.dispose(),i.O=null,Tc(i.V),i.g&&(c=i.g,i.g=null,c.abort(),c.dispose())}function ti(i,c){try{var u=i.j;if(u.I!=0&&(u.g==i||ei(u.h,i))){if(!i.L&&ei(u.h,i)&&u.I==3){try{var d=u.Ba.g.parse(c)}catch{d=null}if(Array.isArray(d)&&d.length==3){var E=d;if(E[0]==0){t:if(!u.v){if(u.g)if(u.g.F+3e3<i.F)Ar(u),vr(u);else break t;oi(u),Tt(18)}}else u.xa=E[1],0<u.xa-u.K&&E[2]<37500&&u.F&&u.A==0&&!u.C&&(u.C=Tn(f(u.Va,u),6e3));Fc(u.h)<=1&&u.ta&&(u.ta=void 0)}else we(u,11)}else if((i.L||u.g==i)&&Ar(u),!g(c))for(E=u.Ba.g.parse(c),c=0;c<E.length;c++){let W=E[c],ut=W[0];if(!(ut<=u.K))if(u.K=ut,W=W[1],u.I==2)if(W[0]=="c"){u.M=W[1],u.ba=W[2];let Mt=W[3];Mt!=null&&(u.ka=Mt,u.j.info("VER="+u.ka));let Ie=W[4];Ie!=null&&(u.za=Ie,u.j.info("SVER="+u.za));let re=W[5];re!=null&&typeof re=="number"&&re>0&&(d=1.5*re,u.O=d,u.j.info("backChannelRequestTimeoutMs_="+d)),d=u;let se=i.g;if(se){let Rr=se.g?se.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Rr){var A=d.h;A.g||Rr.indexOf("spdy")==-1&&Rr.indexOf("quic")==-1&&Rr.indexOf("h2")==-1||(A.j=A.l,A.g=new Set,A.h&&(ni(A,A.h),A.h=null))}if(d.G){let ci=se.g?se.g.getResponseHeader("X-HTTP-Session-Id"):null;ci&&(d.wa=ci,Q(d.J,d.G,ci))}}u.I=3,u.l&&u.l.ra(),u.aa&&(u.T=Date.now()-i.F,u.j.info("Handshake RTT: "+u.T+"ms")),d=u;var P=i;if(d.na=cu(d,d.L?d.ba:null,d.W),P.L){Lc(d.h,P);var L=P,at=d.O;at&&(L.H=at),L.D&&(Zs(L),yr(L)),d.g=P}else ru(d);u.i.length>0&&br(u)}else W[0]!="stop"&&W[0]!="close"||we(u,7);else u.I==3&&(W[0]=="stop"||W[0]=="close"?W[0]=="stop"?we(u,7):ii(u):W[0]!="noop"&&u.l&&u.l.qa(W),u.A=0)}}In(4)}catch{}}var cf=class{constructor(i,c){this.g=i,this.map=c}};function Oc(i){this.l=i||10,a.PerformanceNavigationTiming?(i=a.performance.getEntriesByType("navigation"),i=i.length>0&&(i[0].nextHopProtocol=="hq"||i[0].nextHopProtocol=="h2")):i=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=i?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Mc(i){return i.h?!0:i.g?i.g.size>=i.j:!1}function Fc(i){return i.h?1:i.g?i.g.size:0}function ei(i,c){return i.h?i.h==c:i.g?i.g.has(c):!1}function ni(i,c){i.g?i.g.add(c):i.h=c}function Lc(i,c){i.h&&i.h==c?i.h=null:i.g&&i.g.has(c)&&i.g.delete(c)}Oc.prototype.cancel=function(){if(this.i=Uc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let i of this.g.values())i.cancel();this.g.clear()}};function Uc(i){if(i.h!=null)return i.i.concat(i.h.G);if(i.g!=null&&i.g.size!==0){let c=i.i;for(let u of i.g.values())c=c.concat(u.G);return c}return C(i.i)}var Bc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function uf(i,c){if(i){i=i.split("&");for(let u=0;u<i.length;u++){let d=i[u].indexOf("="),E,A=null;d>=0?(E=i[u].substring(0,d),A=i[u].substring(d+1)):E=i[u],c(E,A?decodeURIComponent(A.replace(/\+/g," ")):"")}}}function te(i){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let c;i instanceof te?(this.l=i.l,An(this,i.j),this.o=i.o,this.g=i.g,Sn(this,i.u),this.h=i.h,ri(this,Kc(i.i)),this.m=i.m):i&&(c=String(i).match(Bc))?(this.l=!1,An(this,c[1]||"",!0),this.o=Rn(c[2]||""),this.g=Rn(c[3]||"",!0),Sn(this,c[4]),this.h=Rn(c[5]||"",!0),ri(this,c[6]||"",!0),this.m=Rn(c[7]||"")):(this.l=!1,this.i=new Pn(null,this.l))}te.prototype.toString=function(){let i=[];var c=this.j;c&&i.push(Cn(c,qc,!0),":");var u=this.g;return(u||c=="file")&&(i.push("//"),(c=this.o)&&i.push(Cn(c,qc,!0),"@"),i.push(vn(u).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u=this.u,u!=null&&i.push(":",String(u))),(u=this.h)&&(this.g&&u.charAt(0)!="/"&&i.push("/"),i.push(Cn(u,u.charAt(0)=="/"?df:hf,!0))),(u=this.i.toString())&&i.push("?",u),(u=this.m)&&i.push("#",Cn(u,pf)),i.join("")},te.prototype.resolve=function(i){let c=Ot(this),u=!!i.j;u?An(c,i.j):u=!!i.o,u?c.o=i.o:u=!!i.g,u?c.g=i.g:u=i.u!=null;var d=i.h;if(u)Sn(c,i.u);else if(u=!!i.h){if(d.charAt(0)!="/")if(this.g&&!this.h)d="/"+d;else{var E=c.h.lastIndexOf("/");E!=-1&&(d=c.h.slice(0,E+1)+d)}if(E=d,E==".."||E==".")d="";else if(E.indexOf("./")!=-1||E.indexOf("/.")!=-1){d=E.lastIndexOf("/",0)==0,E=E.split("/");let A=[];for(let P=0;P<E.length;){let L=E[P++];L=="."?d&&P==E.length&&A.push(""):L==".."?((A.length>1||A.length==1&&A[0]!="")&&A.pop(),d&&P==E.length&&A.push("")):(A.push(L),d=!0)}d=A.join("/")}else d=E}return u?c.h=d:u=i.i.toString()!=="",u?ri(c,Kc(i.i)):u=!!i.m,u&&(c.m=i.m),c};function Ot(i){return new te(i)}function An(i,c,u){i.j=u?Rn(c,!0):c,i.j&&(i.j=i.j.replace(/:$/,""))}function Sn(i,c){if(c){if(c=Number(c),isNaN(c)||c<0)throw Error("Bad port number "+c);i.u=c}else i.u=null}function ri(i,c,u){c instanceof Pn?(i.i=c,mf(i.i,i.l)):(u||(c=Cn(c,ff)),i.i=new Pn(c,i.l))}function Q(i,c,u){i.i.set(c,u)}function wr(i){return Q(i,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),i}function Rn(i,c){return i?c?decodeURI(i.replace(/%25/g,"%2525")):decodeURIComponent(i):""}function Cn(i,c,u){return typeof i=="string"?(i=encodeURI(i).replace(c,lf),u&&(i=i.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i):null}function lf(i){return i=i.charCodeAt(0),"%"+(i>>4&15).toString(16)+(i&15).toString(16)}var qc=/[#\/\?@]/g,hf=/[#\?:]/g,df=/[#\?]/g,ff=/[#\?@]/g,pf=/#/g;function Pn(i,c){this.h=this.g=null,this.i=i||null,this.j=!!c}function ye(i){i.g||(i.g=new Map,i.h=0,i.i&&uf(i.i,function(c,u){i.add(decodeURIComponent(c.replace(/\+/g," ")),u)}))}n=Pn.prototype,n.add=function(i,c){ye(this),this.i=null,i=Oe(this,i);let u=this.g.get(i);return u||this.g.set(i,u=[]),u.push(c),this.h+=1,this};function jc(i,c){ye(i),c=Oe(i,c),i.g.has(c)&&(i.i=null,i.h-=i.g.get(c).length,i.g.delete(c))}function zc(i,c){return ye(i),c=Oe(i,c),i.g.has(c)}n.forEach=function(i,c){ye(this),this.g.forEach(function(u,d){u.forEach(function(E){i.call(c,E,d,this)},this)},this)};function $c(i,c){ye(i);let u=[];if(typeof c=="string")zc(i,c)&&(u=u.concat(i.g.get(Oe(i,c))));else for(i=Array.from(i.g.values()),c=0;c<i.length;c++)u=u.concat(i[c]);return u}n.set=function(i,c){return ye(this),this.i=null,i=Oe(this,i),zc(this,i)&&(this.h-=this.g.get(i).length),this.g.set(i,[c]),this.h+=1,this},n.get=function(i,c){return i?(i=$c(this,i),i.length>0?String(i[0]):c):c};function Gc(i,c,u){jc(i,c),u.length>0&&(i.i=null,i.g.set(Oe(i,c),C(u)),i.h+=u.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let i=[],c=Array.from(this.g.keys());for(let d=0;d<c.length;d++){var u=c[d];let E=vn(u);u=$c(this,u);for(let A=0;A<u.length;A++){let P=E;u[A]!==""&&(P+="="+vn(u[A])),i.push(P)}}return this.i=i.join("&")};function Kc(i){let c=new Pn;return c.i=i.i,i.g&&(c.g=new Map(i.g),c.h=i.h),c}function Oe(i,c){return c=String(c),i.j&&(c=c.toLowerCase()),c}function mf(i,c){c&&!i.j&&(ye(i),i.i=null,i.g.forEach(function(u,d){let E=d.toLowerCase();d!=E&&(jc(this,d),Gc(this,E,u))},i)),i.j=c}function gf(i,c){let u=new En;if(a.Image){let d=new Image;d.onload=p(ee,u,"TestLoadImage: loaded",!0,c,d),d.onerror=p(ee,u,"TestLoadImage: error",!1,c,d),d.onabort=p(ee,u,"TestLoadImage: abort",!1,c,d),d.ontimeout=p(ee,u,"TestLoadImage: timeout",!1,c,d),a.setTimeout(function(){d.ontimeout&&d.ontimeout()},1e4),d.src=i}else c(!1)}function _f(i,c){let u=new En,d=new AbortController,E=setTimeout(()=>{d.abort(),ee(u,"TestPingServer: timeout",!1,c)},1e4);fetch(i,{signal:d.signal}).then(A=>{clearTimeout(E),A.ok?ee(u,"TestPingServer: ok",!0,c):ee(u,"TestPingServer: server error",!1,c)}).catch(()=>{clearTimeout(E),ee(u,"TestPingServer: error",!1,c)})}function ee(i,c,u,d,E){try{E&&(E.onload=null,E.onerror=null,E.onabort=null,E.ontimeout=null),d(u)}catch{}}function yf(){this.g=new Zd}function Ir(i){this.i=i.Sb||null,this.h=i.ab||!1}I(Ir,Ec),Ir.prototype.g=function(){return new Tr(this.i,this.h)};function Tr(i,c){_t.call(this),this.H=i,this.o=c,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}I(Tr,_t),n=Tr.prototype,n.open=function(i,c){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=i,this.D=c,this.readyState=1,xn(this)},n.send=function(i){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;let c={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};i&&(c.body=i),(this.H||a).fetch(new Request(this.D,c)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Dn(this)),this.readyState=0},n.Pa=function(i){if(this.g&&(this.l=i,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=i.headers,this.readyState=2,xn(this)),this.g&&(this.readyState=3,xn(this),this.g)))if(this.responseType==="arraybuffer")i.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in i){if(this.j=i.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Hc(this)}else i.text().then(this.Oa.bind(this),this.ga.bind(this))};function Hc(i){i.j.read().then(i.Ma.bind(i)).catch(i.ga.bind(i))}n.Ma=function(i){if(this.g){if(this.o&&i.value)this.response.push(i.value);else if(!this.o){var c=i.value?i.value:new Uint8Array(0);(c=this.B.decode(c,{stream:!i.done}))&&(this.response=this.responseText+=c)}i.done?Dn(this):xn(this),this.readyState==3&&Hc(this)}},n.Oa=function(i){this.g&&(this.response=this.responseText=i,Dn(this))},n.Na=function(i){this.g&&(this.response=i,Dn(this))},n.ga=function(){this.g&&Dn(this)};function Dn(i){i.readyState=4,i.l=null,i.j=null,i.B=null,xn(i)}n.setRequestHeader=function(i,c){this.A.append(i,c)},n.getResponseHeader=function(i){return this.h&&this.h.get(i.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let i=[],c=this.h.entries();for(var u=c.next();!u.done;)u=u.value,i.push(u[0]+": "+u[1]),u=c.next();return i.join(`\r
`)};function xn(i){i.onreadystatechange&&i.onreadystatechange.call(i)}Object.defineProperty(Tr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(i){this.m=i?"include":"same-origin"}});function Wc(i){let c="";return fr(i,function(u,d){c+=d,c+=":",c+=u,c+=`\r
`}),c}function si(i,c,u){t:{for(d in u){var d=!1;break t}d=!0}d||(u=Wc(u),typeof i=="string"?u!=null&&vn(u):Q(i,c,u))}function Z(i){_t.call(this),this.headers=new Map,this.L=i||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}I(Z,_t);var wf=/^https?$/i,If=["POST","PUT"];n=Z.prototype,n.Fa=function(i){this.H=i},n.ea=function(i,c,u,d){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+i);c=c?c.toUpperCase():"GET",this.D=i,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Pc.g(),this.g.onreadystatechange=b(f(this.Ca,this));try{this.B=!0,this.g.open(c,String(i),!0),this.B=!1}catch(A){Qc(this,A);return}if(i=u||"",u=new Map(this.headers),d)if(Object.getPrototypeOf(d)===Object.prototype)for(var E in d)u.set(E,d[E]);else if(typeof d.keys=="function"&&typeof d.get=="function")for(let A of d.keys())u.set(A,d.get(A));else throw Error("Unknown input type for opt_headers: "+String(d));d=Array.from(u.keys()).find(A=>A.toLowerCase()=="content-type"),E=a.FormData&&i instanceof a.FormData,!(Array.prototype.indexOf.call(If,c,void 0)>=0)||d||E||u.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[A,P]of u)this.g.setRequestHeader(A,P);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(i),this.v=!1}catch(A){Qc(this,A)}};function Qc(i,c){i.h=!1,i.g&&(i.j=!0,i.g.abort(),i.j=!1),i.l=c,i.o=5,Jc(i),Er(i)}function Jc(i){i.A||(i.A=!0,It(i,"complete"),It(i,"error"))}n.abort=function(i){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=i||7,It(this,"complete"),It(this,"abort"),Er(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Er(this,!0)),Z.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Xc(this):this.Xa())},n.Xa=function(){Xc(this)};function Xc(i){if(i.h&&typeof o<"u"){if(i.v&&ne(i)==4)setTimeout(i.Ca.bind(i),0);else if(It(i,"readystatechange"),ne(i)==4){i.h=!1;try{let A=i.ca();t:switch(A){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var c=!0;break t;default:c=!1}var u;if(!(u=c)){var d;if(d=A===0){let P=String(i.D).match(Bc)[1]||null;!P&&a.self&&a.self.location&&(P=a.self.location.protocol.slice(0,-1)),d=!wf.test(P?P.toLowerCase():"")}u=d}if(u)It(i,"complete"),It(i,"success");else{i.o=6;try{var E=ne(i)>2?i.g.statusText:""}catch{E=""}i.l=E+" ["+i.ca()+"]",Jc(i)}}finally{Er(i)}}}}function Er(i,c){if(i.g){i.m&&(clearTimeout(i.m),i.m=null);let u=i.g;i.g=null,c||It(i,"ready");try{u.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function ne(i){return i.g?i.g.readyState:0}n.ca=function(){try{return ne(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(i){if(this.g){var c=this.g.responseText;return i&&c.indexOf(i)==0&&(c=c.substring(i.length)),Yd(c)}};function Yc(i){try{if(!i.g)return null;if("response"in i.g)return i.g.response;switch(i.F){case"":case"text":return i.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in i.g)return i.g.mozResponseArrayBuffer}return null}catch{return null}}function Tf(i){let c={};i=(i.g&&ne(i)>=2&&i.g.getAllResponseHeaders()||"").split(`\r
`);for(let d=0;d<i.length;d++){if(g(i[d]))continue;var u=sf(i[d]);let E=u[0];if(u=u[1],typeof u!="string")continue;u=u.trim();let A=c[E]||[];c[E]=A,A.push(u)}Hd(c,function(d){return d.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function kn(i,c,u){return u&&u.internalChannelParams&&u.internalChannelParams[i]||c}function Zc(i){this.za=0,this.i=[],this.j=new En,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=kn("failFast",!1,i),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=kn("baseRetryDelayMs",5e3,i),this.Za=kn("retryDelaySeedMs",1e4,i),this.Ta=kn("forwardChannelMaxRetries",2,i),this.va=kn("forwardChannelRequestTimeoutMs",2e4,i),this.ma=i&&i.xmlHttpFactory||void 0,this.Ua=i&&i.Rb||void 0,this.Aa=i&&i.useFetchStreams||!1,this.O=void 0,this.L=i&&i.supportsCrossDomainXhr||!1,this.M="",this.h=new Oc(i&&i.concurrentRequestLimit),this.Ba=new yf,this.S=i&&i.fastHandshake||!1,this.R=i&&i.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=i&&i.Pb||!1,i&&i.ua&&this.j.ua(),i&&i.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&i&&i.detectBufferingProxy||!1,this.ia=void 0,i&&i.longPollingTimeout&&i.longPollingTimeout>0&&(this.ia=i.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Zc.prototype,n.ka=8,n.I=1,n.connect=function(i,c,u,d){Tt(0),this.W=i,this.H=c||{},u&&d!==void 0&&(this.H.OSID=u,this.H.OAID=d),this.F=this.X,this.J=cu(this,null,this.W),br(this)};function ii(i){if(tu(i),i.I==3){var c=i.V++,u=Ot(i.J);if(Q(u,"SID",i.M),Q(u,"RID",c),Q(u,"TYPE","terminate"),Nn(i,u),c=new Zt(i,i.j,c),c.M=2,c.A=wr(Ot(u)),u=!1,a.navigator&&a.navigator.sendBeacon)try{u=a.navigator.sendBeacon(c.A.toString(),"")}catch{}!u&&a.Image&&(new Image().src=c.A,u=!0),u||(c.g=uu(c.j,null),c.g.ea(c.A)),c.F=Date.now(),yr(c)}au(i)}function vr(i){i.g&&(ai(i),i.g.cancel(),i.g=null)}function tu(i){vr(i),i.v&&(a.clearTimeout(i.v),i.v=null),Ar(i),i.h.cancel(),i.m&&(typeof i.m=="number"&&a.clearTimeout(i.m),i.m=null)}function br(i){if(!Mc(i.h)&&!i.m){i.m=!0;var c=i.Ea;ot||m(),Y||(ot(),Y=!0),w.add(c,i),i.D=0}}function Ef(i,c){return Fc(i.h)>=i.h.j-(i.m?1:0)?!1:i.m?(i.i=c.G.concat(i.i),!0):i.I==1||i.I==2||i.D>=(i.Sa?0:i.Ta)?!1:(i.m=Tn(f(i.Ea,i,c),ou(i,i.D)),i.D++,!0)}n.Ea=function(i){if(this.m)if(this.m=null,this.I==1){if(!i){this.V=Math.floor(Math.random()*1e5),i=this.V++;let E=new Zt(this,this.j,i),A=this.o;if(this.U&&(A?(A=hc(A),fc(A,this.U)):A=this.U),this.u!==null||this.R||(E.J=A,A=null),this.S)t:{for(var c=0,u=0;u<this.i.length;u++){e:{var d=this.i[u];if("__data__"in d.map&&(d=d.map.__data__,typeof d=="string")){d=d.length;break e}d=void 0}if(d===void 0)break;if(c+=d,c>4096){c=u;break t}if(c===4096||u===this.i.length-1){c=u+1;break t}}c=1e3}else c=1e3;c=nu(this,E,c),u=Ot(this.J),Q(u,"RID",i),Q(u,"CVER",22),this.G&&Q(u,"X-HTTP-Session-Id",this.G),Nn(this,u),A&&(this.R?c="headers="+vn(Wc(A))+"&"+c:this.u&&si(u,this.u,A)),ni(this.h,E),this.Ra&&Q(u,"TYPE","init"),this.S?(Q(u,"$req",c),Q(u,"SID","null"),E.U=!0,Ys(E,u,null)):Ys(E,u,c),this.I=2}}else this.I==3&&(i?eu(this,i):this.i.length==0||Mc(this.h)||eu(this))};function eu(i,c){var u;c?u=c.l:u=i.V++;let d=Ot(i.J);Q(d,"SID",i.M),Q(d,"RID",u),Q(d,"AID",i.K),Nn(i,d),i.u&&i.o&&si(d,i.u,i.o),u=new Zt(i,i.j,u,i.D+1),i.u===null&&(u.J=i.o),c&&(i.i=c.G.concat(i.i)),c=nu(i,u,1e3),u.H=Math.round(i.va*.5)+Math.round(i.va*.5*Math.random()),ni(i.h,u),Ys(u,d,c)}function Nn(i,c){i.H&&fr(i.H,function(u,d){Q(c,d,u)}),i.l&&fr({},function(u,d){Q(c,d,u)})}function nu(i,c,u){u=Math.min(i.i.length,u);let d=i.l?f(i.l.Ka,i.l,i):null;t:{var E=i.i;let L=-1;for(;;){let at=["count="+u];L==-1?u>0?(L=E[0].g,at.push("ofs="+L)):L=0:at.push("ofs="+L);let W=!0;for(let ut=0;ut<u;ut++){var A=E[ut].g;let Mt=E[ut].map;if(A-=L,A<0)L=Math.max(0,E[ut].g-100),W=!1;else try{A="req"+A+"_"||"";try{var P=Mt instanceof Map?Mt:Object.entries(Mt);for(let[Ie,re]of P){let se=re;l(re)&&(se=Hs(re)),at.push(A+Ie+"="+encodeURIComponent(se))}}catch(Ie){throw at.push(A+"type="+encodeURIComponent("_badmap")),Ie}}catch{d&&d(Mt)}}if(W){P=at.join("&");break t}}P=void 0}return i=i.i.splice(0,u),c.G=i,P}function ru(i){if(!i.g&&!i.v){i.Y=1;var c=i.Da;ot||m(),Y||(ot(),Y=!0),w.add(c,i),i.A=0}}function oi(i){return i.g||i.v||i.A>=3?!1:(i.Y++,i.v=Tn(f(i.Da,i),ou(i,i.A)),i.A++,!0)}n.Da=function(){if(this.v=null,su(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var i=4*this.T;this.j.info("BP detection timer enabled: "+i),this.B=Tn(f(this.Wa,this),i)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Tt(10),vr(this),su(this))};function ai(i){i.B!=null&&(a.clearTimeout(i.B),i.B=null)}function su(i){i.g=new Zt(i,i.j,"rpc",i.Y),i.u===null&&(i.g.J=i.o),i.g.P=0;var c=Ot(i.na);Q(c,"RID","rpc"),Q(c,"SID",i.M),Q(c,"AID",i.K),Q(c,"CI",i.F?"0":"1"),!i.F&&i.ia&&Q(c,"TO",i.ia),Q(c,"TYPE","xmlhttp"),Nn(i,c),i.u&&i.o&&si(c,i.u,i.o),i.O&&(i.g.H=i.O);var u=i.g;i=i.ba,u.M=1,u.A=wr(Ot(c)),u.u=null,u.R=!0,kc(u,i)}n.Va=function(){this.C!=null&&(this.C=null,vr(this),oi(this),Tt(19))};function Ar(i){i.C!=null&&(a.clearTimeout(i.C),i.C=null)}function iu(i,c){var u=null;if(i.g==c){Ar(i),ai(i),i.g=null;var d=2}else if(ei(i.h,c))u=c.G,Lc(i.h,c),d=1;else return;if(i.I!=0){if(c.o)if(d==1){u=c.u?c.u.length:0,c=Date.now()-c.F;var E=i.D;d=gr(),It(d,new Rc(d,u)),br(i)}else ru(i);else if(E=c.m,E==3||E==0&&c.X>0||!(d==1&&Ef(i,c)||d==2&&oi(i)))switch(u&&u.length>0&&(c=i.h,c.i=c.i.concat(u)),E){case 1:we(i,5);break;case 4:we(i,10);break;case 3:we(i,6);break;default:we(i,2)}}}function ou(i,c){let u=i.Qa+Math.floor(Math.random()*i.Za);return i.isActive()||(u*=2),u*c}function we(i,c){if(i.j.info("Error code "+c),c==2){var u=f(i.bb,i),d=i.Ua;let E=!d;d=new te(d||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||An(d,"https"),wr(d),E?gf(d.toString(),u):_f(d.toString(),u)}else Tt(2);i.I=0,i.l&&i.l.pa(c),au(i),tu(i)}n.bb=function(i){i?(this.j.info("Successfully pinged google.com"),Tt(2)):(this.j.info("Failed to ping google.com"),Tt(1))};function au(i){if(i.I=0,i.ja=[],i.l){let c=Uc(i.h);(c.length!=0||i.i.length!=0)&&(N(i.ja,c),N(i.ja,i.i),i.h.i.length=0,C(i.i),i.i.length=0),i.l.oa()}}function cu(i,c,u){var d=u instanceof te?Ot(u):new te(u);if(d.g!="")c&&(d.g=c+"."+d.g),Sn(d,d.u);else{var E=a.location;d=E.protocol,c=c?c+"."+E.hostname:E.hostname,E=+E.port;let A=new te(null);d&&An(A,d),c&&(A.g=c),E&&Sn(A,E),u&&(A.h=u),d=A}return u=i.G,c=i.wa,u&&c&&Q(d,u,c),Q(d,"VER",i.ka),Nn(i,d),d}function uu(i,c,u){if(c&&!i.L)throw Error("Can't create secondary domain capable XhrIo object.");return c=i.Aa&&!i.ma?new Z(new Ir({ab:u})):new Z(i.ma),c.Fa(i.L),c}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function lu(){}n=lu.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Sr(){}Sr.prototype.g=function(i,c){return new At(i,c)};function At(i,c){_t.call(this),this.g=new Zc(c),this.l=i,this.h=c&&c.messageUrlParams||null,i=c&&c.messageHeaders||null,c&&c.clientProtocolHeaderRequired&&(i?i["X-Client-Protocol"]="webchannel":i={"X-Client-Protocol":"webchannel"}),this.g.o=i,i=c&&c.initMessageHeaders||null,c&&c.messageContentType&&(i?i["X-WebChannel-Content-Type"]=c.messageContentType:i={"X-WebChannel-Content-Type":c.messageContentType}),c&&c.sa&&(i?i["X-WebChannel-Client-Profile"]=c.sa:i={"X-WebChannel-Client-Profile":c.sa}),this.g.U=i,(i=c&&c.Qb)&&!g(i)&&(this.g.u=i),this.A=c&&c.supportsCrossDomainXhr||!1,this.v=c&&c.sendRawJson||!1,(c=c&&c.httpSessionIdParam)&&!g(c)&&(this.g.G=c,i=this.h,i!==null&&c in i&&(i=this.h,c in i&&delete i[c])),this.j=new Me(this)}I(At,_t),At.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},At.prototype.close=function(){ii(this.g)},At.prototype.o=function(i){var c=this.g;if(typeof i=="string"){var u={};u.__data__=i,i=u}else this.v&&(u={},u.__data__=Hs(i),i=u);c.i.push(new cf(c.Ya++,i)),c.I==3&&br(c)},At.prototype.N=function(){this.g.l=null,delete this.j,ii(this.g),delete this.g,At.Z.N.call(this)};function hu(i){Ws.call(this),i.__headers__&&(this.headers=i.__headers__,this.statusCode=i.__status__,delete i.__headers__,delete i.__status__);var c=i.__sm__;if(c){t:{for(let u in c){i=u;break t}i=void 0}(this.i=i)&&(i=this.i,c=c!==null&&i in c?c[i]:void 0),this.data=c}else this.data=i}I(hu,Ws);function du(){Qs.call(this),this.status=1}I(du,Qs);function Me(i){this.g=i}I(Me,lu),Me.prototype.ra=function(){It(this.g,"a")},Me.prototype.qa=function(i){It(this.g,new hu(i))},Me.prototype.pa=function(i){It(this.g,new du)},Me.prototype.oa=function(){It(this.g,"b")},Sr.prototype.createWebChannel=Sr.prototype.g,At.prototype.send=At.prototype.o,At.prototype.open=At.prototype.m,At.prototype.close=At.prototype.close,Wi=Gt.createWebChannelTransport=function(){return new Sr},Hi=Gt.getStatEventTarget=function(){return gr()},Ki=Gt.Event=ge,Gr=Gt.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},_r.NO_ERROR=0,_r.TIMEOUT=8,_r.HTTP_ERROR=6,Ln=Gt.ErrorCode=_r,Cc.COMPLETE="complete",Gi=Gt.EventType=Cc,vc.EventType=wn,wn.OPEN="a",wn.CLOSE="b",wn.ERROR="c",wn.MESSAGE="d",_t.prototype.listen=_t.prototype.J,Le=Gt.WebChannel=vc,ag=Gt.FetchXmlHttpFactory=Ir,Z.prototype.listenOnce=Z.prototype.K,Z.prototype.getLastError=Z.prototype.Ha,Z.prototype.getLastErrorCode=Z.prototype.ya,Z.prototype.getStatus=Z.prototype.ca,Z.prototype.getResponseJson=Z.prototype.La,Z.prototype.getResponseText=Z.prototype.la,Z.prototype.send=Z.prototype.ea,Z.prototype.setWithCredentials=Z.prototype.Fa,$i=Gt.XhrIo=Z}).apply(typeof $r<"u"?$r:typeof self<"u"?self:typeof window<"u"?window:{});var ml="@firebase/firestore",gl="4.9.2";var lt=class{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}};lt.UNAUTHENTICATED=new lt(null),lt.GOOGLE_CREDENTIALS=new lt("google-credentials-uid"),lt.FIRST_PARTY=new lt("first-party-uid"),lt.MOCK_USER=new lt("mock-user");var dn="12.3.0";var De=new oe("@firebase/firestore");function Ue(){return De.logLevel}function k(n,...t){if(De.logLevel<=U.DEBUG){let e=t.map(Ua);De.debug(`Firestore (${dn}): ${n}`,...e)}}function Wt(n,...t){if(De.logLevel<=U.ERROR){let e=t.map(Ua);De.error(`Firestore (${dn}): ${n}`,...e)}}function Xe(n,...t){if(De.logLevel<=U.WARN){let e=t.map(Ua);De.warn(`Firestore (${dn}): ${n}`,...e)}}function Ua(n){if(typeof n=="string")return n;try{return(function(e){return JSON.stringify(e)})(n)}catch{return n}}function M(n,t,e){let r="Unexpected state";typeof t=="string"?r=t:e=t,ih(n,r,e)}function ih(n,t,e){let r=`FIRESTORE (${dn}) INTERNAL ASSERTION FAILED: ${t} (ID: ${n.toString(16)})`;if(e!==void 0)try{r+=" CONTEXT: "+JSON.stringify(e)}catch{r+=" CONTEXT: "+e}throw Wt(r),new Error(r)}function X(n,t,e,r){let s="Unexpected state";typeof e=="string"?s=e:r=e,n||ih(t,s,r)}function j(n,t){return n}var R={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},x=class extends Et{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Ht=class{constructor(){this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}};var Xr=class{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}},eo=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable((()=>e(lt.UNAUTHENTICATED)))}shutdown(){}},no=class{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable((()=>e(this.token.user)))}shutdown(){this.changeListener=null}},ro=class{constructor(t){this.t=t,this.currentUser=lt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){X(this.o===void 0,42304);let r=this.i,s=h=>this.i!==r?(r=this.i,e(h)):Promise.resolve(),o=new Ht;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Ht,t.enqueueRetryable((()=>s(this.currentUser)))};let a=()=>{let h=o;t.enqueueRetryable((async()=>{await h.promise,await s(this.currentUser)}))},l=h=>{k("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit((h=>l(h))),setTimeout((()=>{if(!this.auth){let h=this.t.getImmediate({optional:!0});h?l(h):(k("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Ht)}}),0),a()}getToken(){let t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then((r=>this.i!==t?(k("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(X(typeof r.accessToken=="string",31837,{l:r}),new Xr(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let t=this.auth&&this.auth.getUid();return X(t===null||typeof t=="string",2055,{h:t}),new lt(t)}},so=class{constructor(t,e,r){this.P=t,this.T=e,this.I=r,this.type="FirstParty",this.user=lt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},io=class{constructor(t,e,r){this.P=t,this.T=e,this.I=r}getToken(){return Promise.resolve(new so(this.P,this.T,this.I))}start(t,e){t.enqueueRetryable((()=>e(lt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}},Yr=class{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},oo=class{constructor(t,e){this.V=e,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Lr(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,e){X(this.o===void 0,3512);let r=o=>{o.error!=null&&k("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let a=o.token!==this.m;return this.m=o.token,k("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?e(o.token):Promise.resolve()};this.o=o=>{t.enqueueRetryable((()=>r(o)))};let s=o=>{k("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((o=>s(o))),setTimeout((()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?s(o):k("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Yr(this.p));let t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((e=>e?(X(typeof e.token=="string",44558,{tokenResult:e}),this.m=e.token,new Yr(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function cg(n){let t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(n);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(e);else for(let r=0;r<n;r++)e[r]=Math.floor(256*Math.random());return e}var Zr=class{static newId(){let t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let s=cg(40);for(let o=0;o<s.length;++o)r.length<20&&s[o]<e&&(r+=t.charAt(s[o]%62))}return r}};function B(n,t){return n<t?-1:n>t?1:0}function ao(n,t){let e=Math.min(n.length,t.length);for(let r=0;r<e;r++){let s=n.charAt(r),o=t.charAt(r);if(s!==o)return Qi(s)===Qi(o)?B(s,o):Qi(s)?1:-1}return B(n.length,t.length)}var ug=55296,lg=57343;function Qi(n){let t=n.charCodeAt(0);return t>=ug&&t<=lg}function Ye(n,t,e){return n.length===t.length&&n.every(((r,s)=>e(r,t[s])))}var _l="__name__",ts=class n{constructor(t,e,r){e===void 0?e=0:e>t.length&&M(637,{offset:e,range:t.length}),r===void 0?r=t.length-e:r>t.length-e&&M(1746,{length:r,range:t.length-e}),this.segments=t,this.offset=e,this.len=r}get length(){return this.len}isEqual(t){return n.comparator(this,t)===0}child(t){let e=this.segments.slice(this.offset,this.limit());return t instanceof n?t.forEach((r=>{e.push(r)})):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,r=this.limit();e<r;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){let r=Math.min(t.length,e.length);for(let s=0;s<r;s++){let o=n.compareSegments(t.get(s),e.get(s));if(o!==0)return o}return B(t.length,e.length)}static compareSegments(t,e){let r=n.isNumericId(t),s=n.isNumericId(e);return r&&!s?-1:!r&&s?1:r&&s?n.extractNumericId(t).compare(n.extractNumericId(e)):ao(t,e)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return $t.fromString(t.substring(4,t.length-2))}},tt=class n extends ts{construct(t,e,r){return new n(t,e,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){let e=[];for(let r of t){if(r.indexOf("//")>=0)throw new x(R.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);e.push(...r.split("/").filter((s=>s.length>0)))}return new n(e)}static emptyPath(){return new n([])}},hg=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Dt=class n extends ts{construct(t,e,r){return new n(t,e,r)}static isValidIdentifier(t){return hg.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===_l}static keyField(){return new n([_l])}static fromServerFormat(t){let e=[],r="",s=0,o=()=>{if(r.length===0)throw new x(R.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(r),r=""},a=!1;for(;s<t.length;){let l=t[s];if(l==="\\"){if(s+1===t.length)throw new x(R.INVALID_ARGUMENT,"Path has trailing escape character: "+t);let h=t[s+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new x(R.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=h,s+=2}else l==="`"?(a=!a,s++):l!=="."||a?(r+=l,s++):(o(),s++)}if(o(),a)throw new x(R.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new n(e)}static emptyPath(){return new n([])}};var O=class n{constructor(t){this.path=t}static fromPath(t){return new n(tt.fromString(t))}static fromName(t){return new n(tt.fromString(t).popFirst(5))}static empty(){return new n(tt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&tt.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,e){return tt.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new n(new tt(t.slice()))}};function dg(n,t,e){if(!e)throw new x(R.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${t}.`)}function fg(n,t,e,r){if(t===!0&&r===!0)throw new x(R.INVALID_ARGUMENT,`${n} and ${e} cannot be used together.`)}function yl(n){if(O.isDocumentKey(n))throw new x(R.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function oh(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Cs(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let t=(function(r){return r.constructor?r.constructor.name:null})(n);return t?`a custom ${t} object`:"an object"}}return typeof n=="function"?"a function":M(12329,{type:typeof n})}function co(n,t){if("_delegate"in n&&(n=n._delegate),!(n instanceof t)){if(t.name===n.constructor.name)throw new x(R.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let e=Cs(n);throw new x(R.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return n}function pg(n,t){if(t<=0)throw new x(R.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${t}.`)}function it(n,t){let e={typeString:n};return t&&(e.value=t),e}function ar(n,t){if(!oh(n))throw new x(R.INVALID_ARGUMENT,"JSON must be an object");let e;for(let r in t)if(t[r]){let s=t[r].typeString,o="value"in t[r]?{value:t[r].value}:void 0;if(!(r in n)){e=`JSON missing required field: '${r}'`;break}let a=n[r];if(s&&typeof a!==s){e=`JSON field '${r}' must be a ${s}.`;break}if(o!==void 0&&a!==o.value){e=`Expected '${r}' field to equal '${o.value}'`;break}}if(e)throw new x(R.INVALID_ARGUMENT,e);return!0}var wl=-62135596800,Il=1e6,ct=class n{static now(){return n.fromMillis(Date.now())}static fromDate(t){return n.fromMillis(t.getTime())}static fromMillis(t){let e=Math.floor(t/1e3),r=Math.floor((t-1e3*e)*Il);return new n(e,r)}constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new x(R.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new x(R.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<wl)throw new x(R.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new x(R.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Il}_compareTo(t){return this.seconds===t.seconds?B(this.nanoseconds,t.nanoseconds):B(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(ar(t,n._jsonSchema))return new n(t.seconds,t.nanoseconds)}valueOf(){let t=this.seconds-wl;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};ct._jsonSchemaVersion="firestore/timestamp/1.0",ct._jsonSchema={type:it("string",ct._jsonSchemaVersion),seconds:it("number"),nanoseconds:it("number")};var F=class n{static fromTimestamp(t){return new n(t)}static min(){return new n(new ct(0,0))}static max(){return new n(new ct(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Gn=-1,uo=class{constructor(t,e,r,s){this.indexId=t,this.collectionGroup=e,this.fields=r,this.indexState=s}};uo.UNKNOWN_ID=-1;function mg(n,t){let e=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=F.fromTimestamp(r===1e9?new ct(e+1,0):new ct(e,r));return new xe(s,O.empty(),t)}function gg(n){return new xe(n.readTime,n.key,Gn)}var xe=class n{constructor(t,e,r){this.readTime=t,this.documentKey=e,this.largestBatchId=r}static min(){return new n(F.min(),O.empty(),Gn)}static max(){return new n(F.max(),O.empty(),Gn)}};function _g(n,t){let e=n.readTime.compareTo(t.readTime);return e!==0?e:(e=O.comparator(n.documentKey,t.documentKey),e!==0?e:B(n.largestBatchId,t.largestBatchId))}var yg="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",lo=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}};async function Ps(n){if(n.code!==R.FAILED_PRECONDITION||n.message!==yg)throw n;k("LocalStore","Unexpectedly lost primary lease")}var S=class n{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&M(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new n(((r,s)=>{this.nextCallback=o=>{this.wrapSuccess(t,o).next(r,s)},this.catchCallback=o=>{this.wrapFailure(e,o).next(r,s)}}))}toPromise(){return new Promise(((t,e)=>{this.next(t,e)}))}wrapUserFunction(t){try{let e=t();return e instanceof n?e:n.resolve(e)}catch(e){return n.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction((()=>t(e))):n.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction((()=>t(e))):n.reject(e)}static resolve(t){return new n(((e,r)=>{e(t)}))}static reject(t){return new n(((e,r)=>{r(t)}))}static waitFor(t){return new n(((e,r)=>{let s=0,o=0,a=!1;t.forEach((l=>{++s,l.next((()=>{++o,a&&o===s&&e()}),(h=>r(h)))})),a=!0,o===s&&e()}))}static or(t){let e=n.resolve(!1);for(let r of t)e=e.next((s=>s?n.resolve(s):r()));return e}static forEach(t,e){let r=[];return t.forEach(((s,o)=>{r.push(e.call(this,s,o))})),this.waitFor(r)}static mapArray(t,e){return new n(((r,s)=>{let o=t.length,a=new Array(o),l=0;for(let h=0;h<o;h++){let f=h;e(t[f]).next((p=>{a[f]=p,++l,l===o&&r(a)}),(p=>s(p)))}}))}static doWhile(t,e){return new n(((r,s)=>{let o=()=>{t()===!0?e().next((()=>{o()}),s):r()};o()}))}};function wg(n){let t=n.match(/Android ([\d.]+)/i),e=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(e)}function fn(n){return n.name==="IndexedDbTransactionError"}var Ze=class{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>e.writeSequenceNumber(r))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ue&&this.ue(t),t}};Ze.ce=-1;var Ig=-1;function Ds(n){return n==null}function Kn(n){return n===0&&1/n==-1/0}function Tg(n){return typeof n=="number"&&Number.isInteger(n)&&!Kn(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var ah="";function Eg(n){let t="";for(let e=0;e<n.length;e++)t.length>0&&(t=Tl(t)),t=vg(n.get(e),t);return Tl(t)}function vg(n,t){let e=t,r=n.length;for(let s=0;s<r;s++){let o=n.charAt(s);switch(o){case"\0":e+="";break;case ah:e+="";break;default:e+=o}}return e}function Tl(n){return n+ah+""}var bg="remoteDocuments",ch="owner";var uh="mutationQueues";var lh="mutations";var hh="documentMutations",Ag="remoteDocumentsV14";var dh="remoteDocumentGlobal";var fh="targets";var ph="targetDocuments";var mh="targetGlobal",gh="collectionParents";var _h="clientMetadata";var yh="bundles";var wh="namedQueries";var Sg="indexConfiguration";var Rg="indexState";var Cg="indexEntries";var Ih="documentOverlays";var Pg="globals";var Dg=[uh,lh,hh,bg,fh,ch,mh,ph,_h,dh,gh,yh,wh],Jw=[...Dg,Ih],xg=[uh,lh,hh,Ag,fh,ch,mh,ph,_h,dh,gh,yh,wh,Ih],kg=xg,Ng=[...kg,Sg,Rg,Cg];var Xw=[...Ng,Pg];function El(n){let t=0;for(let e in n)Object.prototype.hasOwnProperty.call(n,e)&&t++;return t}function pn(n,t){for(let e in n)Object.prototype.hasOwnProperty.call(n,e)&&t(e,n[e])}function Th(n){for(let t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}var et=class n{constructor(t,e){this.comparator=t,this.root=e||Ut.EMPTY}insert(t,e){return new n(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,Ut.BLACK,null,null))}remove(t){return new n(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Ut.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){let r=this.comparator(t,e.key);if(r===0)return e.value;r<0?e=e.left:r>0&&(e=e.right)}return null}indexOf(t){let e=0,r=this.root;for(;!r.isEmpty();){let s=this.comparator(t,r.key);if(s===0)return e+r.left.size;s<0?r=r.left:(e+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((e,r)=>(t(e,r),!1)))}toString(){let t=[];return this.inorderTraversal(((e,r)=>(t.push(`${e}:${r}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new ze(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new ze(this.root,t,this.comparator,!1)}getReverseIterator(){return new ze(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new ze(this.root,t,this.comparator,!0)}},ze=class{constructor(t,e,r,s){this.isReverse=s,this.nodeStack=[];let o=1;for(;!t.isEmpty();)if(o=e?r(t.key,e):1,e&&s&&(o*=-1),o<0)t=this.isReverse?t.left:t.right;else{if(o===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}},Ut=class n{constructor(t,e,r,s,o){this.key=t,this.value=e,this.color=r??n.RED,this.left=s??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,r,s,o){return new n(t??this.key,e??this.value,r??this.color,s??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,r){let s=this,o=r(t,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(t,e,r),null):o===0?s.copy(null,e,null,null,null):s.copy(null,null,null,null,s.right.insert(t,e,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let r,s=this;if(e(t,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(t,e),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),e(t,s.key)===0){if(s.right.isEmpty())return n.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(t,e))}return s.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){let t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){let t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){let t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){let t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw M(43730,{key:this.key,value:this.value});if(this.right.isRed())throw M(14113,{key:this.key,value:this.value});let t=this.left.check();if(t!==this.right.check())throw M(27949);return t+(this.isRed()?0:1)}};Ut.EMPTY=null,Ut.RED=!0,Ut.BLACK=!1;Ut.EMPTY=new class{constructor(){this.size=0}get key(){throw M(57766)}get value(){throw M(16141)}get color(){throw M(16727)}get left(){throw M(29726)}get right(){throw M(36894)}copy(t,e,r,s,o){return this}insert(t,e,r){return new Ut(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var ht=class n{constructor(t){this.comparator=t,this.data=new et(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((e,r)=>(t(e),!1)))}forEachInRange(t,e){let r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){let s=r.getNext();if(this.comparator(s.key,t[1])>=0)return;e(s.key)}}forEachWhile(t,e){let r;for(r=e!==void 0?this.data.getIteratorFrom(e):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){let e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new es(this.data.getIterator())}getIteratorFrom(t){return new es(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach((r=>{e=e.add(r)})),e}isEqual(t){if(!(t instanceof n)||this.size!==t.size)return!1;let e=this.data.getIterator(),r=t.data.getIterator();for(;e.hasNext();){let s=e.getNext().key,o=r.getNext().key;if(this.comparator(s,o)!==0)return!1}return!0}toArray(){let t=[];return this.forEach((e=>{t.push(e)})),t}toString(){let t=[];return this.forEach((e=>t.push(e))),"SortedSet("+t.toString()+")"}copy(t){let e=new n(this.comparator);return e.data=t,e}},es=class{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Re=class n{constructor(t){this.fields=t,t.sort(Dt.comparator)}static empty(){return new n([])}unionWith(t){let e=new ht(Dt.comparator);for(let r of this.fields)e=e.add(r);for(let r of t)e=e.add(r);return new n(e.toArray())}covers(t){for(let e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return Ye(this.fields,t.fields,((e,r)=>e.isEqual(r)))}};var ns=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var wt=class n{constructor(t){this.binaryString=t}static fromBase64String(t){let e=(function(s){try{return atob(s)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new ns("Invalid base64 string: "+o):o}})(t);return new n(e)}static fromUint8Array(t){let e=(function(s){let o="";for(let a=0;a<s.length;++a)o+=String.fromCharCode(s[a]);return o})(t);return new n(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(e){return btoa(e)})(this.binaryString)}toUint8Array(){return(function(e){let r=new Uint8Array(e.length);for(let s=0;s<e.length;s++)r[s]=e.charCodeAt(s);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return B(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}};wt.EMPTY_BYTE_STRING=new wt("");var Vg=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Qt(n){if(X(!!n,39018),typeof n=="string"){let t=0,e=Vg.exec(n);if(X(!!e,46558,{timestamp:n}),e[1]){let s=e[1];s=(s+"000000000").substr(0,9),t=Number(s)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:J(n.seconds),nanos:J(n.nanos)}}function J(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Jt(n){return typeof n=="string"?wt.fromBase64String(n):wt.fromUint8Array(n)}var Eh="server_timestamp",vh="__type__",bh="__previous_value__",Ah="__local_write_time__";function Ba(n){return(n?.mapValue?.fields||{})[vh]?.stringValue===Eh}function xs(n){let t=n.mapValue.fields[bh];return Ba(t)?xs(t):t}function Hn(n){let t=Qt(n.mapValue.fields[Ah].timestampValue);return new ct(t.seconds,t.nanos)}var ho=class{constructor(t,e,r,s,o,a,l,h,f,p){this.databaseId=t,this.appId=e,this.persistenceKey=r,this.host=s,this.ssl=o,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=h,this.useFetchStreams=f,this.isUsingEmulator=p}},rs="(default)",ss=class n{constructor(t,e){this.projectId=t,this.database=e||rs}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===rs}isEqual(t){return t instanceof n&&t.projectId===this.projectId&&t.database===this.database}};var qa="__type__",Sh="__max__",Kr={mapValue:{fields:{__type__:{stringValue:Sh}}}},ja="__vector__",tn="value";function he(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Ba(n)?4:Ch(n)?9007199254740991:Rh(n)?10:11:M(28295,{value:n})}function qt(n,t){if(n===t)return!0;let e=he(n);if(e!==he(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===t.booleanValue;case 4:return Hn(n).isEqual(Hn(t));case 3:return(function(s,o){if(typeof s.timestampValue=="string"&&typeof o.timestampValue=="string"&&s.timestampValue.length===o.timestampValue.length)return s.timestampValue===o.timestampValue;let a=Qt(s.timestampValue),l=Qt(o.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos})(n,t);case 5:return n.stringValue===t.stringValue;case 6:return(function(s,o){return Jt(s.bytesValue).isEqual(Jt(o.bytesValue))})(n,t);case 7:return n.referenceValue===t.referenceValue;case 8:return(function(s,o){return J(s.geoPointValue.latitude)===J(o.geoPointValue.latitude)&&J(s.geoPointValue.longitude)===J(o.geoPointValue.longitude)})(n,t);case 2:return(function(s,o){if("integerValue"in s&&"integerValue"in o)return J(s.integerValue)===J(o.integerValue);if("doubleValue"in s&&"doubleValue"in o){let a=J(s.doubleValue),l=J(o.doubleValue);return a===l?Kn(a)===Kn(l):isNaN(a)&&isNaN(l)}return!1})(n,t);case 9:return Ye(n.arrayValue.values||[],t.arrayValue.values||[],qt);case 10:case 11:return(function(s,o){let a=s.mapValue.fields||{},l=o.mapValue.fields||{};if(El(a)!==El(l))return!1;for(let h in a)if(a.hasOwnProperty(h)&&(l[h]===void 0||!qt(a[h],l[h])))return!1;return!0})(n,t);default:return M(52216,{left:n})}}function Wn(n,t){return(n.values||[]).find((e=>qt(e,t)))!==void 0}function en(n,t){if(n===t)return 0;let e=he(n),r=he(t);if(e!==r)return B(e,r);switch(e){case 0:case 9007199254740991:return 0;case 1:return B(n.booleanValue,t.booleanValue);case 2:return(function(o,a){let l=J(o.integerValue||o.doubleValue),h=J(a.integerValue||a.doubleValue);return l<h?-1:l>h?1:l===h?0:isNaN(l)?isNaN(h)?0:-1:1})(n,t);case 3:return vl(n.timestampValue,t.timestampValue);case 4:return vl(Hn(n),Hn(t));case 5:return ao(n.stringValue,t.stringValue);case 6:return(function(o,a){let l=Jt(o),h=Jt(a);return l.compareTo(h)})(n.bytesValue,t.bytesValue);case 7:return(function(o,a){let l=o.split("/"),h=a.split("/");for(let f=0;f<l.length&&f<h.length;f++){let p=B(l[f],h[f]);if(p!==0)return p}return B(l.length,h.length)})(n.referenceValue,t.referenceValue);case 8:return(function(o,a){let l=B(J(o.latitude),J(a.latitude));return l!==0?l:B(J(o.longitude),J(a.longitude))})(n.geoPointValue,t.geoPointValue);case 9:return bl(n.arrayValue,t.arrayValue);case 10:return(function(o,a){let l=o.fields||{},h=a.fields||{},f=l[tn]?.arrayValue,p=h[tn]?.arrayValue,I=B(f?.values?.length||0,p?.values?.length||0);return I!==0?I:bl(f,p)})(n.mapValue,t.mapValue);case 11:return(function(o,a){if(o===Kr.mapValue&&a===Kr.mapValue)return 0;if(o===Kr.mapValue)return 1;if(a===Kr.mapValue)return-1;let l=o.fields||{},h=Object.keys(l),f=a.fields||{},p=Object.keys(f);h.sort(),p.sort();for(let I=0;I<h.length&&I<p.length;++I){let b=ao(h[I],p[I]);if(b!==0)return b;let C=en(l[h[I]],f[p[I]]);if(C!==0)return C}return B(h.length,p.length)})(n.mapValue,t.mapValue);default:throw M(23264,{he:e})}}function vl(n,t){if(typeof n=="string"&&typeof t=="string"&&n.length===t.length)return B(n,t);let e=Qt(n),r=Qt(t),s=B(e.seconds,r.seconds);return s!==0?s:B(e.nanos,r.nanos)}function bl(n,t){let e=n.values||[],r=t.values||[];for(let s=0;s<e.length&&s<r.length;++s){let o=en(e[s],r[s]);if(o)return o}return B(e.length,r.length)}function nn(n){return fo(n)}function fo(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(e){let r=Qt(e);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(e){return Jt(e).toBase64()})(n.bytesValue):"referenceValue"in n?(function(e){return O.fromName(e).toString()})(n.referenceValue):"geoPointValue"in n?(function(e){return`geo(${e.latitude},${e.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(e){let r="[",s=!0;for(let o of e.values||[])s?s=!1:r+=",",r+=fo(o);return r+"]"})(n.arrayValue):"mapValue"in n?(function(e){let r=Object.keys(e.fields||{}).sort(),s="{",o=!0;for(let a of r)o?o=!1:s+=",",s+=`${a}:${fo(e.fields[a])}`;return s+"}"})(n.mapValue):M(61005,{value:n})}function Qr(n){switch(he(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let t=xs(n);return t?16+Qr(t):16;case 5:return 2*n.stringValue.length;case 6:return Jt(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((s,o)=>s+Qr(o)),0)})(n.arrayValue);case 10:case 11:return(function(r){let s=0;return pn(r.fields,((o,a)=>{s+=o.length+Qr(a)})),s})(n.mapValue);default:throw M(13486,{value:n})}}function Al(n,t){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${t.path.canonicalString()}`}}function po(n){return!!n&&"integerValue"in n}function za(n){return!!n&&"arrayValue"in n}function Sl(n){return!!n&&"nullValue"in n}function Rl(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Ji(n){return!!n&&"mapValue"in n}function Rh(n){return(n?.mapValue?.fields||{})[qa]?.stringValue===ja}function Bn(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){let t={mapValue:{fields:{}}};return pn(n.mapValue.fields,((e,r)=>t.mapValue.fields[e]=Bn(r))),t}if(n.arrayValue){let t={arrayValue:{values:[]}};for(let e=0;e<(n.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=Bn(n.arrayValue.values[e]);return t}return{...n}}function Ch(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===Sh}var Zw={mapValue:{fields:{[qa]:{stringValue:ja},[tn]:{arrayValue:{}}}}};var Kt=class n{constructor(t){this.value=t}static empty(){return new n({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let r=0;r<t.length-1;++r)if(e=(e.mapValue.fields||{})[t.get(r)],!Ji(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=Bn(e)}setAll(t){let e=Dt.emptyPath(),r={},s=[];t.forEach(((a,l)=>{if(!e.isImmediateParentOf(l)){let h=this.getFieldsMap(e);this.applyChanges(h,r,s),r={},s=[],e=l.popLast()}a?r[l.lastSegment()]=Bn(a):s.push(l.lastSegment())}));let o=this.getFieldsMap(e);this.applyChanges(o,r,s)}delete(t){let e=this.field(t.popLast());Ji(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return qt(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let r=0;r<t.length;++r){let s=e.mapValue.fields[t.get(r)];Ji(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},e.mapValue.fields[t.get(r)]=s),e=s}return e.mapValue.fields}applyChanges(t,e,r){pn(e,((s,o)=>t[s]=o));for(let s of r)delete t[s]}clone(){return new n(Bn(this.value))}};var kt=class n{constructor(t,e,r,s,o,a,l){this.key=t,this.documentType=e,this.version=r,this.readTime=s,this.createTime=o,this.data=a,this.documentState=l}static newInvalidDocument(t){return new n(t,0,F.min(),F.min(),F.min(),Kt.empty(),0)}static newFoundDocument(t,e,r,s){return new n(t,1,e,F.min(),r,s,0)}static newNoDocument(t,e){return new n(t,2,e,F.min(),F.min(),Kt.empty(),0)}static newUnknownDocument(t,e){return new n(t,3,e,F.min(),F.min(),Kt.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(F.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Kt.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Kt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=F.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof n&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var rn=class{constructor(t,e){this.position=t,this.inclusive=e}};function Cl(n,t,e){let r=0;for(let s=0;s<n.position.length;s++){let o=t[s],a=n.position[s];if(o.field.isKeyField()?r=O.comparator(O.fromName(a.referenceValue),e.key):r=en(a,e.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function Pl(n,t){if(n===null)return t===null;if(t===null||n.inclusive!==t.inclusive||n.position.length!==t.position.length)return!1;for(let e=0;e<n.position.length;e++)if(!qt(n.position[e],t.position[e]))return!1;return!0}var ke=class{constructor(t,e="asc"){this.field=t,this.dir=e}};function Og(n,t){return n.dir===t.dir&&n.field.isEqual(t.field)}var is=class{},st=class n extends is{constructor(t,e,r){super(),this.field=t,this.op=e,this.value=r}static create(t,e,r){return t.isKeyField()?e==="in"||e==="not-in"?this.createKeyFieldInFilter(t,e,r):new go(t,e,r):e==="array-contains"?new wo(t,r):e==="in"?new Io(t,r):e==="not-in"?new To(t,r):e==="array-contains-any"?new Eo(t,r):new n(t,e,r)}static createKeyFieldInFilter(t,e,r){return e==="in"?new _o(t,r):new yo(t,r)}matches(t){let e=t.data.field(this.field);return this.op==="!="?e!==null&&e.nullValue===void 0&&this.matchesComparison(en(e,this.value)):e!==null&&he(this.value)===he(e)&&this.matchesComparison(en(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return M(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Nt=class n extends is{constructor(t,e){super(),this.filters=t,this.op=e,this.Pe=null}static create(t,e){return new n(t,e)}matches(t){return Ph(this)?this.filters.find((e=>!e.matches(t)))===void 0:this.filters.find((e=>e.matches(t)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((t,e)=>t.concat(e.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}};function Ph(n){return n.op==="and"}function Dh(n){return Mg(n)&&Ph(n)}function Mg(n){for(let t of n.filters)if(t instanceof Nt)return!1;return!0}function mo(n){if(n instanceof st)return n.field.canonicalString()+n.op.toString()+nn(n.value);if(Dh(n))return n.filters.map((t=>mo(t))).join(",");{let t=n.filters.map((e=>mo(e))).join(",");return`${n.op}(${t})`}}function xh(n,t){return n instanceof st?(function(r,s){return s instanceof st&&r.op===s.op&&r.field.isEqual(s.field)&&qt(r.value,s.value)})(n,t):n instanceof Nt?(function(r,s){return s instanceof Nt&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce(((o,a,l)=>o&&xh(a,s.filters[l])),!0):!1})(n,t):void M(19439)}function kh(n){return n instanceof st?(function(e){return`${e.field.canonicalString()} ${e.op} ${nn(e.value)}`})(n):n instanceof Nt?(function(e){return e.op.toString()+" {"+e.getFilters().map(kh).join(" ,")+"}"})(n):"Filter"}var go=class extends st{constructor(t,e,r){super(t,e,r),this.key=O.fromName(r.referenceValue)}matches(t){let e=O.comparator(t.key,this.key);return this.matchesComparison(e)}},_o=class extends st{constructor(t,e){super(t,"in",e),this.keys=Nh("in",e)}matches(t){return this.keys.some((e=>e.isEqual(t.key)))}},yo=class extends st{constructor(t,e){super(t,"not-in",e),this.keys=Nh("not-in",e)}matches(t){return!this.keys.some((e=>e.isEqual(t.key)))}};function Nh(n,t){return(t.arrayValue?.values||[]).map((e=>O.fromName(e.referenceValue)))}var wo=class extends st{constructor(t,e){super(t,"array-contains",e)}matches(t){let e=t.data.field(this.field);return za(e)&&Wn(e.arrayValue,this.value)}},Io=class extends st{constructor(t,e){super(t,"in",e)}matches(t){let e=t.data.field(this.field);return e!==null&&Wn(this.value.arrayValue,e)}},To=class extends st{constructor(t,e){super(t,"not-in",e)}matches(t){if(Wn(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let e=t.data.field(this.field);return e!==null&&e.nullValue===void 0&&!Wn(this.value.arrayValue,e)}},Eo=class extends st{constructor(t,e){super(t,"array-contains-any",e)}matches(t){let e=t.data.field(this.field);return!(!za(e)||!e.arrayValue.values)&&e.arrayValue.values.some((r=>Wn(this.value.arrayValue,r)))}};var vo=class{constructor(t,e=null,r=[],s=[],o=null,a=null,l=null){this.path=t,this.collectionGroup=e,this.orderBy=r,this.filters=s,this.limit=o,this.startAt=a,this.endAt=l,this.Te=null}};function Dl(n,t=null,e=[],r=[],s=null,o=null,a=null){return new vo(n,t,e,r,s,o,a)}function $a(n){let t=j(n);if(t.Te===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((r=>mo(r))).join(","),e+="|ob:",e+=t.orderBy.map((r=>(function(o){return o.field.canonicalString()+o.dir})(r))).join(","),Ds(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((r=>nn(r))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((r=>nn(r))).join(",")),t.Te=e}return t.Te}function Ga(n,t){if(n.limit!==t.limit||n.orderBy.length!==t.orderBy.length)return!1;for(let e=0;e<n.orderBy.length;e++)if(!Og(n.orderBy[e],t.orderBy[e]))return!1;if(n.filters.length!==t.filters.length)return!1;for(let e=0;e<n.filters.length;e++)if(!xh(n.filters[e],t.filters[e]))return!1;return n.collectionGroup===t.collectionGroup&&!!n.path.isEqual(t.path)&&!!Pl(n.startAt,t.startAt)&&Pl(n.endAt,t.endAt)}function bo(n){return O.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var de=class{constructor(t,e=null,r=[],s=[],o=null,a="F",l=null,h=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=r,this.filters=s,this.limit=o,this.limitType=a,this.startAt=l,this.endAt=h,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}};function Fg(n,t,e,r,s,o,a,l){return new de(n,t,e,r,s,o,a,l)}function Vh(n){return new de(n)}function xl(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Oh(n){return n.collectionGroup!==null}function qn(n){let t=j(n);if(t.Ie===null){t.Ie=[];let e=new Set;for(let o of t.explicitOrderBy)t.Ie.push(o),e.add(o.field.canonicalString());let r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new ht(Dt.comparator);return a.filters.forEach((h=>{h.getFlattenedFilters().forEach((f=>{f.isInequality()&&(l=l.add(f.field))}))})),l})(t).forEach((o=>{e.has(o.canonicalString())||o.isKeyField()||t.Ie.push(new ke(o,r))})),e.has(Dt.keyField().canonicalString())||t.Ie.push(new ke(Dt.keyField(),r))}return t.Ie}function Bt(n){let t=j(n);return t.Ee||(t.Ee=Lg(t,qn(n))),t.Ee}function Lg(n,t){if(n.limitType==="F")return Dl(n.path,n.collectionGroup,t,n.filters,n.limit,n.startAt,n.endAt);{t=t.map((s=>{let o=s.dir==="desc"?"asc":"desc";return new ke(s.field,o)}));let e=n.endAt?new rn(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new rn(n.startAt.position,n.startAt.inclusive):null;return Dl(n.path,n.collectionGroup,t,n.filters,n.limit,e,r)}}function Ao(n,t){let e=n.filters.concat([t]);return new de(n.path,n.collectionGroup,n.explicitOrderBy.slice(),e,n.limit,n.limitType,n.startAt,n.endAt)}function os(n,t,e){return new de(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),t,e,n.startAt,n.endAt)}function ks(n,t){return Ga(Bt(n),Bt(t))&&n.limitType===t.limitType}function Mh(n){return`${$a(Bt(n))}|lt:${n.limitType}`}function Be(n){return`Query(target=${(function(e){let r=e.path.canonicalString();return e.collectionGroup!==null&&(r+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(r+=`, filters: [${e.filters.map((s=>kh(s))).join(", ")}]`),Ds(e.limit)||(r+=", limit: "+e.limit),e.orderBy.length>0&&(r+=`, orderBy: [${e.orderBy.map((s=>(function(a){return`${a.field.canonicalString()} (${a.dir})`})(s))).join(", ")}]`),e.startAt&&(r+=", startAt: ",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map((s=>nn(s))).join(",")),e.endAt&&(r+=", endAt: ",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map((s=>nn(s))).join(",")),`Target(${r})`})(Bt(n))}; limitType=${n.limitType})`}function Ns(n,t){return t.isFoundDocument()&&(function(r,s){let o=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):O.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(n,t)&&(function(r,s){for(let o of qn(r))if(!o.field.isKeyField()&&s.data.field(o.field)===null)return!1;return!0})(n,t)&&(function(r,s){for(let o of r.filters)if(!o.matches(s))return!1;return!0})(n,t)&&(function(r,s){return!(r.startAt&&!(function(a,l,h){let f=Cl(a,l,h);return a.inclusive?f<=0:f<0})(r.startAt,qn(r),s)||r.endAt&&!(function(a,l,h){let f=Cl(a,l,h);return a.inclusive?f>=0:f>0})(r.endAt,qn(r),s))})(n,t)}function Ug(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Fh(n){return(t,e)=>{let r=!1;for(let s of qn(n)){let o=Bg(s,t,e);if(o!==0)return o;r=r||s.field.isKeyField()}return 0}}function Bg(n,t,e){let r=n.field.isKeyField()?O.comparator(t.key,e.key):(function(o,a,l){let h=a.data.field(o),f=l.data.field(o);return h!==null&&f!==null?en(h,f):M(42886)})(n.field,t,e);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return M(19790,{direction:n.dir})}}var Xt=class{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){let e=this.mapKeyFn(t),r=this.inner[e];if(r!==void 0){for(let[s,o]of r)if(this.equalsFn(s,t))return o}}has(t){return this.get(t)!==void 0}set(t,e){let r=this.mapKeyFn(t),s=this.inner[r];if(s===void 0)return this.inner[r]=[[t,e]],void this.innerSize++;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],t))return void(s[o]=[t,e]);s.push([t,e]),this.innerSize++}delete(t){let e=this.mapKeyFn(t),r=this.inner[e];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],t))return r.length===1?delete this.inner[e]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(t){pn(this.inner,((e,r)=>{for(let[s,o]of r)t(s,o)}))}isEmpty(){return Th(this.inner)}size(){return this.innerSize}};var qg=new et(O.comparator);function fe(){return qg}var Lh=new et(O.comparator);function Un(...n){let t=Lh;for(let e of n)t=t.insert(e.key,e);return t}function jg(n){let t=Lh;return n.forEach(((e,r)=>t=t.insert(e,r.overlayedDocument))),t}function Ce(){return jn()}function Uh(){return jn()}function jn(){return new Xt((n=>n.toString()),((n,t)=>n.isEqual(t)))}var tI=new et(O.comparator),zg=new ht(O.comparator);function $(...n){let t=zg;for(let e of n)t=t.add(e);return t}var $g=new ht(B);function Gg(){return $g}function Ka(n,t){if(n.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Kn(t)?"-0":t}}function Bh(n){return{integerValue:""+n}}function Kg(n,t){return Tg(t)?Bh(t):Ka(n,t)}var sn=class{constructor(){this._=void 0}};function Hg(n,t,e){return n instanceof Qn?(function(s,o){let a={fields:{[vh]:{stringValue:Eh},[Ah]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return o&&Ba(o)&&(o=xs(o)),o&&(a.fields[bh]=o),{mapValue:a}})(e,t):n instanceof on?qh(n,t):n instanceof an?jh(n,t):(function(s,o){let a=Qg(s,o),l=kl(a)+kl(s.Ae);return po(a)&&po(s.Ae)?Bh(l):Ka(s.serializer,l)})(n,t)}function Wg(n,t,e){return n instanceof on?qh(n,t):n instanceof an?jh(n,t):e}function Qg(n,t){return n instanceof Jn?(function(r){return po(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(t)?t:{integerValue:0}:null}var Qn=class extends sn{},on=class extends sn{constructor(t){super(),this.elements=t}};function qh(n,t){let e=zh(t);for(let r of n.elements)e.some((s=>qt(s,r)))||e.push(r);return{arrayValue:{values:e}}}var an=class extends sn{constructor(t){super(),this.elements=t}};function jh(n,t){let e=zh(t);for(let r of n.elements)e=e.filter((s=>!qt(s,r)));return{arrayValue:{values:e}}}var Jn=class extends sn{constructor(t,e){super(),this.serializer=t,this.Ae=e}};function kl(n){return J(n.integerValue||n.doubleValue)}function zh(n){return za(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function Jg(n,t){return n.field.isEqual(t.field)&&(function(r,s){return r instanceof on&&s instanceof on||r instanceof an&&s instanceof an?Ye(r.elements,s.elements,qt):r instanceof Jn&&s instanceof Jn?qt(r.Ae,s.Ae):r instanceof Qn&&s instanceof Qn})(n.transform,t.transform)}var zn=class n{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new n}static exists(t){return new n(void 0,t)}static updateTime(t){return new n(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}};function Jr(n,t){return n.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(n.updateTime):n.exists===void 0||n.exists===t.isFoundDocument()}var Xn=class{};function $h(n,t){if(!n.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return n.isNoDocument()?new So(n.key,zn.none()):new Yn(n.key,n.data,zn.none());{let e=n.data,r=Kt.empty(),s=new ht(Dt.comparator);for(let o of t.fields)if(!s.has(o)){let a=e.field(o);a===null&&o.length>1&&(o=o.popLast(),a=e.field(o)),a===null?r.delete(o):r.set(o,a),s=s.add(o)}return new cn(n.key,r,new Re(s.toArray()),zn.none())}}function Xg(n,t,e){n instanceof Yn?(function(s,o,a){let l=s.value.clone(),h=Vl(s.fieldTransforms,o,a.transformResults);l.setAll(h),o.convertToFoundDocument(a.version,l).setHasCommittedMutations()})(n,t,e):n instanceof cn?(function(s,o,a){if(!Jr(s.precondition,o))return void o.convertToUnknownDocument(a.version);let l=Vl(s.fieldTransforms,o,a.transformResults),h=o.data;h.setAll(Gh(s)),h.setAll(l),o.convertToFoundDocument(a.version,h).setHasCommittedMutations()})(n,t,e):(function(s,o,a){o.convertToNoDocument(a.version).setHasCommittedMutations()})(0,t,e)}function $n(n,t,e,r){return n instanceof Yn?(function(o,a,l,h){if(!Jr(o.precondition,a))return l;let f=o.value.clone(),p=Ol(o.fieldTransforms,h,a);return f.setAll(p),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),null})(n,t,e,r):n instanceof cn?(function(o,a,l,h){if(!Jr(o.precondition,a))return l;let f=Ol(o.fieldTransforms,h,a),p=a.data;return p.setAll(Gh(o)),p.setAll(f),a.convertToFoundDocument(a.version,p).setHasLocalMutations(),l===null?null:l.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map((I=>I.field)))})(n,t,e,r):(function(o,a,l){return Jr(o.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l})(n,t,e)}function Nl(n,t){return n.type===t.type&&!!n.key.isEqual(t.key)&&!!n.precondition.isEqual(t.precondition)&&!!(function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Ye(r,s,((o,a)=>Jg(o,a)))})(n.fieldTransforms,t.fieldTransforms)&&(n.type===0?n.value.isEqual(t.value):n.type!==1||n.data.isEqual(t.data)&&n.fieldMask.isEqual(t.fieldMask))}var Yn=class extends Xn{constructor(t,e,r,s=[]){super(),this.key=t,this.value=e,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}},cn=class extends Xn{constructor(t,e,r,s,o=[]){super(),this.key=t,this.data=e,this.fieldMask=r,this.precondition=s,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function Gh(n){let t=new Map;return n.fieldMask.fields.forEach((e=>{if(!e.isEmpty()){let r=n.data.field(e);t.set(e,r)}})),t}function Vl(n,t,e){let r=new Map;X(n.length===e.length,32656,{Re:e.length,Ve:n.length});for(let s=0;s<e.length;s++){let o=n[s],a=o.transform,l=t.data.field(o.field);r.set(o.field,Wg(a,l,e[s]))}return r}function Ol(n,t,e){let r=new Map;for(let s of n){let o=s.transform,a=e.data.field(s.field);r.set(s.field,Hg(o,a,t))}return r}var So=class extends Xn{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}};var Ro=class{constructor(t,e,r,s){this.batchId=t,this.localWriteTime=e,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(t,e){let r=e.mutationResults;for(let s=0;s<this.mutations.length;s++){let o=this.mutations[s];o.key.isEqual(t.key)&&Xg(o,t,r[s])}}applyToLocalView(t,e){for(let r of this.baseMutations)r.key.isEqual(t.key)&&(e=$n(r,t,e,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(t.key)&&(e=$n(r,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){let r=Uh();return this.mutations.forEach((s=>{let o=t.get(s.key),a=o.overlayedDocument,l=this.applyToLocalView(a,o.mutatedFields);l=e.has(s.key)?null:l;let h=$h(a,l);h!==null&&r.set(s.key,h),a.isValidDocument()||a.convertToNoDocument(F.min())})),r}keys(){return this.mutations.reduce(((t,e)=>t.add(e.key)),$())}isEqual(t){return this.batchId===t.batchId&&Ye(this.mutations,t.mutations,((e,r)=>Nl(e,r)))&&Ye(this.baseMutations,t.baseMutations,((e,r)=>Nl(e,r)))}};var Co=class{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Po=class{constructor(t,e){this.count=t,this.unchangedNames=e}};var nt,q;function Kh(n){if(n===void 0)return Wt("GRPC error has no .code"),R.UNKNOWN;switch(n){case nt.OK:return R.OK;case nt.CANCELLED:return R.CANCELLED;case nt.UNKNOWN:return R.UNKNOWN;case nt.DEADLINE_EXCEEDED:return R.DEADLINE_EXCEEDED;case nt.RESOURCE_EXHAUSTED:return R.RESOURCE_EXHAUSTED;case nt.INTERNAL:return R.INTERNAL;case nt.UNAVAILABLE:return R.UNAVAILABLE;case nt.UNAUTHENTICATED:return R.UNAUTHENTICATED;case nt.INVALID_ARGUMENT:return R.INVALID_ARGUMENT;case nt.NOT_FOUND:return R.NOT_FOUND;case nt.ALREADY_EXISTS:return R.ALREADY_EXISTS;case nt.PERMISSION_DENIED:return R.PERMISSION_DENIED;case nt.FAILED_PRECONDITION:return R.FAILED_PRECONDITION;case nt.ABORTED:return R.ABORTED;case nt.OUT_OF_RANGE:return R.OUT_OF_RANGE;case nt.UNIMPLEMENTED:return R.UNIMPLEMENTED;case nt.DATA_LOSS:return R.DATA_LOSS;default:return M(39323,{code:n})}}(q=nt||(nt={}))[q.OK=0]="OK",q[q.CANCELLED=1]="CANCELLED",q[q.UNKNOWN=2]="UNKNOWN",q[q.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",q[q.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",q[q.NOT_FOUND=5]="NOT_FOUND",q[q.ALREADY_EXISTS=6]="ALREADY_EXISTS",q[q.PERMISSION_DENIED=7]="PERMISSION_DENIED",q[q.UNAUTHENTICATED=16]="UNAUTHENTICATED",q[q.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",q[q.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",q[q.ABORTED=10]="ABORTED",q[q.OUT_OF_RANGE=11]="OUT_OF_RANGE",q[q.UNIMPLEMENTED=12]="UNIMPLEMENTED",q[q.INTERNAL=13]="INTERNAL",q[q.UNAVAILABLE=14]="UNAVAILABLE",q[q.DATA_LOSS=15]="DATA_LOSS";var Yg=null;function Zg(){return new TextEncoder}var t_=new $t([4294967295,4294967295],0);function Ml(n){let t=Zg().encode(n),e=new zi;return e.update(t),new Uint8Array(e.digest())}function Fl(n){let t=new DataView(n.buffer),e=t.getUint32(0,!0),r=t.getUint32(4,!0),s=t.getUint32(8,!0),o=t.getUint32(12,!0);return[new $t([e,r],0),new $t([s,o],0)]}var Do=class n{constructor(t,e,r){if(this.bitmap=t,this.padding=e,this.hashCount=r,e<0||e>=8)throw new Pe(`Invalid padding: ${e}`);if(r<0)throw new Pe(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new Pe(`Invalid hash count: ${r}`);if(t.length===0&&e!==0)throw new Pe(`Invalid padding when bitmap length is 0: ${e}`);this.ge=8*t.length-e,this.pe=$t.fromNumber(this.ge)}ye(t,e,r){let s=t.add(e.multiply($t.fromNumber(r)));return s.compare(t_)===1&&(s=new $t([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;let e=Ml(t),[r,s]=Fl(e);for(let o=0;o<this.hashCount;o++){let a=this.ye(r,s,o);if(!this.we(a))return!1}return!0}static create(t,e,r){let s=t%8==0?0:8-t%8,o=new Uint8Array(Math.ceil(t/8)),a=new n(o,s,e);return r.forEach((l=>a.insert(l))),a}insert(t){if(this.ge===0)return;let e=Ml(t),[r,s]=Fl(e);for(let o=0;o<this.hashCount;o++){let a=this.ye(r,s,o);this.Se(a)}}Se(t){let e=Math.floor(t/8),r=t%8;this.bitmap[e]|=1<<r}},Pe=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var as=class n{constructor(t,e,r,s,o){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(t,e,r){let s=new Map;return s.set(t,Zn.createSynthesizedTargetChangeForCurrentChange(t,e,r)),new n(F.min(),s,new et(B),fe(),$())}},Zn=class n{constructor(t,e,r,s,o){this.resumeToken=t,this.current=e,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(t,e,r){return new n(r,e,$(),$(),$())}};var Ge=class{constructor(t,e,r,s){this.be=t,this.removedTargetIds=e,this.key=r,this.De=s}},cs=class{constructor(t,e){this.targetId=t,this.Ce=e}},us=class{constructor(t,e,r=wt.EMPTY_BYTE_STRING,s=null){this.state=t,this.targetIds=e,this.resumeToken=r,this.cause=s}},ls=class{constructor(){this.ve=0,this.Fe=Ll(),this.Me=wt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=$(),e=$(),r=$();return this.Fe.forEach(((s,o)=>{switch(o){case 0:t=t.add(s);break;case 2:e=e.add(s);break;case 1:r=r.add(s);break;default:M(38017,{changeType:o})}})),new Zn(this.Me,this.xe,t,e,r)}qe(){this.Oe=!1,this.Fe=Ll()}Qe(t,e){this.Oe=!0,this.Fe=this.Fe.insert(t,e)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,X(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}},xo=class{constructor(t){this.Ge=t,this.ze=new Map,this.je=fe(),this.Je=Hr(),this.He=Hr(),this.Ye=new et(B)}Ze(t){for(let e of t.be)t.De&&t.De.isFoundDocument()?this.Xe(e,t.De):this.et(e,t.key,t.De);for(let e of t.removedTargetIds)this.et(e,t.key,t.De)}tt(t){this.forEachTarget(t,(e=>{let r=this.nt(e);switch(t.state){case 0:this.rt(e)&&r.Le(t.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(t.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(e);break;case 3:this.rt(e)&&(r.We(),r.Le(t.resumeToken));break;case 4:this.rt(e)&&(this.it(e),r.Le(t.resumeToken));break;default:M(56790,{state:t.state})}}))}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.ze.forEach(((r,s)=>{this.rt(s)&&e(s)}))}st(t){let e=t.targetId,r=t.Ce.count,s=this.ot(e);if(s){let o=s.target;if(bo(o))if(r===0){let a=new O(o.path);this.et(e,a,kt.newNoDocument(a,F.min()))}else X(r===1,20013,{expectedCount:r});else{let a=this._t(e);if(a!==r){let l=this.ut(t),h=l?this.ct(l,t,a):1;if(h!==0){this.it(e);let f=h===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(e,f)}Yg?.lt((function(p,I,b,C,N){let V={localCacheCount:p,existenceFilterCount:I.count,databaseId:b.database,projectId:b.projectId},D=I.unchangedNames;return D&&(V.bloomFilter={applied:N===0,hashCount:D?.hashCount??0,bitmapLength:D?.bits?.bitmap?.length??0,padding:D?.bits?.padding??0,mightContain:G=>C?.mightContain(G)??!1}),V})(a,t.Ce,this.Ge.ht(),l,h))}}}}ut(t){let e=t.Ce.unchangedNames;if(!e||!e.bits)return null;let{bits:{bitmap:r="",padding:s=0},hashCount:o=0}=e,a,l;try{a=Jt(r).toUint8Array()}catch(h){if(h instanceof ns)return Xe("Decoding the base64 bloom filter in existence filter failed ("+h.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw h}try{l=new Do(a,s,o)}catch(h){return Xe(h instanceof Pe?"BloomFilter error: ":"Applying bloom filter failed: ",h),null}return l.ge===0?null:l}ct(t,e,r){return e.Ce.count===r-this.Pt(t,e.targetId)?0:2}Pt(t,e){let r=this.Ge.getRemoteKeysForTarget(e),s=0;return r.forEach((o=>{let a=this.Ge.ht(),l=`projects/${a.projectId}/databases/${a.database}/documents/${o.path.canonicalString()}`;t.mightContain(l)||(this.et(e,o,null),s++)})),s}Tt(t){let e=new Map;this.ze.forEach(((o,a)=>{let l=this.ot(a);if(l){if(o.current&&bo(l.target)){let h=new O(l.target.path);this.It(h).has(a)||this.Et(a,h)||this.et(a,h,kt.newNoDocument(h,t))}o.Be&&(e.set(a,o.ke()),o.qe())}}));let r=$();this.He.forEach(((o,a)=>{let l=!0;a.forEachWhile((h=>{let f=this.ot(h);return!f||f.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)})),l&&(r=r.add(o))})),this.je.forEach(((o,a)=>a.setReadTime(t)));let s=new as(t,e,this.Ye,this.je,r);return this.je=fe(),this.Je=Hr(),this.He=Hr(),this.Ye=new et(B),s}Xe(t,e){if(!this.rt(t))return;let r=this.Et(t,e.key)?2:0;this.nt(t).Qe(e.key,r),this.je=this.je.insert(e.key,e),this.Je=this.Je.insert(e.key,this.It(e.key).add(t)),this.He=this.He.insert(e.key,this.dt(e.key).add(t))}et(t,e,r){if(!this.rt(t))return;let s=this.nt(t);this.Et(t,e)?s.Qe(e,1):s.$e(e),this.He=this.He.insert(e,this.dt(e).delete(t)),this.He=this.He.insert(e,this.dt(e).add(t)),r&&(this.je=this.je.insert(e,r))}removeTarget(t){this.ze.delete(t)}_t(t){let e=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let e=this.ze.get(t);return e||(e=new ls,this.ze.set(t,e)),e}dt(t){let e=this.He.get(t);return e||(e=new ht(B),this.He=this.He.insert(t,e)),e}It(t){let e=this.Je.get(t);return e||(e=new ht(B),this.Je=this.Je.insert(t,e)),e}rt(t){let e=this.ot(t)!==null;return e||k("WatchChangeAggregator","Detected inactive target",t),e}ot(t){let e=this.ze.get(t);return e&&e.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new ls),this.Ge.getRemoteKeysForTarget(t).forEach((e=>{this.et(t,e,null)}))}Et(t,e){return this.Ge.getRemoteKeysForTarget(t).has(e)}};function Hr(){return new et(O.comparator)}function Ll(){return new et(O.comparator)}var e_={asc:"ASCENDING",desc:"DESCENDING"},n_={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},r_={and:"AND",or:"OR"},ko=class{constructor(t,e){this.databaseId=t,this.useProto3Json=e}};function No(n,t){return n.useProto3Json||Ds(t)?t:{value:t}}function Vo(n,t){return n.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Hh(n,t){return n.useProto3Json?t.toBase64():t.toUint8Array()}function Ke(n){return X(!!n,49232),F.fromTimestamp((function(e){let r=Qt(e);return new ct(r.seconds,r.nanos)})(n))}function Wh(n,t){return Oo(n,t).canonicalString()}function Oo(n,t){let e=(function(s){return new tt(["projects",s.projectId,"databases",s.database])})(n).child("documents");return t===void 0?e:e.child(t)}function Qh(n){let t=tt.fromString(n);return X(td(t),10190,{key:t.toString()}),t}function Xi(n,t){let e=Qh(t);if(e.get(1)!==n.databaseId.projectId)throw new x(R.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+n.databaseId.projectId);if(e.get(3)!==n.databaseId.database)throw new x(R.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+n.databaseId.database);return new O(Xh(e))}function Jh(n,t){return Wh(n.databaseId,t)}function s_(n){let t=Qh(n);return t.length===4?tt.emptyPath():Xh(t)}function Ul(n){return new tt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Xh(n){return X(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function i_(n,t){let e;if("targetChange"in t){t.targetChange;let r=(function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:M(39313,{state:f})})(t.targetChange.targetChangeType||"NO_CHANGE"),s=t.targetChange.targetIds||[],o=(function(f,p){return f.useProto3Json?(X(p===void 0||typeof p=="string",58123),wt.fromBase64String(p||"")):(X(p===void 0||p instanceof Buffer||p instanceof Uint8Array,16193),wt.fromUint8Array(p||new Uint8Array))})(n,t.targetChange.resumeToken),a=t.targetChange.cause,l=a&&(function(f){let p=f.code===void 0?R.UNKNOWN:Kh(f.code);return new x(p,f.message||"")})(a);e=new us(r,s,o,l||null)}else if("documentChange"in t){t.documentChange;let r=t.documentChange;r.document,r.document.name,r.document.updateTime;let s=Xi(n,r.document.name),o=Ke(r.document.updateTime),a=r.document.createTime?Ke(r.document.createTime):F.min(),l=new Kt({mapValue:{fields:r.document.fields}}),h=kt.newFoundDocument(s,o,a,l),f=r.targetIds||[],p=r.removedTargetIds||[];e=new Ge(f,p,h.key,h)}else if("documentDelete"in t){t.documentDelete;let r=t.documentDelete;r.document;let s=Xi(n,r.document),o=r.readTime?Ke(r.readTime):F.min(),a=kt.newNoDocument(s,o),l=r.removedTargetIds||[];e=new Ge([],l,a.key,a)}else if("documentRemove"in t){t.documentRemove;let r=t.documentRemove;r.document;let s=Xi(n,r.document),o=r.removedTargetIds||[];e=new Ge([],o,s,null)}else{if(!("filter"in t))return M(11601,{Rt:t});{t.filter;let r=t.filter;r.targetId;let{count:s=0,unchangedNames:o}=r,a=new Po(s,o),l=r.targetId;e=new cs(l,a)}}return e}function o_(n,t){return{documents:[Jh(n,t.path)]}}function a_(n,t){let e={structuredQuery:{}},r=t.path,s;t.collectionGroup!==null?(s=r,e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(s=r.popLast(),e.structuredQuery.from=[{collectionId:r.lastSegment()}]),e.parent=Jh(n,s);let o=(function(f){if(f.length!==0)return Zh(Nt.create(f,"and"))})(t.filters);o&&(e.structuredQuery.where=o);let a=(function(f){if(f.length!==0)return f.map((p=>(function(b){return{field:qe(b.field),direction:l_(b.dir)}})(p)))})(t.orderBy);a&&(e.structuredQuery.orderBy=a);let l=No(n,t.limit);return l!==null&&(e.structuredQuery.limit=l),t.startAt&&(e.structuredQuery.startAt=(function(f){return{before:f.inclusive,values:f.position}})(t.startAt)),t.endAt&&(e.structuredQuery.endAt=(function(f){return{before:!f.inclusive,values:f.position}})(t.endAt)),{ft:e,parent:s}}function c_(n){let t=s_(n.parent),e=n.structuredQuery,r=e.from?e.from.length:0,s=null;if(r>0){X(r===1,65062);let p=e.from[0];p.allDescendants?s=p.collectionId:t=t.child(p.collectionId)}let o=[];e.where&&(o=(function(I){let b=Yh(I);return b instanceof Nt&&Dh(b)?b.getFilters():[b]})(e.where));let a=[];e.orderBy&&(a=(function(I){return I.map((b=>(function(N){return new ke(je(N.field),(function(D){switch(D){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(N.direction))})(b)))})(e.orderBy));let l=null;e.limit&&(l=(function(I){let b;return b=typeof I=="object"?I.value:I,Ds(b)?null:b})(e.limit));let h=null;e.startAt&&(h=(function(I){let b=!!I.before,C=I.values||[];return new rn(C,b)})(e.startAt));let f=null;return e.endAt&&(f=(function(I){let b=!I.before,C=I.values||[];return new rn(C,b)})(e.endAt)),Fg(t,s,a,o,l,"F",h,f)}function u_(n,t){let e=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return M(28987,{purpose:s})}})(t.purpose);return e==null?null:{"goog-listen-tags":e}}function Yh(n){return n.unaryFilter!==void 0?(function(e){switch(e.unaryFilter.op){case"IS_NAN":let r=je(e.unaryFilter.field);return st.create(r,"==",{doubleValue:NaN});case"IS_NULL":let s=je(e.unaryFilter.field);return st.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=je(e.unaryFilter.field);return st.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let a=je(e.unaryFilter.field);return st.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return M(61313);default:return M(60726)}})(n):n.fieldFilter!==void 0?(function(e){return st.create(je(e.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return M(58110);default:return M(50506)}})(e.fieldFilter.op),e.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(e){return Nt.create(e.compositeFilter.filters.map((r=>Yh(r))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return M(1026)}})(e.compositeFilter.op))})(n):M(30097,{filter:n})}function l_(n){return e_[n]}function h_(n){return n_[n]}function d_(n){return r_[n]}function qe(n){return{fieldPath:n.canonicalString()}}function je(n){return Dt.fromServerFormat(n.fieldPath)}function Zh(n){return n instanceof st?(function(e){if(e.op==="=="){if(Rl(e.value))return{unaryFilter:{field:qe(e.field),op:"IS_NAN"}};if(Sl(e.value))return{unaryFilter:{field:qe(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(Rl(e.value))return{unaryFilter:{field:qe(e.field),op:"IS_NOT_NAN"}};if(Sl(e.value))return{unaryFilter:{field:qe(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:qe(e.field),op:h_(e.op),value:e.value}}})(n):n instanceof Nt?(function(e){let r=e.getFilters().map((s=>Zh(s)));return r.length===1?r[0]:{compositeFilter:{op:d_(e.op),filters:r}}})(n):M(54877,{filter:n})}function td(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var tr=class n{constructor(t,e,r,s,o=F.min(),a=F.min(),l=wt.EMPTY_BYTE_STRING,h=null){this.target=t,this.targetId=e,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=h}withSequenceNumber(t){return new n(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}};var Mo=class{constructor(t){this.yt=t}};function f_(n){let t=c_({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?os(t,t.limit,"L"):t}var hs=class{constructor(){}Dt(t,e){this.Ct(t,e),e.vt()}Ct(t,e){if("nullValue"in t)this.Ft(e,5);else if("booleanValue"in t)this.Ft(e,10),e.Mt(t.booleanValue?1:0);else if("integerValue"in t)this.Ft(e,15),e.Mt(J(t.integerValue));else if("doubleValue"in t){let r=J(t.doubleValue);isNaN(r)?this.Ft(e,13):(this.Ft(e,15),Kn(r)?e.Mt(0):e.Mt(r))}else if("timestampValue"in t){let r=t.timestampValue;this.Ft(e,20),typeof r=="string"&&(r=Qt(r)),e.xt(`${r.seconds||""}`),e.Mt(r.nanos||0)}else if("stringValue"in t)this.Ot(t.stringValue,e),this.Nt(e);else if("bytesValue"in t)this.Ft(e,30),e.Bt(Jt(t.bytesValue)),this.Nt(e);else if("referenceValue"in t)this.Lt(t.referenceValue,e);else if("geoPointValue"in t){let r=t.geoPointValue;this.Ft(e,45),e.Mt(r.latitude||0),e.Mt(r.longitude||0)}else"mapValue"in t?Ch(t)?this.Ft(e,Number.MAX_SAFE_INTEGER):Rh(t)?this.kt(t.mapValue,e):(this.qt(t.mapValue,e),this.Nt(e)):"arrayValue"in t?(this.Qt(t.arrayValue,e),this.Nt(e)):M(19022,{$t:t})}Ot(t,e){this.Ft(e,25),this.Ut(t,e)}Ut(t,e){e.xt(t)}qt(t,e){let r=t.fields||{};this.Ft(e,55);for(let s of Object.keys(r))this.Ot(s,e),this.Ct(r[s],e)}kt(t,e){let r=t.fields||{};this.Ft(e,53);let s=tn,o=r[s].arrayValue?.values?.length||0;this.Ft(e,15),e.Mt(J(o)),this.Ot(s,e),this.Ct(r[s],e)}Qt(t,e){let r=t.values||[];this.Ft(e,50);for(let s of r)this.Ct(s,e)}Lt(t,e){this.Ft(e,37),O.fromName(t).path.forEach((r=>{this.Ft(e,60),this.Ut(r,e)}))}Ft(t,e){t.Mt(e)}Nt(t){t.Mt(2)}};hs.Kt=new hs;var Fo=class{constructor(){this.Cn=new Lo}addToCollectionParentIndex(t,e){return this.Cn.add(e),S.resolve()}getCollectionParents(t,e){return S.resolve(this.Cn.getEntries(e))}addFieldIndex(t,e){return S.resolve()}deleteFieldIndex(t,e){return S.resolve()}deleteAllFieldIndexes(t){return S.resolve()}createTargetIndexes(t,e){return S.resolve()}getDocumentsMatchingTarget(t,e){return S.resolve(null)}getIndexType(t,e){return S.resolve(0)}getFieldIndexes(t,e){return S.resolve([])}getNextCollectionGroupToUpdate(t){return S.resolve(null)}getMinOffset(t,e){return S.resolve(xe.min())}getMinOffsetFromCollectionGroup(t,e){return S.resolve(xe.min())}updateCollectionGroup(t,e,r){return S.resolve()}updateIndexEntries(t,e){return S.resolve()}},Lo=class{constructor(){this.index={}}add(t){let e=t.lastSegment(),r=t.popLast(),s=this.index[e]||new ht(tt.comparator),o=!s.has(r);return this.index[e]=s.add(r),o}has(t){let e=t.lastSegment(),r=t.popLast(),s=this.index[e];return s&&s.has(r)}getEntries(t){return(this.index[t]||new ht(tt.comparator)).toArray()}};var eI=new Uint8Array(0);var Bl={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},ed=41943040,Pt=class n{static withCacheSize(t){return new n(t,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,e,r){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=r}};Pt.DEFAULT_COLLECTION_PERCENTILE=10,Pt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Pt.DEFAULT=new Pt(ed,Pt.DEFAULT_COLLECTION_PERCENTILE,Pt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Pt.DISABLED=new Pt(-1,0,0);var er=class n{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new n(0)}static cr(){return new n(-1)}};var ql="LruGarbageCollector",p_=1048576;function jl([n,t],[e,r]){let s=B(n,e);return s===0?B(t,r):s}var Uo=class{constructor(t){this.Ir=t,this.buffer=new ht(jl),this.Er=0}dr(){return++this.Er}Ar(t){let e=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(e);else{let r=this.buffer.last();jl(e,r)<0&&(this.buffer=this.buffer.delete(r).add(e))}}get maxValue(){return this.buffer.last()[0]}},Bo=class{constructor(t,e,r){this.garbageCollector=t,this.asyncQueue=e,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){k(ql,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){fn(e)?k(ql,"Ignoring IndexedDB error during garbage collection: ",e):await Ps(e)}await this.Vr(3e5)}))}},qo=class{constructor(t,e){this.mr=t,this.params=e}calculateTargetCount(t,e){return this.mr.gr(t).next((r=>Math.floor(e/100*r)))}nthSequenceNumber(t,e){if(e===0)return S.resolve(Ze.ce);let r=new Uo(e);return this.mr.forEachTarget(t,(s=>r.Ar(s.sequenceNumber))).next((()=>this.mr.pr(t,(s=>r.Ar(s))))).next((()=>r.maxValue))}removeTargets(t,e,r){return this.mr.removeTargets(t,e,r)}removeOrphanedDocuments(t,e){return this.mr.removeOrphanedDocuments(t,e)}collect(t,e){return this.params.cacheSizeCollectionThreshold===-1?(k("LruGarbageCollector","Garbage collection skipped; disabled"),S.resolve(Bl)):this.getCacheSize(t).next((r=>r<this.params.cacheSizeCollectionThreshold?(k("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Bl):this.yr(t,e)))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,e){let r,s,o,a,l,h,f,p=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((I=>(I>this.params.maximumSequenceNumbersToCollect?(k("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${I}`),s=this.params.maximumSequenceNumbersToCollect):s=I,a=Date.now(),this.nthSequenceNumber(t,s)))).next((I=>(r=I,l=Date.now(),this.removeTargets(t,r,e)))).next((I=>(o=I,h=Date.now(),this.removeOrphanedDocuments(t,r)))).next((I=>(f=Date.now(),Ue()<=U.DEBUG&&k("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-p}ms
	Determined least recently used ${s} in `+(l-a)+`ms
	Removed ${o} targets in `+(h-l)+`ms
	Removed ${I} documents in `+(f-h)+`ms
Total Duration: ${f-p}ms`),S.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:o,documentsRemoved:I}))))}};function m_(n,t){return new qo(n,t)}var jo=class{constructor(){this.changes=new Xt((t=>t.toString()),((t,e)=>t.isEqual(e))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,kt.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();let r=this.changes.get(e);return r!==void 0?S.resolve(r):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}};var zo=class{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}};var $o=class{constructor(t,e,r,s){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=r,this.indexManager=s}getDocument(t,e){let r=null;return this.documentOverlayCache.getOverlay(t,e).next((s=>(r=s,this.remoteDocumentCache.getEntry(t,e)))).next((s=>(r!==null&&$n(r.mutation,s,Re.empty(),ct.now()),s)))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next((r=>this.getLocalViewOfDocuments(t,r,$()).next((()=>r))))}getLocalViewOfDocuments(t,e,r=$()){let s=Ce();return this.populateOverlays(t,s,e).next((()=>this.computeViews(t,e,s,r).next((o=>{let a=Un();return o.forEach(((l,h)=>{a=a.insert(l,h.overlayedDocument)})),a}))))}getOverlayedDocuments(t,e){let r=Ce();return this.populateOverlays(t,r,e).next((()=>this.computeViews(t,e,r,$())))}populateOverlays(t,e,r){let s=[];return r.forEach((o=>{e.has(o)||s.push(o)})),this.documentOverlayCache.getOverlays(t,s).next((o=>{o.forEach(((a,l)=>{e.set(a,l)}))}))}computeViews(t,e,r,s){let o=fe(),a=jn(),l=(function(){return jn()})();return e.forEach(((h,f)=>{let p=r.get(f.key);s.has(f.key)&&(p===void 0||p.mutation instanceof cn)?o=o.insert(f.key,f):p!==void 0?(a.set(f.key,p.mutation.getFieldMask()),$n(p.mutation,f,p.mutation.getFieldMask(),ct.now())):a.set(f.key,Re.empty())})),this.recalculateAndSaveOverlays(t,o).next((h=>(h.forEach(((f,p)=>a.set(f,p))),e.forEach(((f,p)=>l.set(f,new zo(p,a.get(f)??null)))),l)))}recalculateAndSaveOverlays(t,e){let r=jn(),s=new et(((a,l)=>a-l)),o=$();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next((a=>{for(let l of a)l.keys().forEach((h=>{let f=e.get(h);if(f===null)return;let p=r.get(h)||Re.empty();p=l.applyToLocalView(f,p),r.set(h,p);let I=(s.get(l.batchId)||$()).add(h);s=s.insert(l.batchId,I)}))})).next((()=>{let a=[],l=s.getReverseIterator();for(;l.hasNext();){let h=l.getNext(),f=h.key,p=h.value,I=Uh();p.forEach((b=>{if(!o.has(b)){let C=$h(e.get(b),r.get(b));C!==null&&I.set(b,C),o=o.add(b)}})),a.push(this.documentOverlayCache.saveOverlays(t,f,I))}return S.waitFor(a)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next((r=>this.recalculateAndSaveOverlays(t,r)))}getDocumentsMatchingQuery(t,e,r,s){return(function(a){return O.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0})(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):Oh(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,r,s):this.getDocumentsMatchingCollectionQuery(t,e,r,s)}getNextDocuments(t,e,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,r,s).next((o=>{let a=s-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,r.largestBatchId,s-o.size):S.resolve(Ce()),l=Gn,h=o;return a.next((f=>S.forEach(f,((p,I)=>(l<I.largestBatchId&&(l=I.largestBatchId),o.get(p)?S.resolve():this.remoteDocumentCache.getEntry(t,p).next((b=>{h=h.insert(p,b)}))))).next((()=>this.populateOverlays(t,f,o))).next((()=>this.computeViews(t,h,f,$()))).next((p=>({batchId:l,changes:jg(p)})))))}))}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new O(e)).next((r=>{let s=Un();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s}))}getDocumentsMatchingCollectionGroupQuery(t,e,r,s){let o=e.collectionGroup,a=Un();return this.indexManager.getCollectionParents(t,o).next((l=>S.forEach(l,(h=>{let f=(function(I,b){return new de(b,null,I.explicitOrderBy.slice(),I.filters.slice(),I.limit,I.limitType,I.startAt,I.endAt)})(e,h.child(o));return this.getDocumentsMatchingCollectionQuery(t,f,r,s).next((p=>{p.forEach(((I,b)=>{a=a.insert(I,b)}))}))})).next((()=>a))))}getDocumentsMatchingCollectionQuery(t,e,r,s){let o;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,r.largestBatchId).next((a=>(o=a,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,r,o,s)))).next((a=>{o.forEach(((h,f)=>{let p=f.getKey();a.get(p)===null&&(a=a.insert(p,kt.newInvalidDocument(p)))}));let l=Un();return a.forEach(((h,f)=>{let p=o.get(h);p!==void 0&&$n(p.mutation,f,Re.empty(),ct.now()),Ns(e,f)&&(l=l.insert(h,f))})),l}))}};var Go=class{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,e){return S.resolve(this.Lr.get(e))}saveBundleMetadata(t,e){return this.Lr.set(e.id,(function(s){return{id:s.id,version:s.version,createTime:Ke(s.createTime)}})(e)),S.resolve()}getNamedQuery(t,e){return S.resolve(this.kr.get(e))}saveNamedQuery(t,e){return this.kr.set(e.name,(function(s){return{name:s.name,query:f_(s.bundledQuery),readTime:Ke(s.readTime)}})(e)),S.resolve()}};var Ko=class{constructor(){this.overlays=new et(O.comparator),this.qr=new Map}getOverlay(t,e){return S.resolve(this.overlays.get(e))}getOverlays(t,e){let r=Ce();return S.forEach(e,(s=>this.getOverlay(t,s).next((o=>{o!==null&&r.set(s,o)})))).next((()=>r))}saveOverlays(t,e,r){return r.forEach(((s,o)=>{this.St(t,e,o)})),S.resolve()}removeOverlaysForBatchId(t,e,r){let s=this.qr.get(r);return s!==void 0&&(s.forEach((o=>this.overlays=this.overlays.remove(o))),this.qr.delete(r)),S.resolve()}getOverlaysForCollection(t,e,r){let s=Ce(),o=e.length+1,a=new O(e.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){let h=l.getNext().value,f=h.getKey();if(!e.isPrefixOf(f.path))break;f.path.length===o&&h.largestBatchId>r&&s.set(h.getKey(),h)}return S.resolve(s)}getOverlaysForCollectionGroup(t,e,r,s){let o=new et(((f,p)=>f-p)),a=this.overlays.getIterator();for(;a.hasNext();){let f=a.getNext().value;if(f.getKey().getCollectionGroup()===e&&f.largestBatchId>r){let p=o.get(f.largestBatchId);p===null&&(p=Ce(),o=o.insert(f.largestBatchId,p)),p.set(f.getKey(),f)}}let l=Ce(),h=o.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach(((f,p)=>l.set(f,p))),!(l.size()>=s)););return S.resolve(l)}St(t,e,r){let s=this.overlays.get(r.key);if(s!==null){let a=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new Co(e,r));let o=this.qr.get(e);o===void 0&&(o=$(),this.qr.set(e,o)),this.qr.set(e,o.add(r.key))}};var Ho=class{constructor(){this.sessionToken=wt.EMPTY_BYTE_STRING}getSessionToken(t){return S.resolve(this.sessionToken)}setSessionToken(t,e){return this.sessionToken=e,S.resolve()}};var nr=class{constructor(){this.Qr=new ht(rt.$r),this.Ur=new ht(rt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,e){let r=new rt(t,e);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(t,e){t.forEach((r=>this.addReference(r,e)))}removeReference(t,e){this.Gr(new rt(t,e))}zr(t,e){t.forEach((r=>this.removeReference(r,e)))}jr(t){let e=new O(new tt([])),r=new rt(e,t),s=new rt(e,t+1),o=[];return this.Ur.forEachInRange([r,s],(a=>{this.Gr(a),o.push(a.key)})),o}Jr(){this.Qr.forEach((t=>this.Gr(t)))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){let e=new O(new tt([])),r=new rt(e,t),s=new rt(e,t+1),o=$();return this.Ur.forEachInRange([r,s],(a=>{o=o.add(a.key)})),o}containsKey(t){let e=new rt(t,0),r=this.Qr.firstAfterOrEqual(e);return r!==null&&t.isEqual(r.key)}},rt=class{constructor(t,e){this.key=t,this.Yr=e}static $r(t,e){return O.comparator(t.key,e.key)||B(t.Yr,e.Yr)}static Kr(t,e){return B(t.Yr,e.Yr)||O.comparator(t.key,e.key)}};var Wo=class{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.tr=1,this.Zr=new ht(rt.$r)}checkEmpty(t){return S.resolve(this.mutationQueue.length===0)}addMutationBatch(t,e,r,s){let o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let a=new Ro(o,e,r,s);this.mutationQueue.push(a);for(let l of s)this.Zr=this.Zr.add(new rt(l.key,o)),this.indexManager.addToCollectionParentIndex(t,l.key.path.popLast());return S.resolve(a)}lookupMutationBatch(t,e){return S.resolve(this.Xr(e))}getNextMutationBatchAfterBatchId(t,e){let r=e+1,s=this.ei(r),o=s<0?0:s;return S.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return S.resolve(this.mutationQueue.length===0?Ig:this.tr-1)}getAllMutationBatches(t){return S.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){let r=new rt(e,0),s=new rt(e,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([r,s],(a=>{let l=this.Xr(a.Yr);o.push(l)})),S.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(t,e){let r=new ht(B);return e.forEach((s=>{let o=new rt(s,0),a=new rt(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,a],(l=>{r=r.add(l.Yr)}))})),S.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(t,e){let r=e.path,s=r.length+1,o=r;O.isDocumentKey(o)||(o=o.child(""));let a=new rt(new O(o),0),l=new ht(B);return this.Zr.forEachWhile((h=>{let f=h.key.path;return!!r.isPrefixOf(f)&&(f.length===s&&(l=l.add(h.Yr)),!0)}),a),S.resolve(this.ti(l))}ti(t){let e=[];return t.forEach((r=>{let s=this.Xr(r);s!==null&&e.push(s)})),e}removeMutationBatch(t,e){X(this.ni(e.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return S.forEach(e.mutations,(s=>{let o=new rt(s.key,e.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(t,s.key)})).next((()=>{this.Zr=r}))}ir(t){}containsKey(t,e){let r=new rt(e,0),s=this.Zr.firstAfterOrEqual(r);return S.resolve(e.isEqual(s&&s.key))}performConsistencyCheck(t){return this.mutationQueue.length,S.resolve()}ni(t,e){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){let e=this.ei(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}};var Qo=class{constructor(t){this.ri=t,this.docs=(function(){return new et(O.comparator)})(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){let r=e.key,s=this.docs.get(r),o=s?s.size:0,a=this.ri(e);return this.docs=this.docs.insert(r,{document:e.mutableCopy(),size:a}),this.size+=a-o,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){let e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){let r=this.docs.get(e);return S.resolve(r?r.document.mutableCopy():kt.newInvalidDocument(e))}getEntries(t,e){let r=fe();return e.forEach((s=>{let o=this.docs.get(s);r=r.insert(s,o?o.document.mutableCopy():kt.newInvalidDocument(s))})),S.resolve(r)}getDocumentsMatchingQuery(t,e,r,s){let o=fe(),a=e.path,l=new O(a.child("__id-9223372036854775808__")),h=this.docs.getIteratorFrom(l);for(;h.hasNext();){let{key:f,value:{document:p}}=h.getNext();if(!a.isPrefixOf(f.path))break;f.path.length>a.length+1||_g(gg(p),r)<=0||(s.has(p.key)||Ns(e,p))&&(o=o.insert(p.key,p.mutableCopy()))}return S.resolve(o)}getAllFromCollectionGroup(t,e,r,s){M(9500)}ii(t,e){return S.forEach(this.docs,(r=>e(r)))}newChangeBuffer(t){return new Jo(this)}getSize(t){return S.resolve(this.size)}},Jo=class extends jo{constructor(t){super(),this.Nr=t}applyChanges(t){let e=[];return this.changes.forEach(((r,s)=>{s.isValidDocument()?e.push(this.Nr.addEntry(t,s)):this.Nr.removeEntry(r)})),S.waitFor(e)}getFromCache(t,e){return this.Nr.getEntry(t,e)}getAllFromCache(t,e){return this.Nr.getEntries(t,e)}};var Xo=class{constructor(t){this.persistence=t,this.si=new Xt((e=>$a(e)),Ga),this.lastRemoteSnapshotVersion=F.min(),this.highestTargetId=0,this.oi=0,this._i=new nr,this.targetCount=0,this.ai=er.ur()}forEachTarget(t,e){return this.si.forEach(((r,s)=>e(s))),S.resolve()}getLastRemoteSnapshotVersion(t){return S.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return S.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),S.resolve(this.highestTargetId)}setTargetsMetadata(t,e,r){return r&&(this.lastRemoteSnapshotVersion=r),e>this.oi&&(this.oi=e),S.resolve()}Pr(t){this.si.set(t.target,t);let e=t.targetId;e>this.highestTargetId&&(this.ai=new er(e),this.highestTargetId=e),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,e){return this.Pr(e),this.targetCount+=1,S.resolve()}updateTargetData(t,e){return this.Pr(e),S.resolve()}removeTargetData(t,e){return this.si.delete(e.target),this._i.jr(e.targetId),this.targetCount-=1,S.resolve()}removeTargets(t,e,r){let s=0,o=[];return this.si.forEach(((a,l)=>{l.sequenceNumber<=e&&r.get(l.targetId)===null&&(this.si.delete(a),o.push(this.removeMatchingKeysForTargetId(t,l.targetId)),s++)})),S.waitFor(o).next((()=>s))}getTargetCount(t){return S.resolve(this.targetCount)}getTargetData(t,e){let r=this.si.get(e)||null;return S.resolve(r)}addMatchingKeys(t,e,r){return this._i.Wr(e,r),S.resolve()}removeMatchingKeys(t,e,r){this._i.zr(e,r);let s=this.persistence.referenceDelegate,o=[];return s&&e.forEach((a=>{o.push(s.markPotentiallyOrphaned(t,a))})),S.waitFor(o)}removeMatchingKeysForTargetId(t,e){return this._i.jr(e),S.resolve()}getMatchingKeysForTargetId(t,e){let r=this._i.Hr(e);return S.resolve(r)}containsKey(t,e){return S.resolve(this._i.containsKey(e))}};var ds=class{constructor(t,e){this.ui={},this.overlays={},this.ci=new Ze(0),this.li=!1,this.li=!0,this.hi=new Ho,this.referenceDelegate=t(this),this.Pi=new Xo(this),this.indexManager=new Fo,this.remoteDocumentCache=(function(s){return new Qo(s)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new Mo(e),this.Ii=new Go(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new Ko,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let r=this.ui[t.toKey()];return r||(r=new Wo(e,this.referenceDelegate),this.ui[t.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,e,r){k("MemoryPersistence","Starting transaction:",t);let s=new Yo(this.ci.next());return this.referenceDelegate.Ei(),r(s).next((o=>this.referenceDelegate.di(s).next((()=>o)))).toPromise().then((o=>(s.raiseOnCommittedEvent(),o)))}Ai(t,e){return S.or(Object.values(this.ui).map((r=>()=>r.containsKey(t,e))))}},Yo=class extends lo{constructor(t){super(),this.currentSequenceNumber=t}},Zo=class n{constructor(t){this.persistence=t,this.Ri=new nr,this.Vi=null}static mi(t){return new n(t)}get fi(){if(this.Vi)return this.Vi;throw M(60996)}addReference(t,e,r){return this.Ri.addReference(r,e),this.fi.delete(r.toString()),S.resolve()}removeReference(t,e,r){return this.Ri.removeReference(r,e),this.fi.add(r.toString()),S.resolve()}markPotentiallyOrphaned(t,e){return this.fi.add(e.toString()),S.resolve()}removeTarget(t,e){this.Ri.jr(e.targetId).forEach((s=>this.fi.add(s.toString())));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next((s=>{s.forEach((o=>this.fi.add(o.toString())))})).next((()=>r.removeTargetData(t,e)))}Ei(){this.Vi=new Set}di(t){let e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return S.forEach(this.fi,(r=>{let s=O.fromPath(r);return this.gi(t,s).next((o=>{o||e.removeEntry(s,F.min())}))})).next((()=>(this.Vi=null,e.apply(t))))}updateLimboDocument(t,e){return this.gi(t,e).next((r=>{r?this.fi.delete(e.toString()):this.fi.add(e.toString())}))}Ti(t){return 0}gi(t,e){return S.or([()=>S.resolve(this.Ri.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Ai(t,e)])}},fs=class n{constructor(t,e){this.persistence=t,this.pi=new Xt((r=>Eg(r.path)),((r,s)=>r.isEqual(s))),this.garbageCollector=m_(this,e)}static mi(t,e){return new n(t,e)}Ei(){}di(t){return S.resolve()}forEachTarget(t,e){return this.persistence.getTargetCache().forEachTarget(t,e)}gr(t){let e=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next((r=>e.next((s=>r+s))))}wr(t){let e=0;return this.pr(t,(r=>{e++})).next((()=>e))}pr(t,e){return S.forEach(this.pi,((r,s)=>this.br(t,r,s).next((o=>o?S.resolve():e(s)))))}removeTargets(t,e,r){return this.persistence.getTargetCache().removeTargets(t,e,r)}removeOrphanedDocuments(t,e){let r=0,s=this.persistence.getRemoteDocumentCache(),o=s.newChangeBuffer();return s.ii(t,(a=>this.br(t,a,e).next((l=>{l||(r++,o.removeEntry(a,F.min()))})))).next((()=>o.apply(t))).next((()=>r))}markPotentiallyOrphaned(t,e){return this.pi.set(e,t.currentSequenceNumber),S.resolve()}removeTarget(t,e){let r=e.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,r)}addReference(t,e,r){return this.pi.set(r,t.currentSequenceNumber),S.resolve()}removeReference(t,e,r){return this.pi.set(r,t.currentSequenceNumber),S.resolve()}updateLimboDocument(t,e){return this.pi.set(e,t.currentSequenceNumber),S.resolve()}Ti(t){let e=t.key.toString().length;return t.isFoundDocument()&&(e+=Qr(t.data.value)),e}br(t,e,r){return S.or([()=>this.persistence.Ai(t,e),()=>this.persistence.getTargetCache().containsKey(t,e),()=>{let s=this.pi.get(e);return S.resolve(s!==void 0&&s>r)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}};var ta=class n{constructor(t,e,r,s){this.targetId=t,this.fromCache=e,this.Es=r,this.ds=s}static As(t,e){let r=$(),s=$();for(let o of e.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:s=s.add(o.doc.key)}return new n(t,e.fromCache,r,s)}};var ea=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}};var na=class{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return Eu()?8:wg(Iu())>0?6:4})()}initialize(t,e){this.ps=t,this.indexManager=e,this.Rs=!0}getDocumentsMatchingQuery(t,e,r,s){let o={result:null};return this.ys(t,e).next((a=>{o.result=a})).next((()=>{if(!o.result)return this.ws(t,e,s,r).next((a=>{o.result=a}))})).next((()=>{if(o.result)return;let a=new ea;return this.Ss(t,e,a).next((l=>{if(o.result=l,this.Vs)return this.bs(t,e,a,l.size)}))})).next((()=>o.result))}bs(t,e,r,s){return r.documentReadCount<this.fs?(Ue()<=U.DEBUG&&k("QueryEngine","SDK will not create cache indexes for query:",Be(e),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),S.resolve()):(Ue()<=U.DEBUG&&k("QueryEngine","Query:",Be(e),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(Ue()<=U.DEBUG&&k("QueryEngine","The SDK decides to create cache indexes for query:",Be(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Bt(e))):S.resolve())}ys(t,e){if(xl(e))return S.resolve(null);let r=Bt(e);return this.indexManager.getIndexType(t,r).next((s=>s===0?null:(e.limit!==null&&s===1&&(e=os(e,null,"F"),r=Bt(e)),this.indexManager.getDocumentsMatchingTarget(t,r).next((o=>{let a=$(...o);return this.ps.getDocuments(t,a).next((l=>this.indexManager.getMinOffset(t,r).next((h=>{let f=this.Ds(e,l);return this.Cs(e,f,a,h.readTime)?this.ys(t,os(e,null,"F")):this.vs(t,f,e,h)}))))})))))}ws(t,e,r,s){return xl(e)||s.isEqual(F.min())?S.resolve(null):this.ps.getDocuments(t,r).next((o=>{let a=this.Ds(e,o);return this.Cs(e,a,r,s)?S.resolve(null):(Ue()<=U.DEBUG&&k("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Be(e)),this.vs(t,a,e,mg(s,Gn)).next((l=>l)))}))}Ds(t,e){let r=new ht(Fh(t));return e.forEach(((s,o)=>{Ns(t,o)&&(r=r.add(o))})),r}Cs(t,e,r,s){if(t.limit===null)return!1;if(r.size!==e.size)return!0;let o=t.limitType==="F"?e.last():e.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(s)>0)}Ss(t,e,r){return Ue()<=U.DEBUG&&k("QueryEngine","Using full collection scan to execute query:",Be(e)),this.ps.getDocumentsMatchingQuery(t,e,xe.min(),r)}vs(t,e,r,s){return this.ps.getDocumentsMatchingQuery(t,r,s).next((o=>(e.forEach((a=>{o=o.insert(a.key,a)})),o)))}};var Ha="LocalStore",g_=3e8,ra=class{constructor(t,e,r,s){this.persistence=t,this.Fs=e,this.serializer=s,this.Ms=new et(B),this.xs=new Xt((o=>$a(o)),Ga),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(r)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new $o(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(e=>t.collect(e,this.Ms)))}};function __(n,t,e,r){return new ra(n,t,e,r)}async function nd(n,t){let e=j(n);return await e.persistence.runTransaction("Handle user change","readonly",(r=>{let s;return e.mutationQueue.getAllMutationBatches(r).next((o=>(s=o,e.Bs(t),e.mutationQueue.getAllMutationBatches(r)))).next((o=>{let a=[],l=[],h=$();for(let f of s){a.push(f.batchId);for(let p of f.mutations)h=h.add(p.key)}for(let f of o){l.push(f.batchId);for(let p of f.mutations)h=h.add(p.key)}return e.localDocuments.getDocuments(r,h).next((f=>({Ls:f,removedBatchIds:a,addedBatchIds:l})))}))}))}function rd(n){let t=j(n);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Pi.getLastRemoteSnapshotVersion(e)))}function y_(n,t){let e=j(n),r=t.snapshotVersion,s=e.Ms;return e.persistence.runTransaction("Apply remote event","readwrite-primary",(o=>{let a=e.Ns.newChangeBuffer({trackRemovals:!0});s=e.Ms;let l=[];t.targetChanges.forEach(((p,I)=>{let b=s.get(I);if(!b)return;l.push(e.Pi.removeMatchingKeys(o,p.removedDocuments,I).next((()=>e.Pi.addMatchingKeys(o,p.addedDocuments,I))));let C=b.withSequenceNumber(o.currentSequenceNumber);t.targetMismatches.get(I)!==null?C=C.withResumeToken(wt.EMPTY_BYTE_STRING,F.min()).withLastLimboFreeSnapshotVersion(F.min()):p.resumeToken.approximateByteSize()>0&&(C=C.withResumeToken(p.resumeToken,r)),s=s.insert(I,C),(function(V,D,G){return V.resumeToken.approximateByteSize()===0||D.snapshotVersion.toMicroseconds()-V.snapshotVersion.toMicroseconds()>=g_?!0:G.addedDocuments.size+G.modifiedDocuments.size+G.removedDocuments.size>0})(b,C,p)&&l.push(e.Pi.updateTargetData(o,C))}));let h=fe(),f=$();if(t.documentUpdates.forEach((p=>{t.resolvedLimboDocuments.has(p)&&l.push(e.persistence.referenceDelegate.updateLimboDocument(o,p))})),l.push(w_(o,a,t.documentUpdates).next((p=>{h=p.ks,f=p.qs}))),!r.isEqual(F.min())){let p=e.Pi.getLastRemoteSnapshotVersion(o).next((I=>e.Pi.setTargetsMetadata(o,o.currentSequenceNumber,r)));l.push(p)}return S.waitFor(l).next((()=>a.apply(o))).next((()=>e.localDocuments.getLocalViewOfDocuments(o,h,f))).next((()=>h))})).then((o=>(e.Ms=s,o)))}function w_(n,t,e){let r=$(),s=$();return e.forEach((o=>r=r.add(o))),t.getEntries(n,r).next((o=>{let a=fe();return e.forEach(((l,h)=>{let f=o.get(l);h.isFoundDocument()!==f.isFoundDocument()&&(s=s.add(l)),h.isNoDocument()&&h.version.isEqual(F.min())?(t.removeEntry(l,h.readTime),a=a.insert(l,h)):!f.isValidDocument()||h.version.compareTo(f.version)>0||h.version.compareTo(f.version)===0&&f.hasPendingWrites?(t.addEntry(h),a=a.insert(l,h)):k(Ha,"Ignoring outdated watch update for ",l,". Current version:",f.version," Watch version:",h.version)})),{ks:a,qs:s}}))}function I_(n,t){let e=j(n);return e.persistence.runTransaction("Allocate target","readwrite",(r=>{let s;return e.Pi.getTargetData(r,t).next((o=>o?(s=o,S.resolve(s)):e.Pi.allocateTargetId(r).next((a=>(s=new tr(t,a,"TargetPurposeListen",r.currentSequenceNumber),e.Pi.addTargetData(r,s).next((()=>s)))))))})).then((r=>{let s=e.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(e.Ms=e.Ms.insert(r.targetId,r),e.xs.set(t,r.targetId)),r}))}async function sa(n,t,e){let r=j(n),s=r.Ms.get(t),o=e?"readwrite":"readwrite-primary";try{e||await r.persistence.runTransaction("Release target",o,(a=>r.persistence.referenceDelegate.removeTarget(a,s)))}catch(a){if(!fn(a))throw a;k(Ha,`Failed to update sequence numbers for target ${t}: ${a}`)}r.Ms=r.Ms.remove(t),r.xs.delete(s.target)}function zl(n,t,e){let r=j(n),s=F.min(),o=$();return r.persistence.runTransaction("Execute query","readwrite",(a=>(function(h,f,p){let I=j(h),b=I.xs.get(p);return b!==void 0?S.resolve(I.Ms.get(b)):I.Pi.getTargetData(f,p)})(r,a,Bt(t)).next((l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(a,l.targetId).next((h=>{o=h}))})).next((()=>r.Fs.getDocumentsMatchingQuery(a,t,e?s:F.min(),e?o:$()))).next((l=>(T_(r,Ug(t),l),{documents:l,Qs:o})))))}function T_(n,t,e){let r=n.Os.get(t)||F.min();e.forEach(((s,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)})),n.Os.set(t,r)}var ps=class{constructor(){this.activeTargetIds=Gg()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){let t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}};var ia=class{constructor(){this.Mo=new ps,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,r){}addLocalQueryTarget(t,e=!0){return e&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,e,r){this.xo[t]=e}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new ps,Promise.resolve()}handleUserChange(t,e,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}};var oa=class{Oo(t){}shutdown(){}};var $l="ConnectivityMonitor",ms=class{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){k($l,"Network connectivity changed: AVAILABLE");for(let t of this.qo)t(0)}ko(){k($l,"Network connectivity changed: UNAVAILABLE");for(let t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Wr=null;function aa(){return Wr===null?Wr=(function(){return 268435456+Math.round(2147483648*Math.random())})():Wr++,"0x"+Wr.toString(16)}var Yi="RestConnection",E_={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},ca=class{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let e=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=e+"://"+t.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===rs?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(t,e,r,s,o){let a=aa(),l=this.zo(t,e.toUriEncodedString());k(Yi,`Sending RPC '${t}' ${a}:`,l,r);let h={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(h,s,o);let{host:f}=new URL(l),p=Te(f);return this.Jo(t,l,h,r,p).then((I=>(k(Yi,`Received RPC '${t}' ${a}: `,I),I)),(I=>{throw Xe(Yi,`RPC '${t}' ${a} failed with error: `,I,"url: ",l,"request:",r),I}))}Ho(t,e,r,s,o,a){return this.Go(t,e,r,s,o)}jo(t,e,r){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+dn})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach(((s,o)=>t[o]=s)),r&&r.headers.forEach(((s,o)=>t[o]=s))}zo(t,e){let r=E_[t];return`${this.Uo}/v1/${e}:${r}`}terminate(){}};var ua=class{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}};var yt="WebChannelConnection",la=class extends ca{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,e,r,s,o){let a=aa();return new Promise(((l,h)=>{let f=new $i;f.setWithCredentials(!0),f.listenOnce(Gi.COMPLETE,(()=>{try{switch(f.getLastErrorCode()){case Ln.NO_ERROR:let I=f.getResponseJson();k(yt,`XHR for RPC '${t}' ${a} received:`,JSON.stringify(I)),l(I);break;case Ln.TIMEOUT:k(yt,`RPC '${t}' ${a} timed out`),h(new x(R.DEADLINE_EXCEEDED,"Request time out"));break;case Ln.HTTP_ERROR:let b=f.getStatus();if(k(yt,`RPC '${t}' ${a} failed with status:`,b,"response text:",f.getResponseText()),b>0){let C=f.getResponseJson();Array.isArray(C)&&(C=C[0]);let N=C?.error;if(N&&N.status&&N.message){let V=(function(G){let K=G.toLowerCase().replace(/_/g,"-");return Object.values(R).indexOf(K)>=0?K:R.UNKNOWN})(N.status);h(new x(V,N.message))}else h(new x(R.UNKNOWN,"Server responded with status "+f.getStatus()))}else h(new x(R.UNAVAILABLE,"Connection failed."));break;default:M(9055,{l_:t,streamId:a,h_:f.getLastErrorCode(),P_:f.getLastError()})}}finally{k(yt,`RPC '${t}' ${a} completed.`)}}));let p=JSON.stringify(s);k(yt,`RPC '${t}' ${a} sending request:`,s),f.send(e,"POST",p,r,15)}))}T_(t,e,r){let s=aa(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],a=Wi(),l=Hi(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(h.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(h.useFetchStreams=!0),this.jo(h.initMessageHeaders,e,r),h.encodeInitMessageHeaders=!0;let p=o.join("");k(yt,`Creating RPC '${t}' stream ${s}: ${p}`,h);let I=a.createWebChannel(p,h);this.I_(I);let b=!1,C=!1,N=new ua({Yo:D=>{C?k(yt,`Not sending because RPC '${t}' stream ${s} is closed:`,D):(b||(k(yt,`Opening RPC '${t}' stream ${s} transport.`),I.open(),b=!0),k(yt,`RPC '${t}' stream ${s} sending:`,D),I.send(D))},Zo:()=>I.close()}),V=(D,G,K)=>{D.listen(G,(z=>{try{K(z)}catch(H){setTimeout((()=>{throw H}),0)}}))};return V(I,Le.EventType.OPEN,(()=>{C||(k(yt,`RPC '${t}' stream ${s} transport opened.`),N.o_())})),V(I,Le.EventType.CLOSE,(()=>{C||(C=!0,k(yt,`RPC '${t}' stream ${s} transport closed`),N.a_(),this.E_(I))})),V(I,Le.EventType.ERROR,(D=>{C||(C=!0,Xe(yt,`RPC '${t}' stream ${s} transport errored. Name:`,D.name,"Message:",D.message),N.a_(new x(R.UNAVAILABLE,"The operation could not be completed")))})),V(I,Le.EventType.MESSAGE,(D=>{if(!C){let G=D.data[0];X(!!G,16349);let K=G,z=K?.error||K[0]?.error;if(z){k(yt,`RPC '${t}' stream ${s} received error:`,z);let H=z.status,ot=(function(m){let _=nt[m];if(_!==void 0)return Kh(_)})(H),Y=z.message;ot===void 0&&(ot=R.INTERNAL,Y="Unknown error status: "+H+" with message "+z.message),C=!0,N.a_(new x(ot,Y)),I.close()}else k(yt,`RPC '${t}' stream ${s} received:`,G),N.u_(G)}})),V(l,Ki.STAT_EVENT,(D=>{D.stat===Gr.PROXY?k(yt,`RPC '${t}' stream ${s} detected buffering proxy`):D.stat===Gr.NOPROXY&&k(yt,`RPC '${t}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{N.__()}),0),N}terminate(){this.c_.forEach((t=>t.close())),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter((e=>e===t))}};function Zi(){return typeof document<"u"?document:null}function Vs(n){return new ko(n,!0)}var gs=class{constructor(t,e,r=1e3,s=1.5,o=6e4){this.Mi=t,this.timerId=e,this.d_=r,this.A_=s,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();let e=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,e-r);s>0&&k("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${e} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),t()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}};var Gl="PersistentStream",ha=class{constructor(t,e,r,s,o,a,l,h){this.Mi=t,this.S_=r,this.b_=s,this.connection=o,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=h,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new gs(t,e)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,e){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():e&&e.code===R.RESOURCE_EXHAUSTED?(Wt(e.toString()),Wt("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):e&&e.code===R.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(e)}K_(){}auth(){this.state=1;let t=this.W_(this.D_),e=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,s])=>{this.D_===e&&this.G_(r,s)}),(r=>{t((()=>{let s=new x(R.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)}))}))}G_(t,e){let r=this.W_(this.D_);this.stream=this.j_(t,e),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((s=>{r((()=>this.z_(s)))})),this.stream.onMessage((s=>{r((()=>++this.F_==1?this.J_(s):this.onNext(s)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(t){return k(Gl,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return e=>{this.Mi.enqueueAndForget((()=>this.D_===t?e():(k(Gl,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}},da=class extends ha{constructor(t,e,r,s,o,a){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,r,s,a),this.serializer=o}j_(t,e){return this.connection.T_("Listen",t,e)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();let e=i_(this.serializer,t),r=(function(o){if(!("targetChange"in o))return F.min();let a=o.targetChange;return a.targetIds&&a.targetIds.length?F.min():a.readTime?Ke(a.readTime):F.min()})(t);return this.listener.H_(e,r)}Y_(t){let e={};e.database=Ul(this.serializer),e.addTarget=(function(o,a){let l,h=a.target;if(l=bo(h)?{documents:o_(o,h)}:{query:a_(o,h).ft},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=Hh(o,a.resumeToken);let f=No(o,a.expectedCount);f!==null&&(l.expectedCount=f)}else if(a.snapshotVersion.compareTo(F.min())>0){l.readTime=Vo(o,a.snapshotVersion.toTimestamp());let f=No(o,a.expectedCount);f!==null&&(l.expectedCount=f)}return l})(this.serializer,t);let r=u_(this.serializer,t);r&&(e.labels=r),this.q_(e)}Z_(t){let e={};e.database=Ul(this.serializer),e.removeTarget=t,this.q_(e)}};var fa=class{},pa=class extends fa{constructor(t,e,r,s){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new x(R.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,e,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,a])=>this.connection.Go(t,Oo(e,r),s,o,a))).catch((o=>{throw o.name==="FirebaseError"?(o.code===R.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new x(R.UNKNOWN,o.toString())}))}Ho(t,e,r,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,l])=>this.connection.Ho(t,Oo(e,r),s,a,l,o))).catch((a=>{throw a.name==="FirebaseError"?(a.code===R.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new x(R.UNKNOWN,a.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}},ma=class{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){let e=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Wt(e),this.aa=!1):k("OnlineStateTracker",e)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}};var un="RemoteStore",ga=class{constructor(t,e,r,s,o){this.localStore=t,this.datastore=e,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo((a=>{r.enqueueAndForget((async()=>{ur(this)&&(k(un,"Restarting streams for network reachability change."),await(async function(h){let f=j(h);f.Ea.add(4),await cr(f),f.Ra.set("Unknown"),f.Ea.delete(4),await Os(f)})(this))}))})),this.Ra=new ma(r,s)}};async function Os(n){if(ur(n))for(let t of n.da)await t(!0)}async function cr(n){for(let t of n.da)await t(!1)}function sd(n,t){let e=j(n);e.Ia.has(t.targetId)||(e.Ia.set(t.targetId,t),Xa(e)?Ja(e):mn(e).O_()&&Qa(e,t))}function Wa(n,t){let e=j(n),r=mn(e);e.Ia.delete(t),r.O_()&&id(e,t),e.Ia.size===0&&(r.O_()?r.L_():ur(e)&&e.Ra.set("Unknown"))}function Qa(n,t){if(n.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(F.min())>0){let e=n.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(e)}mn(n).Y_(t)}function id(n,t){n.Va.Ue(t),mn(n).Z_(t)}function Ja(n){n.Va=new xo({getRemoteKeysForTarget:t=>n.remoteSyncer.getRemoteKeysForTarget(t),At:t=>n.Ia.get(t)||null,ht:()=>n.datastore.serializer.databaseId}),mn(n).start(),n.Ra.ua()}function Xa(n){return ur(n)&&!mn(n).x_()&&n.Ia.size>0}function ur(n){return j(n).Ea.size===0}function od(n){n.Va=void 0}async function v_(n){n.Ra.set("Online")}async function b_(n){n.Ia.forEach(((t,e)=>{Qa(n,t)}))}async function A_(n,t){od(n),Xa(n)?(n.Ra.ha(t),Ja(n)):n.Ra.set("Unknown")}async function S_(n,t,e){if(n.Ra.set("Online"),t instanceof us&&t.state===2&&t.cause)try{await(async function(s,o){let a=o.cause;for(let l of o.targetIds)s.Ia.has(l)&&(await s.remoteSyncer.rejectListen(l,a),s.Ia.delete(l),s.Va.removeTarget(l))})(n,t)}catch(r){k(un,"Failed to remove targets %s: %s ",t.targetIds.join(","),r),await Kl(n,r)}else if(t instanceof Ge?n.Va.Ze(t):t instanceof cs?n.Va.st(t):n.Va.tt(t),!e.isEqual(F.min()))try{let r=await rd(n.localStore);e.compareTo(r)>=0&&await(function(o,a){let l=o.Va.Tt(a);return l.targetChanges.forEach(((h,f)=>{if(h.resumeToken.approximateByteSize()>0){let p=o.Ia.get(f);p&&o.Ia.set(f,p.withResumeToken(h.resumeToken,a))}})),l.targetMismatches.forEach(((h,f)=>{let p=o.Ia.get(h);if(!p)return;o.Ia.set(h,p.withResumeToken(wt.EMPTY_BYTE_STRING,p.snapshotVersion)),id(o,h);let I=new tr(p.target,h,f,p.sequenceNumber);Qa(o,I)})),o.remoteSyncer.applyRemoteEvent(l)})(n,e)}catch(r){k(un,"Failed to raise snapshot:",r),await Kl(n,r)}}async function Kl(n,t,e){if(!fn(t))throw t;n.Ea.add(1),await cr(n),n.Ra.set("Offline"),e||(e=()=>rd(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{k(un,"Retrying IndexedDB access"),await e(),n.Ea.delete(1),await Os(n)}))}async function Hl(n,t){let e=j(n);e.asyncQueue.verifyOperationInProgress(),k(un,"RemoteStore received new credentials");let r=ur(e);e.Ea.add(3),await cr(e),r&&e.Ra.set("Unknown"),await e.remoteSyncer.handleCredentialChange(t),e.Ea.delete(3),await Os(e)}async function R_(n,t){let e=j(n);t?(e.Ea.delete(2),await Os(e)):t||(e.Ea.add(2),await cr(e),e.Ra.set("Unknown"))}function mn(n){return n.ma||(n.ma=(function(e,r,s){let o=j(e);return o.sa(),new da(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)})(n.datastore,n.asyncQueue,{Xo:v_.bind(null,n),t_:b_.bind(null,n),r_:A_.bind(null,n),H_:S_.bind(null,n)}),n.da.push((async t=>{t?(n.ma.B_(),Xa(n)?Ja(n):n.Ra.set("Unknown")):(await n.ma.stop(),od(n))}))),n.ma}var _a=class n{constructor(t,e,r,s,o){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=r,this.op=s,this.removalCallback=o,this.deferred=new Ht,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((a=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,e,r,s,o){let a=Date.now()+r,l=new n(t,e,a,s,o);return l.start(r),l}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new x(R.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function ad(n,t){if(Wt("AsyncQueue",`${t}: ${n}`),fn(n))return new x(R.UNAVAILABLE,`${t}: ${n}`);throw n}var _s=class n{static emptySet(t){return new n(t.comparator)}constructor(t){this.comparator=t?(e,r)=>t(e,r)||O.comparator(e.key,r.key):(e,r)=>O.comparator(e.key,r.key),this.keyedMap=Un(),this.sortedSet=new et(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){let e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((e,r)=>(t(e),!1)))}add(t){let e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){let e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof n)||this.size!==t.size)return!1;let e=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;e.hasNext();){let s=e.getNext().key,o=r.getNext().key;if(!s.isEqual(o))return!1}return!0}toString(){let t=[];return this.forEach((e=>{t.push(e.toString())})),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,e){let r=new n;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=e,r}};var ys=class{constructor(){this.ga=new et(O.comparator)}track(t){let e=t.doc.key,r=this.ga.get(e);r?t.type!==0&&r.type===3?this.ga=this.ga.insert(e,t):t.type===3&&r.type!==1?this.ga=this.ga.insert(e,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.ga=this.ga.insert(e,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.ga=this.ga.insert(e,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.ga=this.ga.remove(e):t.type===1&&r.type===2?this.ga=this.ga.insert(e,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.ga=this.ga.insert(e,{type:2,doc:t.doc}):M(63341,{Rt:t,pa:r}):this.ga=this.ga.insert(e,t)}ya(){let t=[];return this.ga.inorderTraversal(((e,r)=>{t.push(r)})),t}},ln=class n{constructor(t,e,r,s,o,a,l,h,f){this.query=t,this.docs=e,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=o,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=h,this.hasCachedResults=f}static fromInitialDocuments(t,e,r,s,o){let a=[];return e.forEach((l=>{a.push({type:0,doc:l})})),new n(t,e,_s.emptySet(e),a,r,s,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&ks(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;let e=this.docChanges,r=t.docChanges;if(e.length!==r.length)return!1;for(let s=0;s<e.length;s++)if(e[s].type!==r[s].type||!e[s].doc.isEqual(r[s].doc))return!1;return!0}};var ya=class{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((t=>t.Da()))}},wa=class{constructor(){this.queries=Wl(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(e,r){let s=j(e),o=s.queries;s.queries=Wl(),o.forEach(((a,l)=>{for(let h of l.Sa)h.onError(r)}))})(this,new x(R.ABORTED,"Firestore shutting down"))}};function Wl(){return new Xt((n=>Mh(n)),ks)}async function C_(n,t){let e=j(n),r=3,s=t.query,o=e.queries.get(s);o?!o.ba()&&t.Da()&&(r=2):(o=new ya,r=t.Da()?0:1);try{switch(r){case 0:o.wa=await e.onListen(s,!0);break;case 1:o.wa=await e.onListen(s,!1);break;case 2:await e.onFirstRemoteStoreListen(s)}}catch(a){let l=ad(a,`Initialization of query '${Be(t.query)}' failed`);return void t.onError(l)}e.queries.set(s,o),o.Sa.push(t),t.va(e.onlineState),o.wa&&t.Fa(o.wa)&&Ya(e)}async function P_(n,t){let e=j(n),r=t.query,s=3,o=e.queries.get(r);if(o){let a=o.Sa.indexOf(t);a>=0&&(o.Sa.splice(a,1),o.Sa.length===0?s=t.Da()?0:1:!o.ba()&&t.Da()&&(s=2))}switch(s){case 0:return e.queries.delete(r),e.onUnlisten(r,!0);case 1:return e.queries.delete(r),e.onUnlisten(r,!1);case 2:return e.onLastRemoteStoreUnlisten(r);default:return}}function D_(n,t){let e=j(n),r=!1;for(let s of t){let o=s.query,a=e.queries.get(o);if(a){for(let l of a.Sa)l.Fa(s)&&(r=!0);a.wa=s}}r&&Ya(e)}function x_(n,t,e){let r=j(n),s=r.queries.get(t);if(s)for(let o of s.Sa)o.onError(e);r.queries.delete(t)}function Ya(n){n.Ca.forEach((t=>{t.next()}))}var Ia,Ql;(Ql=Ia||(Ia={})).Ma="default",Ql.Cache="cache";var Ta=class{constructor(t,e,r){this.query=t,this.xa=e,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(t){if(!this.options.includeMetadataChanges){let r=[];for(let s of t.docChanges)s.type!==3&&r.push(s);t=new ln(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),e=!0):this.La(t,this.onlineState)&&(this.ka(t),e=!0),this.Na=t,e}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let e=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),e=!0),e}La(t,e){if(!t.fromCache||!this.Da())return!0;let r=e!=="Offline";return(!this.options.qa||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||e==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;let e=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&this.options.includeMetadataChanges===!0}ka(t){t=ln.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==Ia.Cache}};var ws=class{constructor(t){this.key=t}},Is=class{constructor(t){this.key=t}},Ea=class{constructor(t,e){this.query=t,this.Ya=e,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=$(),this.mutatedKeys=$(),this.eu=Fh(t),this.tu=new _s(this.eu)}get nu(){return this.Ya}ru(t,e){let r=e?e.iu:new ys,s=e?e.tu:this.tu,o=e?e.mutatedKeys:this.mutatedKeys,a=s,l=!1,h=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,f=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(t.inorderTraversal(((p,I)=>{let b=s.get(p),C=Ns(this.query,I)?I:null,N=!!b&&this.mutatedKeys.has(b.key),V=!!C&&(C.hasLocalMutations||this.mutatedKeys.has(C.key)&&C.hasCommittedMutations),D=!1;b&&C?b.data.isEqual(C.data)?N!==V&&(r.track({type:3,doc:C}),D=!0):this.su(b,C)||(r.track({type:2,doc:C}),D=!0,(h&&this.eu(C,h)>0||f&&this.eu(C,f)<0)&&(l=!0)):!b&&C?(r.track({type:0,doc:C}),D=!0):b&&!C&&(r.track({type:1,doc:b}),D=!0,(h||f)&&(l=!0)),D&&(C?(a=a.add(C),o=V?o.add(p):o.delete(p)):(a=a.delete(p),o=o.delete(p)))})),this.query.limit!==null)for(;a.size>this.query.limit;){let p=this.query.limitType==="F"?a.last():a.first();a=a.delete(p.key),o=o.delete(p.key),r.track({type:1,doc:p})}return{tu:a,iu:r,Cs:l,mutatedKeys:o}}su(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,r,s){let o=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;let a=t.iu.ya();a.sort(((p,I)=>(function(C,N){let V=D=>{switch(D){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return M(20277,{Rt:D})}};return V(C)-V(N)})(p.type,I.type)||this.eu(p.doc,I.doc))),this.ou(r),s=s??!1;let l=e&&!s?this._u():[],h=this.Xa.size===0&&this.current&&!s?1:0,f=h!==this.Za;return this.Za=h,a.length!==0||f?{snapshot:new ln(this.query,t.tu,o,a,t.mutatedKeys,h===0,f,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new ys,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach((e=>this.Ya=this.Ya.add(e))),t.modifiedDocuments.forEach((e=>{})),t.removedDocuments.forEach((e=>this.Ya=this.Ya.delete(e))),this.current=t.current)}_u(){if(!this.current)return[];let t=this.Xa;this.Xa=$(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));let e=[];return t.forEach((r=>{this.Xa.has(r)||e.push(new Is(r))})),this.Xa.forEach((r=>{t.has(r)||e.push(new ws(r))})),e}cu(t){this.Ya=t.Qs,this.Xa=$();let e=this.ru(t.documents);return this.applyChanges(e,!0)}lu(){return ln.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}},Za="SyncEngine",va=class{constructor(t,e,r){this.query=t,this.targetId=e,this.view=r}},ba=class{constructor(t){this.key=t,this.hu=!1}},Aa=class{constructor(t,e,r,s,o,a){this.localStore=t,this.remoteStore=e,this.eventManager=r,this.sharedClientState=s,this.currentUser=o,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new Xt((l=>Mh(l)),ks),this.Iu=new Map,this.Eu=new Set,this.du=new et(O.comparator),this.Au=new Map,this.Ru=new nr,this.Vu={},this.mu=new Map,this.fu=er.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}};async function k_(n,t,e=!0){let r=dd(n),s,o=r.Tu.get(t);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),s=o.view.lu()):s=await cd(r,t,e,!0),s}async function N_(n,t){let e=dd(n);await cd(e,t,!0,!1)}async function cd(n,t,e,r){let s=await I_(n.localStore,Bt(t)),o=s.targetId,a=n.sharedClientState.addLocalQueryTarget(o,e),l;return r&&(l=await V_(n,t,o,a==="current",s.resumeToken)),n.isPrimaryClient&&e&&sd(n.remoteStore,s),l}async function V_(n,t,e,r,s){n.pu=(I,b,C)=>(async function(V,D,G,K){let z=D.view.ru(G);z.Cs&&(z=await zl(V.localStore,D.query,!1).then((({documents:w})=>D.view.ru(w,z))));let H=K&&K.targetChanges.get(D.targetId),ot=K&&K.targetMismatches.get(D.targetId)!=null,Y=D.view.applyChanges(z,V.isPrimaryClient,H,ot);return Xl(V,D.targetId,Y.au),Y.snapshot})(n,I,b,C);let o=await zl(n.localStore,t,!0),a=new Ea(t,o.Qs),l=a.ru(o.documents),h=Zn.createSynthesizedTargetChangeForCurrentChange(e,r&&n.onlineState!=="Offline",s),f=a.applyChanges(l,n.isPrimaryClient,h);Xl(n,e,f.au);let p=new va(t,e,a);return n.Tu.set(t,p),n.Iu.has(e)?n.Iu.get(e).push(t):n.Iu.set(e,[t]),f.snapshot}async function O_(n,t,e){let r=j(n),s=r.Tu.get(t),o=r.Iu.get(s.targetId);if(o.length>1)return r.Iu.set(s.targetId,o.filter((a=>!ks(a,t)))),void r.Tu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await sa(r.localStore,s.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(s.targetId),e&&Wa(r.remoteStore,s.targetId),Sa(r,s.targetId)})).catch(Ps)):(Sa(r,s.targetId),await sa(r.localStore,s.targetId,!0))}async function M_(n,t){let e=j(n),r=e.Tu.get(t),s=e.Iu.get(r.targetId);e.isPrimaryClient&&s.length===1&&(e.sharedClientState.removeLocalQueryTarget(r.targetId),Wa(e.remoteStore,r.targetId))}async function ud(n,t){let e=j(n);try{let r=await y_(e.localStore,t);t.targetChanges.forEach(((s,o)=>{let a=e.Au.get(o);a&&(X(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?a.hu=!0:s.modifiedDocuments.size>0?X(a.hu,14607):s.removedDocuments.size>0&&(X(a.hu,42227),a.hu=!1))})),await hd(e,r,t)}catch(r){await Ps(r)}}function Jl(n,t,e){let r=j(n);if(r.isPrimaryClient&&e===0||!r.isPrimaryClient&&e===1){let s=[];r.Tu.forEach(((o,a)=>{let l=a.view.va(t);l.snapshot&&s.push(l.snapshot)})),(function(a,l){let h=j(a);h.onlineState=l;let f=!1;h.queries.forEach(((p,I)=>{for(let b of I.Sa)b.va(l)&&(f=!0)})),f&&Ya(h)})(r.eventManager,t),s.length&&r.Pu.H_(s),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function F_(n,t,e){let r=j(n);r.sharedClientState.updateQueryState(t,"rejected",e);let s=r.Au.get(t),o=s&&s.key;if(o){let a=new et(O.comparator);a=a.insert(o,kt.newNoDocument(o,F.min()));let l=$().add(o),h=new as(F.min(),new Map,new et(B),a,l);await ud(r,h),r.du=r.du.remove(o),r.Au.delete(t),tc(r)}else await sa(r.localStore,t,!1).then((()=>Sa(r,t,e))).catch(Ps)}function Sa(n,t,e=null){n.sharedClientState.removeLocalQueryTarget(t);for(let r of n.Iu.get(t))n.Tu.delete(r),e&&n.Pu.yu(r,e);n.Iu.delete(t),n.isPrimaryClient&&n.Ru.jr(t).forEach((r=>{n.Ru.containsKey(r)||ld(n,r)}))}function ld(n,t){n.Eu.delete(t.path.canonicalString());let e=n.du.get(t);e!==null&&(Wa(n.remoteStore,e),n.du=n.du.remove(t),n.Au.delete(e),tc(n))}function Xl(n,t,e){for(let r of e)r instanceof ws?(n.Ru.addReference(r.key,t),L_(n,r)):r instanceof Is?(k(Za,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,t),n.Ru.containsKey(r.key)||ld(n,r.key)):M(19791,{wu:r})}function L_(n,t){let e=t.key,r=e.path.canonicalString();n.du.get(e)||n.Eu.has(r)||(k(Za,"New document in limbo: "+e),n.Eu.add(r),tc(n))}function tc(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){let t=n.Eu.values().next().value;n.Eu.delete(t);let e=new O(tt.fromString(t)),r=n.fu.next();n.Au.set(r,new ba(e)),n.du=n.du.insert(e,r),sd(n.remoteStore,new tr(Bt(Vh(e.path)),r,"TargetPurposeLimboResolution",Ze.ce))}}async function hd(n,t,e){let r=j(n),s=[],o=[],a=[];r.Tu.isEmpty()||(r.Tu.forEach(((l,h)=>{a.push(r.pu(h,t,e).then((f=>{if((f||e)&&r.isPrimaryClient){let p=f?!f.fromCache:e?.targetChanges.get(h.targetId)?.current;r.sharedClientState.updateQueryState(h.targetId,p?"current":"not-current")}if(f){s.push(f);let p=ta.As(h.targetId,f);o.push(p)}})))})),await Promise.all(a),r.Pu.H_(s),await(async function(h,f){let p=j(h);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",(I=>S.forEach(f,(b=>S.forEach(b.Es,(C=>p.persistence.referenceDelegate.addReference(I,b.targetId,C))).next((()=>S.forEach(b.ds,(C=>p.persistence.referenceDelegate.removeReference(I,b.targetId,C)))))))))}catch(I){if(!fn(I))throw I;k(Ha,"Failed to update sequence numbers: "+I)}for(let I of f){let b=I.targetId;if(!I.fromCache){let C=p.Ms.get(b),N=C.snapshotVersion,V=C.withLastLimboFreeSnapshotVersion(N);p.Ms=p.Ms.insert(b,V)}}})(r.localStore,o))}async function U_(n,t){let e=j(n);if(!e.currentUser.isEqual(t)){k(Za,"User change. New user:",t.toKey());let r=await nd(e.localStore,t);e.currentUser=t,(function(o,a){o.mu.forEach((l=>{l.forEach((h=>{h.reject(new x(R.CANCELLED,a))}))})),o.mu.clear()})(e,"'waitForPendingWrites' promise is rejected due to a user change."),e.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await hd(e,r.Ls)}}function B_(n,t){let e=j(n),r=e.Au.get(t);if(r&&r.hu)return $().add(r.key);{let s=$(),o=e.Iu.get(t);if(!o)return s;for(let a of o){let l=e.Tu.get(a);s=s.unionWith(l.view.nu)}return s}}function dd(n){let t=j(n);return t.remoteStore.remoteSyncer.applyRemoteEvent=ud.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=B_.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=F_.bind(null,t),t.Pu.H_=D_.bind(null,t.eventManager),t.Pu.yu=x_.bind(null,t.eventManager),t}var hn=class{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Vs(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,e){return null}Mu(t,e){return null}vu(t){return __(this.persistence,new na,t.initialUser,this.serializer)}Cu(t){return new ds(Zo.mi,this.serializer)}Du(t){return new ia}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}};hn.provider={build:()=>new hn};var Ra=class extends hn{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,e){X(this.persistence.referenceDelegate instanceof fs,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new Bo(r,t.asyncQueue,e)}Cu(t){let e=this.cacheSizeBytes!==void 0?Pt.withCacheSize(this.cacheSizeBytes):Pt.DEFAULT;return new ds((r=>fs.mi(r,e)),this.serializer)}};var rr=class{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Jl(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=U_.bind(null,this.syncEngine),await R_(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new wa})()}createDatastore(t){let e=Vs(t.databaseInfo.databaseId),r=(function(o){return new la(o)})(t.databaseInfo);return(function(o,a,l,h){return new pa(o,a,l,h)})(t.authCredentials,t.appCheckCredentials,r,e)}createRemoteStore(t){return(function(r,s,o,a,l){return new ga(r,s,o,a,l)})(this.localStore,this.datastore,t.asyncQueue,(e=>Jl(this.syncEngine,e,0)),(function(){return ms.v()?new ms:new oa})())}createSyncEngine(t,e){return(function(s,o,a,l,h,f,p){let I=new Aa(s,o,a,l,h,f);return p&&(I.gu=!0),I})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}async terminate(){await(async function(e){let r=j(e);k(un,"RemoteStore shutting down."),r.Ea.add(5),await cr(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}};rr.provider={build:()=>new rr};var Ca=class{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):Wt("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,e){setTimeout((()=>{this.muted||t(e)}),0)}};var pe="FirestoreClient",Pa=class{constructor(t,e,r,s,o){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=r,this.databaseInfo=s,this.user=lt.UNAUTHENTICATED,this.clientId=Zr.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,(async a=>{k(pe,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a})),this.appCheckCredentials.start(r,(a=>(k(pe,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();let t=new Ht;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){let r=ad(e,"Failed to shutdown persistence");t.reject(r)}})),t.promise}};async function to(n,t){n.asyncQueue.verifyOperationInProgress(),k(pe,"Initializing OfflineComponentProvider");let e=n.configuration;await t.initialize(e);let r=e.initialUser;n.setCredentialChangeListener((async s=>{r.isEqual(s)||(await nd(t.localStore,s),r=s)})),t.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=t}async function Yl(n,t){n.asyncQueue.verifyOperationInProgress();let e=await q_(n);k(pe,"Initializing OnlineComponentProvider"),await t.initialize(e,n.configuration),n.setCredentialChangeListener((r=>Hl(t.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,s)=>Hl(t.remoteStore,s))),n._onlineComponents=t}async function q_(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){k(pe,"Using user provided OfflineComponentProvider");try{await to(n,n._uninitializedComponentsProvider._offline)}catch(t){let e=t;if(!(function(s){return s.name==="FirebaseError"?s.code===R.FAILED_PRECONDITION||s.code===R.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(e))throw e;Xe("Error using user provided cache. Falling back to memory cache: "+e),await to(n,new hn)}}else k(pe,"Using default OfflineComponentProvider"),await to(n,new Ra(void 0));return n._offlineComponents}async function j_(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(k(pe,"Using user provided OnlineComponentProvider"),await Yl(n,n._uninitializedComponentsProvider._online)):(k(pe,"Using default OnlineComponentProvider"),await Yl(n,new rr))),n._onlineComponents}async function z_(n){let t=await j_(n),e=t.eventManager;return e.onListen=k_.bind(null,t.syncEngine),e.onUnlisten=O_.bind(null,t.syncEngine),e.onFirstRemoteStoreListen=N_.bind(null,t.syncEngine),e.onLastRemoteStoreUnlisten=M_.bind(null,t.syncEngine),e}function $_(n,t,e={}){let r=new Ht;return n.asyncQueue.enqueueAndForget((async()=>(function(o,a,l,h,f){let p=new Ca({next:b=>{p.Nu(),a.enqueueAndForget((()=>P_(o,I))),b.fromCache&&h.source==="server"?f.reject(new x(R.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(b)},error:b=>f.reject(b)}),I=new Ta(l,p,{includeMetadataChanges:!0,qa:!0});return C_(o,I)})(await z_(n),n.asyncQueue,t,e,r))),r.promise}function fd(n){let t={};return n.timeoutSeconds!==void 0&&(t.timeoutSeconds=n.timeoutSeconds),t}var Zl=new Map;var pd="firestore.googleapis.com",th=!0,Ts=class{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new x(R.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=pd,this.ssl=th}else this.host=t.host,this.ssl=t.ssl??th;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=ed;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<p_)throw new x(R.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}fg("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=fd(t.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new x(R.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new x(R.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new x(R.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(function(r,s){return r.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}},sr=class{constructor(t,e,r,s){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ts({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new x(R.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new x(R.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ts(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new eo;switch(r.type){case"firstParty":return new io(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new x(R.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(e){let r=Zl.get(e);r&&(k("ComponentProvider","Removing Datastore"),Zl.delete(e),r.terminate())})(this),Promise.resolve()}};function G_(n,t,e,r={}){n=co(n,sr);let s=Te(t),o=n._getSettings(),a={...o,emulatorOptions:n._getEmulatorOptions()},l=`${t}:${e}`;s&&(Dr(`https://${l}`),kr("Firestore",!0)),o.host!==pd&&o.host!==l&&Xe("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let h={...o,host:l,ssl:s,emulatorOptions:r};if(!ie(h,a)&&(n._setSettings(h),r.mockUserToken)){let f,p;if(typeof r.mockUserToken=="string")f=r.mockUserToken,p=lt.MOCK_USER;else{f=xr(r.mockUserToken,n._app?.options.projectId);let I=r.mockUserToken.sub||r.mockUserToken.user_id;if(!I)throw new x(R.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new lt(I)}n._authCredentials=new no(new Xr(f,p))}}var me=class n{constructor(t,e,r){this.converter=e,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new n(this.firestore,t,this._query)}},xt=class n{constructor(t,e,r){this.converter=e,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new He(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new n(this.firestore,t,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,e,r){if(ar(e,n._jsonSchema))return new n(t,r||null,new O(tt.fromString(e.referencePath)))}};xt._jsonSchemaVersion="firestore/documentReference/1.0",xt._jsonSchema={type:it("string",xt._jsonSchemaVersion),referencePath:it("string")};var He=class n extends me{constructor(t,e,r){super(t,e,Vh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let t=this._path.popLast();return t.isEmpty()?null:new xt(this.firestore,null,new O(t))}withConverter(t){return new n(this.firestore,t,this._path)}};function md(n,t,...e){if(n=St(n),dg("collection","path",t),n instanceof sr){let r=tt.fromString(t,...e);return yl(r),new He(n,null,r)}{if(!(n instanceof xt||n instanceof He))throw new x(R.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(tt.fromString(t,...e));return yl(r),new He(n.firestore,null,r)}}var eh="AsyncQueue",Es=class{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new gs(this,"async_queue_retry"),this._c=()=>{let r=Zi();r&&k(eh,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=t;let e=Zi();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;let e=Zi();e&&typeof e.removeEventListener=="function"&&e.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise((()=>{}));let e=new Ht;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(t().then(e.resolve,e.reject),e.promise))).then((()=>e.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Xu.push(t),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!fn(t))throw t;k(eh,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(t){let e=this.ac.then((()=>(this.rc=!0,t().catch((r=>{throw this.nc=r,this.rc=!1,Wt("INTERNAL UNHANDLED ERROR: ",nh(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=e,e}enqueueAfterDelay(t,e,r){this.uc(),this.oc.indexOf(t)>-1&&(e=0);let s=_a.createAndSchedule(this,t,e,r,(o=>this.hc(o)));return this.tc.push(s),s}uc(){this.nc&&M(47125,{Pc:nh(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(let e of this.tc)if(e.timerId===t)return!0;return!1}Ec(t){return this.Tc().then((()=>{this.tc.sort(((e,r)=>e.targetTimeMs-r.targetTimeMs));for(let e of this.tc)if(e.skipDelay(),t!=="all"&&e.timerId===t)break;return this.Tc()}))}dc(t){this.oc.push(t)}hc(t){let e=this.tc.indexOf(t);this.tc.splice(e,1)}};function nh(n){let t=n.message||"";return n.stack&&(t=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),t}var vs=class extends sr{constructor(t,e,r,s){super(t,e,r,s),this.type="firestore",this._queue=new Es,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){let t=this._firestoreClient.terminate();this._queue=new Es(t),this._firestoreClient=void 0,await t}}};function gd(n,t){let e=typeof n=="object"?n:ve(),r=typeof n=="string"?n:t||rs,s=Lt(e,"firestore").getImmediate({identifier:r});if(!s._initialized){let o=Pr("firestore");o&&G_(s,...o)}return s}function K_(n){if(n._terminated)throw new x(R.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||H_(n),n._firestoreClient}function H_(n){let t=n._freezeSettings(),e=(function(s,o,a,l){return new ho(s,o,a,l.host,l.ssl,l.experimentalForceLongPolling,l.experimentalAutoDetectLongPolling,fd(l.experimentalLongPollingOptions),l.useFetchStreams,l.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,t);n._componentsProvider||t.localCache?._offlineComponentProvider&&t.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),n._firestoreClient=new Pa(n._authCredentials,n._appCheckCredentials,n._queue,e,n._componentsProvider&&(function(s){let o=s?._online.build();return{_offline:s?._offline.build(o),_online:o}})(n._componentsProvider))}var ce=class n{constructor(t){this._byteString=t}static fromBase64String(t){try{return new n(wt.fromBase64String(t))}catch(e){throw new x(R.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new n(wt.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(ar(t,n._jsonSchema))return n.fromBase64String(t.bytes)}};ce._jsonSchemaVersion="firestore/bytes/1.0",ce._jsonSchema={type:it("string",ce._jsonSchemaVersion),bytes:it("string")};var bs=class{constructor(...t){for(let e=0;e<t.length;++e)if(t[e].length===0)throw new x(R.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Dt(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}};var As=class{constructor(t){this._methodName=t}};var ue=class n{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new x(R.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new x(R.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return B(this._lat,t._lat)||B(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(t){if(ar(t,n._jsonSchema))return new n(t.latitude,t.longitude)}};ue._jsonSchemaVersion="firestore/geoPoint/1.0",ue._jsonSchema={type:it("string",ue._jsonSchemaVersion),latitude:it("number"),longitude:it("number")};var le=class n{constructor(t){this._values=(t||[]).map((e=>e))}toArray(){return this._values.map((t=>t))}isEqual(t){return(function(r,s){if(r.length!==s.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==s[o])return!1;return!0})(this._values,t._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(ar(t,n._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((e=>typeof e=="number")))return new n(t.vectorValues);throw new x(R.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};le._jsonSchemaVersion="firestore/vectorValue/1.0",le._jsonSchema={type:it("string",le._jsonSchemaVersion),vectorValues:it("object")};var W_=/^__.*__$/;function _d(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw M(40011,{Ac:n})}}var Da=class n{constructor(t,e,r,s,o,a){this.settings=t,this.databaseId=e,this.serializer=r,this.ignoreUndefinedProperties=s,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new n({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){let e=this.path?.child(t),r=this.Vc({path:e,fc:!1});return r.gc(t),r}yc(t){let e=this.path?.child(t),r=this.Vc({path:e,fc:!1});return r.Rc(),r}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return ka(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find((e=>t.isPrefixOf(e)))!==void 0||this.fieldTransforms.find((e=>t.isPrefixOf(e.field)))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(_d(this.Ac)&&W_.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}},xa=class{constructor(t,e,r){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=r||Vs(t)}Cc(t,e,r,s=!1){return new Da({Ac:t,methodName:e,Dc:r,path:Dt.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Q_(n){let t=n._freezeSettings(),e=Vs(n._databaseId);return new xa(n._databaseId,!!t.ignoreUndefinedProperties,e)}function J_(n,t,e,r=!1){return ec(e,n.Cc(r?4:3,t))}function ec(n,t){if(yd(n=St(n)))return Y_("Unsupported field value:",t,n),X_(n,t);if(n instanceof As)return(function(r,s){if(!_d(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(s);o&&s.fieldTransforms.push(o)})(n,t),null;if(n===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),n instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return(function(r,s){let o=[],a=0;for(let l of r){let h=ec(l,s.wc(a));h==null&&(h={nullValue:"NULL_VALUE"}),o.push(h),a++}return{arrayValue:{values:o}}})(n,t)}return(function(r,s){if((r=St(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Kg(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=ct.fromDate(r);return{timestampValue:Vo(s.serializer,o)}}if(r instanceof ct){let o=new ct(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Vo(s.serializer,o)}}if(r instanceof ue)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ce)return{bytesValue:Hh(s.serializer,r._byteString)};if(r instanceof xt){let o=s.databaseId,a=r.firestore._databaseId;if(!a.isEqual(o))throw s.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Wh(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof le)return(function(a,l){return{mapValue:{fields:{[qa]:{stringValue:ja},[tn]:{arrayValue:{values:a.toArray().map((f=>{if(typeof f!="number")throw l.Sc("VectorValues must only contain numeric values.");return Ka(l.serializer,f)}))}}}}}})(r,s);throw s.Sc(`Unsupported field value: ${Cs(r)}`)})(n,t)}function X_(n,t){let e={};return Th(n)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):pn(n,((r,s)=>{let o=ec(s,t.mc(r));o!=null&&(e[r]=o)})),{mapValue:{fields:e}}}function yd(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof ct||n instanceof ue||n instanceof ce||n instanceof xt||n instanceof As||n instanceof le)}function Y_(n,t,e){if(!yd(e)||!oh(e)){let r=Cs(e);throw r==="an object"?t.Sc(n+" a custom object"):t.Sc(n+" "+r)}}var Z_=new RegExp("[~\\*/\\[\\]]");function ty(n,t,e){if(t.search(Z_)>=0)throw ka(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,e);try{return new bs(...t.split("."))._internalPath}catch{throw ka(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,e)}}function ka(n,t,e,r,s){let o=r&&!r.isEmpty(),a=s!==void 0,l=`Function ${t}() called with invalid data`;e&&(l+=" (via `toFirestore()`)"),l+=". ";let h="";return(o||a)&&(h+=" (found",o&&(h+=` in field ${r}`),a&&(h+=` in document ${s}`),h+=")"),new x(R.INVALID_ARGUMENT,l+n+h)}var Ss=class{constructor(t,e,r,s,o){this._firestore=t,this._userDataWriter=e,this._key=r,this._document=s,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new xt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let t=new Na(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){let e=this._document.data.field(Ms("DocumentSnapshot.get",t));if(e!==null)return this._userDataWriter.convertValue(e)}}},Na=class extends Ss{data(){return super.data()}};function Ms(n,t){return typeof t=="string"?ty(n,t):t instanceof bs?t._internalPath:t._delegate._internalPath}function ey(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new x(R.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var ir=class{},or=class extends ir{};function wd(n,t,...e){let r=[];t instanceof ir&&r.push(t),r=r.concat(e),(function(o){let a=o.filter((h=>h instanceof Va)).length,l=o.filter((h=>h instanceof Rs)).length;if(a>1||a>0&&l>0)throw new x(R.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(let s of r)n=s._apply(n);return n}var Rs=class n extends or{constructor(t,e,r){super(),this._field=t,this._op=e,this._value=r,this.type="where"}static _create(t,e,r){return new n(t,e,r)}_apply(t){let e=this._parse(t);return Ed(t._query,e),new me(t.firestore,t.converter,Ao(t._query,e))}_parse(t){let e=Q_(t.firestore);return(function(o,a,l,h,f,p,I){let b;if(f.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new x(R.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){sh(I,p);let N=[];for(let V of I)N.push(rh(h,o,V));b={arrayValue:{values:N}}}else b=rh(h,o,I)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||sh(I,p),b=J_(l,a,I,p==="in"||p==="not-in");return st.create(f,p,b)})(t._query,"where",e,t.firestore._databaseId,this._field,this._op,this._value)}};function nc(n,t,e){let r=t,s=Ms("where",n);return Rs._create(s,r,e)}var Va=class n extends ir{constructor(t,e){super(),this.type=t,this._queryConstraints=e}static _create(t,e){return new n(t,e)}_parse(t){let e=this._queryConstraints.map((r=>r._parse(t))).filter((r=>r.getFilters().length>0));return e.length===1?e[0]:Nt.create(e,this._getOperator())}_apply(t){let e=this._parse(t);return e.getFilters().length===0?t:((function(s,o){let a=s,l=o.getFlattenedFilters();for(let h of l)Ed(a,h),a=Ao(a,h)})(t._query,e),new me(t.firestore,t.converter,Ao(t._query,e)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var Oa=class n extends or{constructor(t,e){super(),this._field=t,this._direction=e,this.type="orderBy"}static _create(t,e){return new n(t,e)}_apply(t){let e=(function(s,o,a){if(s.startAt!==null)throw new x(R.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new x(R.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ke(o,a)})(t._query,this._field,this._direction);return new me(t.firestore,t.converter,(function(s,o){let a=s.explicitOrderBy.concat([o]);return new de(s.path,s.collectionGroup,a,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)})(t._query,e))}};function Id(n,t="asc"){let e=t,r=Ms("orderBy",n);return Oa._create(r,e)}var Ma=class n extends or{constructor(t,e,r){super(),this.type=t,this._limit=e,this._limitType=r}static _create(t,e,r){return new n(t,e,r)}_apply(t){return new me(t.firestore,t.converter,os(t._query,this._limit,this._limitType))}};function Td(n){return pg("limit",n),Ma._create("limit",n,"F")}function rh(n,t,e){if(typeof(e=St(e))=="string"){if(e==="")throw new x(R.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Oh(t)&&e.indexOf("/")!==-1)throw new x(R.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${e}' contains a '/' character.`);let r=t.path.child(tt.fromString(e));if(!O.isDocumentKey(r))throw new x(R.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Al(n,new O(r))}if(e instanceof xt)return Al(n,e._key);throw new x(R.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Cs(e)}.`)}function sh(n,t){if(!Array.isArray(n)||n.length===0)throw new x(R.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function Ed(n,t){let e=(function(s,o){for(let a of s)for(let l of a.getFlattenedFilters())if(o.indexOf(l.op)>=0)return l.op;return null})(n.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(t.op));if(e!==null)throw e===t.op?new x(R.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new x(R.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${e.toString()}' filters.`)}var Fa=class{convertValue(t,e="none"){switch(he(t)){case 0:return null;case 1:return t.booleanValue;case 2:return J(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Jt(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 11:return this.convertObject(t.mapValue,e);case 10:return this.convertVectorValue(t.mapValue);default:throw M(62114,{value:t})}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){let r={};return pn(t,((s,o)=>{r[s]=this.convertValue(o,e)})),r}convertVectorValue(t){let e=t.fields?.[tn].arrayValue?.values?.map((r=>J(r.doubleValue)));return new le(e)}convertGeoPoint(t){return new ue(J(t.latitude),J(t.longitude))}convertArray(t,e){return(t.values||[]).map((r=>this.convertValue(r,e)))}convertServerTimestamp(t,e){switch(e){case"previous":let r=xs(t);return r==null?null:this.convertValue(r,e);case"estimate":return this.convertTimestamp(Hn(t));default:return null}}convertTimestamp(t){let e=Qt(t);return new ct(e.seconds,e.nanos)}convertDocumentKey(t,e){let r=tt.fromString(t);X(td(r),9688,{name:t});let s=new ss(r.get(1),r.get(3)),o=new O(r.popFirst(5));return s.isEqual(e)||Wt(`Document ${o} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),o}};var $e=class{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}},We=class n extends Ss{constructor(t,e,r,s,o,a){super(t,e,r,s,a),this._firestore=t,this._firestoreImpl=t,this.metadata=o}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){let e=new Qe(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){let r=this._document.data.field(Ms("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,e.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new x(R.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let t=this._document,e={};return e.type=n._jsonSchemaVersion,e.bundle="",e.bundleSource="DocumentSnapshot",e.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?e:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),e.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),e)}};We._jsonSchemaVersion="firestore/documentSnapshot/1.0",We._jsonSchema={type:it("string",We._jsonSchemaVersion),bundleSource:it("string","DocumentSnapshot"),bundleName:it("string"),bundle:it("string")};var Qe=class extends We{data(t={}){return super.data(t)}},Je=class n{constructor(t,e,r,s){this._firestore=t,this._userDataWriter=e,this._snapshot=s,this.metadata=new $e(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){let t=[];return this.forEach((e=>t.push(e))),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,e){this._snapshot.docs.forEach((r=>{t.call(e,new Qe(this._firestore,this._userDataWriter,r.key,r,new $e(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){let e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new x(R.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=(function(s,o){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map((l=>{let h=new Qe(s._firestore,s._userDataWriter,l.doc.key,l.doc,new $e(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:h,oldIndex:-1,newIndex:a++}}))}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((l=>o||l.type!==3)).map((l=>{let h=new Qe(s._firestore,s._userDataWriter,l.doc.key,l.doc,new $e(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter),f=-1,p=-1;return l.type!==0&&(f=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),p=a.indexOf(l.doc.key)),{type:ny(l.type),doc:h,oldIndex:f,newIndex:p}}))}})(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new x(R.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let t={};t.type=n._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=Zr.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let e=[],r=[],s=[];return this.docs.forEach((o=>{o._document!==null&&(e.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),s.push(o.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}};function ny(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return M(61501,{type:n})}}Je._jsonSchemaVersion="firestore/querySnapshot/1.0",Je._jsonSchema={type:it("string",Je._jsonSchemaVersion),bundleSource:it("string","QuerySnapshot"),bundleName:it("string"),bundle:it("string")};var La=class extends Fa{constructor(t){super(),this.firestore=t}convertBytes(t){return new ce(t)}convertReference(t){let e=this.convertDocumentKey(t,this.firestore._databaseId);return new xt(this.firestore,null,e)}};function vd(n){n=co(n,me);let t=co(n.firestore,vs),e=K_(t),r=new La(t);return ey(n._query),$_(e,n._query).then((s=>new Je(t,r,n,s)))}(function(t,e=!0){(function(s){dn=s})(Ur),Rt(new pt("firestore",((r,{instanceIdentifier:s,options:o})=>{let a=r.getProvider("app").getImmediate(),l=new vs(new ro(r.getProvider("auth-internal")),new oo(a,r.getProvider("app-check-internal")),(function(f,p){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new x(R.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ss(f.options.projectId,p)})(a,s),a);return o={useFetchStreams:e,...o},l._setSettings(o),l}),"PUBLIC").setMultipleInstances(!0)),mt(ml,gl,t),mt(ml,gl,"esm2020")})();var Pd="firebasestorage.googleapis.com",Dd="storageBucket",ry=120*1e3,sy=600*1e3;var dt=class n extends Et{constructor(t,e,r=0){super(rc(t),`Firebase Storage: ${e} (${rc(t)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,n.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return rc(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}},ft;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(ft||(ft={}));function rc(n){return"storage/"+n}function xd(){let n="An unknown error occurred, please check the error payload for server response.";return new dt(ft.UNKNOWN,n)}function iy(n){return new dt(ft.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function oy(n){return new dt(ft.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function ay(){let n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new dt(ft.UNAUTHENTICATED,n)}function cy(){return new dt(ft.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function uy(n){return new dt(ft.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function ly(){return new dt(ft.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function hy(){return new dt(ft.CANCELED,"User canceled the upload/download.")}function dy(n){return new dt(ft.INVALID_URL,"Invalid URL '"+n+"'.")}function fy(n){return new dt(ft.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function py(){return new dt(ft.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Dd+"' property when initializing the app?")}function my(){return new dt(ft.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function sc(n){return new dt(ft.INVALID_ARGUMENT,n)}function kd(){return new dt(ft.APP_DELETED,"The Firebase app was deleted.")}function gy(n){return new dt(ft.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function lr(n){throw new dt(ft.INTERNAL_ERROR,"Internal error: "+n)}var Vt=class n{constructor(t,e){this.bucket=t,this.path_=e}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){let t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,e){let r;try{r=n.makeFromUrl(t,e)}catch{return new n(t,"")}if(r.path==="")return r;throw fy(t)}static makeFromUrl(t,e){let r=null,s="([A-Za-z0-9.\\-_]+)";function o(H){H.path.charAt(H.path.length-1)==="/"&&(H.path_=H.path_.slice(0,-1))}let a="(/(.*))?$",l=new RegExp("^gs://"+s+a,"i"),h={bucket:1,path:3};function f(H){H.path_=decodeURIComponent(H.path)}let p="v[A-Za-z0-9_]+",I=e.replace(/[.]/g,"\\."),b="(/([^?#]*).*)?$",C=new RegExp(`^https?://${I}/${p}/b/${s}/o${b}`,"i"),N={bucket:1,path:3},V=e===Pd?"(?:storage.googleapis.com|storage.cloud.google.com)":e,D="([^?#]*)",G=new RegExp(`^https?://${V}/${s}/${D}`,"i"),z=[{regex:l,indices:h,postModify:o},{regex:C,indices:N,postModify:f},{regex:G,indices:{bucket:1,path:2},postModify:f}];for(let H=0;H<z.length;H++){let ot=z[H],Y=ot.regex.exec(t);if(Y){let w=Y[ot.indices.bucket],m=Y[ot.indices.path];m||(m=""),r=new n(w,m),ot.postModify(r);break}}if(r==null)throw dy(t);return r}},ic=class{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}};function _y(n,t,e){let r=1,s=null,o=null,a=!1,l=0;function h(){return l===2}let f=!1;function p(...D){f||(f=!0,t.apply(null,D))}function I(D){s=setTimeout(()=>{s=null,n(C,h())},D)}function b(){o&&clearTimeout(o)}function C(D,...G){if(f){b();return}if(D){b(),p.call(null,D,...G);return}if(h()||a){b(),p.call(null,D,...G);return}r<64&&(r*=2);let z;l===1?(l=2,z=0):z=(r+Math.random())*1e3,I(z)}let N=!1;function V(D){N||(N=!0,b(),!f&&(s!==null?(D||(l=2),clearTimeout(s),I(0)):D||(l=1)))}return I(0),o=setTimeout(()=>{a=!0,V(!0)},e),V}function yy(n){n(!1)}function wy(n){return n!==void 0}function Iy(n){return typeof n=="object"&&!Array.isArray(n)}function Nd(n){return typeof n=="string"||n instanceof String}function bd(n,t,e,r){if(r<t)throw sc(`Invalid value for '${n}'. Expected ${t} or greater.`);if(r>e)throw sc(`Invalid value for '${n}'. Expected ${e} or less.`)}function Vd(n,t,e){let r=t;return e==null&&(r=`https://${t}`),`${e}://${r}/v0${n}`}function Od(n){let t=encodeURIComponent,e="?";for(let r in n)if(n.hasOwnProperty(r)){let s=t(r)+"="+t(n[r]);e=e+s+"&"}return e=e.slice(0,-1),e}var Ne;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(Ne||(Ne={}));function Ty(n,t){let e=n>=500&&n<600,s=[408,429].indexOf(n)!==-1,o=t.indexOf(n)!==-1;return e||s||o}var oc=class{constructor(t,e,r,s,o,a,l,h,f,p,I,b=!0,C=!1){this.url_=t,this.method_=e,this.headers_=r,this.body_=s,this.successCodes_=o,this.additionalRetryCodes_=a,this.callback_=l,this.errorCallback_=h,this.timeout_=f,this.progressCallback_=p,this.connectionFactory_=I,this.retry=b,this.isUsingEmulator=C,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((N,V)=>{this.resolve_=N,this.reject_=V,this.start_()})}start_(){let t=(r,s)=>{if(s){r(!1,new gn(!1,null,!0));return}let o=this.connectionFactory_();this.pendingConnection_=o;let a=l=>{let h=l.loaded,f=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(h,f)};this.progressCallback_!==null&&o.addUploadProgressListener(a),o.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(a),this.pendingConnection_=null;let l=o.getErrorCode()===Ne.NO_ERROR,h=o.getStatus();if(!l||Ty(h,this.additionalRetryCodes_)&&this.retry){let p=o.getErrorCode()===Ne.ABORT;r(!1,new gn(!1,null,p));return}let f=this.successCodes_.indexOf(h)!==-1;r(!0,new gn(f,o))})},e=(r,s)=>{let o=this.resolve_,a=this.reject_,l=s.connection;if(s.wasSuccessCode)try{let h=this.callback_(l,l.getResponse());wy(h)?o(h):o()}catch(h){a(h)}else if(l!==null){let h=xd();h.serverResponse=l.getErrorText(),this.errorCallback_?a(this.errorCallback_(l,h)):a(h)}else if(s.canceled){let h=this.appDelete_?kd():hy();a(h)}else{let h=ly();a(h)}};this.canceled_?e(!1,new gn(!1,null,!0)):this.backoffId_=_y(t,e,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&yy(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}},gn=class{constructor(t,e,r){this.wasSuccessCode=t,this.connection=e,this.canceled=!!r}};function Ey(n,t){t!==null&&t.length>0&&(n.Authorization="Firebase "+t)}function vy(n,t){n["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function by(n,t){t&&(n["X-Firebase-GMPID"]=t)}function Ay(n,t){t!==null&&(n["X-Firebase-AppCheck"]=t)}function Sy(n,t,e,r,s,o,a=!0,l=!1){let h=Od(n.urlParams),f=n.url+h,p=Object.assign({},n.headers);return by(p,t),Ey(p,e),vy(p,o),Ay(p,r),new oc(f,n.method,p,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,s,a,l)}function Md(n){let t;try{t=JSON.parse(n)}catch{return null}return Iy(t)?t:null}function Ry(n){if(n.length===0)return null;let t=n.lastIndexOf("/");return t===-1?"":n.slice(0,t)}function Cy(n,t){let e=t.split("/").filter(r=>r.length>0).join("/");return n.length===0?e:n+"/"+e}function Fd(n){let t=n.lastIndexOf("/",n.length-2);return t===-1?n:n.slice(t+1)}function Py(n,t){return t}var gt=class{constructor(t,e,r,s){this.server=t,this.local=e||t,this.writable=!!r,this.xform=s||Py}},Fs=null;function Dy(n){return!Nd(n)||n.length<2?n:Fd(n)}function xy(){if(Fs)return Fs;let n=[];n.push(new gt("bucket")),n.push(new gt("generation")),n.push(new gt("metageneration")),n.push(new gt("name","fullPath",!0));function t(o,a){return Dy(a)}let e=new gt("name");e.xform=t,n.push(e);function r(o,a){return a!==void 0?Number(a):a}let s=new gt("size");return s.xform=r,n.push(s),n.push(new gt("timeCreated")),n.push(new gt("updated")),n.push(new gt("md5Hash",null,!0)),n.push(new gt("cacheControl",null,!0)),n.push(new gt("contentDisposition",null,!0)),n.push(new gt("contentEncoding",null,!0)),n.push(new gt("contentLanguage",null,!0)),n.push(new gt("contentType",null,!0)),n.push(new gt("metadata","customMetadata",!0)),Fs=n,Fs}function ky(n,t){function e(){let r=n.bucket,s=n.fullPath,o=new Vt(r,s);return t._makeStorageReference(o)}Object.defineProperty(n,"ref",{get:e})}function Ny(n,t,e){let r={};r.type="file";let s=e.length;for(let o=0;o<s;o++){let a=e[o];r[a.local]=a.xform(r,t[a.server])}return ky(r,n),r}function Vy(n,t,e){let r=Md(t);return r===null?null:Ny(n,r,e)}function Oy(n,t,e,r){let s=Md(t);if(s===null||!Nd(s.downloadTokens))return null;let o=s.downloadTokens;if(o.length===0)return null;let a=encodeURIComponent;return o.split(",").map(f=>{let p=n.bucket,I=n.fullPath,b="/b/"+a(p)+"/o/"+a(I),C=Vd(b,e,r),N=Od({alt:"media",token:f});return C+N})[0]}var ac=class{constructor(t,e,r,s){this.url=t,this.method=e,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}};function My(n){if(!n)throw xd()}function Fy(n,t){function e(r,s){let o=Vy(n,s,t);return My(o!==null),Oy(o,s,n.host,n._protocol)}return e}function Ly(n){function t(e,r){let s;return e.getStatus()===401?e.getErrorText().includes("Firebase App Check token is invalid")?s=cy():s=ay():e.getStatus()===402?s=oy(n.bucket):e.getStatus()===403?s=uy(n.path):s=r,s.status=e.getStatus(),s.serverResponse=r.serverResponse,s}return t}function Uy(n){let t=Ly(n);function e(r,s){let o=t(r,s);return r.getStatus()===404&&(o=iy(n.path)),o.serverResponse=s.serverResponse,o}return e}function By(n,t,e){let r=t.fullServerUrl(),s=Vd(r,n.host,n._protocol),o="GET",a=n.maxOperationRetryTime,l=new ac(s,o,Fy(n,e),a);return l.errorHandler=Uy(t),l}var cI=256*1024;var Ad=null,cc=class{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Ne.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Ne.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Ne.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,e,r,s,o){if(this.sent_)throw lr("cannot .send() more than once");if(Te(t)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(e,t,!0),o!==void 0)for(let a in o)o.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,o[a].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw lr("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw lr("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw lr("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw lr("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",t)}},uc=class extends cc{initXhr(){this.xhr_.responseType="text"}};function qy(){return Ad?Ad():new uc}var _n=class n{constructor(t,e){this._service=t,e instanceof Vt?this._location=e:this._location=Vt.makeFromUrl(e,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,e){return new n(t,e)}get root(){let t=new Vt(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Fd(this._location.path)}get storage(){return this._service}get parent(){let t=Ry(this._location.path);if(t===null)return null;let e=new Vt(this._location.bucket,t);return new n(this._service,e)}_throwIfRoot(t){if(this._location.path==="")throw gy(t)}};function jy(n){n._throwIfRoot("getDownloadURL");let t=By(n.storage,n._location,xy());return n.storage.makeRequestWithTokens(t,qy).then(e=>{if(e===null)throw my();return e})}function zy(n,t){let e=Cy(n._location.path,t),r=new Vt(n._location.bucket,e);return new _n(n.storage,r)}function $y(n){return/^[A-Za-z]+:\/\//.test(n)}function Gy(n,t){return new _n(n,t)}function Ld(n,t){if(n instanceof hr){let e=n;if(e._bucket==null)throw py();let r=new _n(e,e._bucket);return t!=null?Ld(r,t):r}else return t!==void 0?zy(n,t):n}function Ky(n,t){if(t&&$y(t)){if(n instanceof hr)return Gy(n,t);throw sc("To use ref(service, url), the first argument must be a Storage instance.")}else return Ld(n,t)}function Sd(n,t){let e=t?.[Dd];return e==null?null:Vt.makeFromBucketSpec(e,n)}function Hy(n,t,e,r={}){n.host=`${t}:${e}`;let s=Te(t);s&&(Dr(`https://${n.host}/b`),kr("Storage",!0)),n._isUsingEmulator=!0,n._protocol=s?"https":"http";let{mockUserToken:o}=r;o&&(n._overrideAuthToken=typeof o=="string"?o:xr(o,n.app.options.projectId))}var hr=class{constructor(t,e,r,s,o,a=!1){this.app=t,this._authProvider=e,this._appCheckProvider=r,this._url=s,this._firebaseVersion=o,this._isUsingEmulator=a,this._bucket=null,this._host=Pd,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=ry,this._maxUploadRetryTime=sy,this._requests=new Set,s!=null?this._bucket=Vt.makeFromBucketSpec(s,this._host):this._bucket=Sd(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=Vt.makeFromBucketSpec(this._url,t):this._bucket=Sd(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){bd("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){bd("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;let t=this._authProvider.getImmediate({optional:!0});if(t){let e=await t.getToken();if(e!==null)return e.accessToken}return null}async _getAppCheckToken(){if(Lr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new _n(this,t)}_makeRequest(t,e,r,s,o=!0){if(this._deleted)return new ic(kd());{let a=Sy(t,this._appId,r,s,e,this._firebaseVersion,o,this._isUsingEmulator);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}async makeRequestWithTokens(t,e){let[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,e,r,s).getPromise()}},Rd="@firebase/storage",Cd="0.14.0";var Ud="storage";function Bd(n){return n=St(n),jy(n)}function qd(n,t){return n=St(n),Ky(n,t)}function jd(n=ve(),t){n=St(n);let r=Lt(n,Ud).getImmediate({identifier:t}),s=Pr("storage");return s&&Wy(r,...s),r}function Wy(n,t,e,r={}){Hy(n,t,e,r)}function Qy(n,{instanceIdentifier:t}){let e=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),s=n.getProvider("app-check-internal");return new hr(e,r,s,t,Ur)}function Jy(){Rt(new pt(Ud,Qy,"PUBLIC").setMultipleInstances(!0)),mt(Rd,Cd,""),mt(Rd,Cd,"esm2020")}Jy();var Xy={apiKey:"AIzaSyDIbQBmou63triRfAmCG0iTPFXcbho0r4U",authDomain:"the-story-so-far-c474f.firebaseapp.com",projectId:"the-story-so-far-c474f",storageBucket:"the-story-so-far-c474f.firebasestorage.app",messagingSenderId:"518541790890",appId:"1:518541790890:web:7d8f1ee180e50616070ad3",measurementId:"G-X4V7G3J3JV"},lc=Ri(Xy),Yy=null;try{Yy=dl(lc)}catch(n){console.warn("Firebase analytics not initialized:",n?.message||n)}var zd=gd(lc),$d=jd(lc);function Zy(n=new Date){return n.toISOString().split("T")[0]}async function tw(){let n=Zy(),t=wd(md(zd,"questions"),nc("active","==",!0),nc("releaseDate","<=",n),Id("releaseDate","desc"),Td(1)),e=await vd(t);return e.empty?null:e.docs[0].data()}async function ew(n){let t=qd($d,`${n}/index.html`),e=await Bd(t),r=document.getElementById("questionFrame");r.src=e}function Ls(n){let t=document.getElementById("message");t.textContent=n}document.addEventListener("DOMContentLoaded",async()=>{Ls("Checking for today's unlocked question...");try{let n=await tw();if(!n){Ls("No unlocked questions for today. Check back later.");return}let t=document.getElementById("questionTitle");t.textContent=n.title||"Untitled Question",Ls(`Loaded question: ${n.id||n.title||""}`),await ew(n.folderPath)}catch(n){console.error(n),Ls("Error loading question. See console for details.")}});})();
/*! Bundled license information:

@firebase/util/dist/index.esm.js:
@firebase/util/dist/index.esm.js:
@firebase/util/dist/index.esm.js:
@firebase/util/dist/index.esm.js:
@firebase/util/dist/index.esm.js:
@firebase/util/dist/index.esm.js:
@firebase/util/dist/index.esm.js:
@firebase/util/dist/index.esm.js:
@firebase/util/dist/index.esm.js:
@firebase/util/dist/index.esm.js:
@firebase/logger/dist/esm/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/storage/dist/index.esm.js:
@firebase/storage/dist/index.esm.js:
@firebase/storage/dist/index.esm.js:
@firebase/storage/dist/index.esm.js:
@firebase/storage/dist/index.esm.js:
@firebase/storage/dist/index.esm.js:
@firebase/storage/dist/index.esm.js:
@firebase/storage/dist/index.esm.js:
@firebase/storage/dist/index.esm.js:
@firebase/storage/dist/index.esm.js:
@firebase/storage/dist/index.esm.js:
@firebase/storage/dist/index.esm.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/util/dist/index.esm.js:
@firebase/util/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
  (**
   * @license
   * Copyright 2022 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/util/dist/index.esm.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2025 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2021 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/util/dist/index.esm.js:
@firebase/installations/dist/esm/index.esm.js:
@firebase/analytics/dist/esm/index.esm.js:
  (**
   * @license
   * Copyright 2019 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/util/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/storage/dist/index.esm.js:
@firebase/storage/dist/index.esm.js:
  (**
   * @license
   * Copyright 2021 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/component/dist/esm/index.esm.js:
@firebase/app/dist/esm/index.esm.js:
@firebase/app/dist/esm/index.esm.js:
@firebase/installations/dist/esm/index.esm.js:
@firebase/installations/dist/esm/index.esm.js:
@firebase/installations/dist/esm/index.esm.js:
@firebase/installations/dist/esm/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/storage/dist/index.esm.js:
@firebase/storage/dist/index.esm.js:
  (**
   * @license
   * Copyright 2019 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/app/dist/esm/index.esm.js:
  (**
   * @license
   * Copyright 2019 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2023 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/app/dist/esm/index.esm.js:
  (**
   * @license
   * Copyright 2021 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2019 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

firebase/app/dist/esm/index.esm.js:
@firebase/installations/dist/esm/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/analytics/dist/esm/index.esm.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2019 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/webchannel-wrapper/dist/bloom-blob/esm/bloom_blob_es2018.js:
@firebase/webchannel-wrapper/dist/webchannel-blob/esm/webchannel_blob_es2018.js:
  (** @license
  Copyright The Closure Library Authors.
  SPDX-License-Identifier: Apache-2.0
  *)
  (** @license
  
   Copyright The Closure Library Authors.
   SPDX-License-Identifier: Apache-2.0
  *)

@firebase/firestore/dist/index.esm.js:
  (**
  * @license
  * Copyright 2020 Google LLC
  *
  * Licensed under the Apache License, Version 2.0 (the "License");
  * you may not use this file except in compliance with the License.
  * You may obtain a copy of the License at
  *
  *   http://www.apache.org/licenses/LICENSE-2.0
  *
  * Unless required by applicable law or agreed to in writing, software
  * distributed under the License is distributed on an "AS IS" BASIS,
  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  * See the License for the specific language governing permissions and
  * limitations under the License.
  *)
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.esm.js:
  (**
   * @license
   * Copyright 2025 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2021 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.esm.js:
  (**
   * @license
   * Copyright 2018 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.esm.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2023 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.esm.js:
@firebase/storage/dist/index.esm.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2022 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.esm.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2018 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.esm.js:
  (**
   * @license
   * Copyright 2022 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2023 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.esm.js:
  (**
   * @license
   * Copyright 2023 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2022 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.esm.js:
  (**
   * @license
   * Copyright 2024 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.esm.js:
  (**
   * @license
   * Copyright 2021 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2021 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law | agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.esm.js:
  (**
   * @license
   * Copyright 2018 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.esm.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2022 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2024 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.esm.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2023 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2019 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.esm.js:
  (**
   * @license
   * Copyright 2018 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.esm.js:
  (**
   * @license
   * Copyright 2019 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2023 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.esm.js:
@firebase/storage/dist/index.esm.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.esm.js:
  (**
   * @license
   * Copyright 2025 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.esm.js:
  (**
   * @license
   * Copyright 2023 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.esm.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2022 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.esm.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2024 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.esm.js:
  (**
   * @license
   * Copyright 2025 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
  (**
   * @license
   * Copyright 2023 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
*/
